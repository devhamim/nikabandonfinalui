function clearForm(){$("#currentPassword").val("");$("#newPassword").val("");$("#confirmPassword").val("")}function markMeOnline(){$(".chat-visibility").html("Online");$("#online-color-mark").removeClass("offline-mark").removeClass("invisible-mark");$("#online-color-mark").addClass("online-mark");$(".chat-visibility-area").show()}function markMeOffline(){$(".chat-visibility").html("Offline");$("#online-color-mark").removeClass("online-mark").removeClass("invisible-mark");$("#online-color-mark").addClass("offline-mark");$(".chat-visibility-area").show()}function markMeInvisible(){$(".chat-visibility").html("Invisible");$("#online-color-mark").removeClass("online-mark").removeClass("offline-mark");$("#online-color-mark").addClass("invisible-mark");$(".chat-visibility-area").show()}function AddMessage(n,t){$("#divMessage").append('<div class="message"><span class="userName">'+n+"<\/span>: "+t+"<\/div>");var i=$("#divMessage")[0].scrollHeight;$("#divMessage").scrollTop(i)}function OpenPrivateChatWindow(n,t){var u=$.cookie(ckChatUserName),i=t,r=getPrivateChatWindowId(u,i);$("#"+r).length>0||createPrivateChatWindow(n,r,i)}function makeClassName(n){var t=replaceAll(n," ","-");return t=replaceAll(t,".",""),replaceAll(t,"/","")}function nthIndex(n,t,i){for(var u=n.length,r=-1;i--&&r++<u;)if(r=n.indexOf(t,r),r<0)break;return r}function getShortName(n){var t=nthIndex(n,"_",3),i=nthIndex(n,"_",4)-1,r=i-t,u=n.substr(t+1,r);return u.split(/\s+/).slice(0,2).join(" ")}function escapeRegExp(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(n,t,i){return n.replace(new RegExp(escapeRegExp(t),"g"),i)}function getUserIcon(n){var t=nthIndex(n,"_",1)+1,i=nthIndex(n,"_",2),r=i-t,u=n.substr(t,r);return"/Photos/Members/s25634/"+u}function getUserId(n){var t="";return n&&(t=n.substr(0,n.indexOf("_"))),t}function getPrivateChatWindowId(n,t){var r=makeClassName(n),f=r.substr(0,r.indexOf("_")),u=makeClassName(t),e=u.substr(0,u.indexOf("_")),i=[f,e];return i=i.sort(),"private_"+i[0]+"_"+i[1]}function getCurrentTime(){var n=new Date,t=n.getHours()-(n.getHours()>=12?12:0),i=n.getMinutes(),r=n.getHours()>=12?"pm":"am";return"("+t+":"+i+" "+r+")"}function AddUser(n,t,i,r){var e=getShortName(t),u=makeClassName(t),s=getUserIcon(t),o=u.substr(0,u.indexOf("_")),h=$("#hdConnectionId").val(),f="",c=!1;h==n?(c=!0,f=$('<li id="'+o+'" class="chat-user-li" connectionId="'+n+'" ><img src='+s+'><\/img><span id="'+n+'" class="user '+u+'" >'+e+'<\/span><span class="chat-online-status online-mark"><\/span><\/li>')):r||(f=i?$('<li id="'+o+'" class="chat-user-li" connectionId="'+n+'" ><img src='+s+'><\/img><a id="'+n+'" class="user '+u+'" >'+e+'<\/a><span class="chat-online-status offline-mark"><\/span><\/li>'):$('<li id="'+o+'" class="chat-user-li" connectionId="'+n+'" ><img src='+s+'><\/img><a id="'+n+'" class="user '+u+'" >'+e+'<\/a><span class="chat-online-status online-mark"><\/span><\/li>'),$(f).click(function(n){var i,r,u,f,e;n.stopPropagation();n.preventDefault();i=$(this).attr("connectionId");h!=i&&(r=!1,u=$.cookie("ckIsPaidMember"),u&&u==="true"&&(r=!0),r?(f=$(".chat-online-status",$(this)).hasClass("online-mark"),f?OpenPrivateChatWindow(i,t):(OpenPrivateChatWindow(i,t),e=$("."+makeClassName("msg_"+t)),e.html('<div style="font-weight:600; color:red;padding:10px;text-align:center;">Member is offline!<\/div>'))):OpenPrivateChatWindow(i,t))}));n&&e&&($("#"+o).remove(),$("."+u).closest("li").remove(),c?$("#divChatUsers").prepend(f):r||(i?$("#divChatUsers").append(f):$("#divChatUsers").prepend(f)))}function createPrivateChatWindow(n,t,i){function o(n){var t=window.chatUsers.find(t=>t.connectionId===n);return t&&!t.isOffline?!0:!1}var f=makeClassName(i),u=$.cookie(ckChatWindow);u?u.indexOf(f)===-1&&(u=u+","+f):u=f;var e=i.indexOf("_")+1,s=i.indexOf("_",i.indexOf("_")+1),h=s-e,c=i.substr(e,h),l='<img class="chat-window-top-left-pic" src="/Photos/Members/s25634/'+c+'"><\/img>';$.cookie(ckChatWindow,u,{path:"/"});var a=getShortName(i),v='<div id="'+t+'" class="ui-widget-content draggable chat-window chat-window-top-radius chat-window-shadow" rel="0"><div class="header chat-window-top-radius clearfix"><div  style="float:right;"><img id="imgVideoCall" style="cursor:pointer;" src="/Images/chat-video.png"/><img id="imgDelete" style="cursor:pointer; margin-left:5px;" src="/Images/chat-close.png"/><\/div><div style="float:left;">'+l+'<span class="selText" rel="0">'+a+'<\/span><\/div><\/div><div id="divMessage" class="messageArea msg_'+f+'"><\/div><div id="typingIndicator" style="position: absolute;bottom: 32px;left: 7px;"><label id="isTyping" /> <img src="/images/typing.gif" style="width:40px;" /> <\/div><div class="buttonBar"><input id="txtPrivateMessage" class="msgText chat-hint" placeholder="Type Message..." type="text"   /><img id="btnSendMessage" class="chat-window-send" src="/Images/chat-send.png"/><\/div><\/div>',r=$(v);r.find("#imgDelete").click(function(){$("#"+t).remove();removeCurrentChattingCookie(f);RePositioningChatWindow()});r.find("#imgVideoCall").click(function(){if(r.find("#divMessage").html().length===0){var u=!1,f=$.cookie("ckIsPaidMember");if(f&&f==="true"&&(u=!0),!u){bootbox.alert("<div style='text-align:center;'><h4 class='alert-msg'>Only paid members are allowed to chat!<br/><br/><a href='/Payment/MembershipPlan' class='bm-button' style='font-size:13px;'>View Membership Plans<\/a><\/h4><\/div>",function(){});return}}bootbox.confirm("<h3 >Invite Video Chat!<\/h3> <br/><h5> Do you invite for video chat?<\/h5>",function(r){r&&($(".modal-footer").prepend("<span class='video-link-loader'><img src='/images/ajax-loader.gif' /> Generating Video Link...<\/span>"),$.ajax({dataType:"json",url:"/Video/CreateZoomMeeting",success:function(r){var u="<a target='_blank' href='"+r.StartUrl+"'><img alt='' src='/images/chat-video-green.png' /> Start Video Chat<\/a>";if(n=getCurrentConnectionId(i),connection.state==="Disconnected"||!o(n)){$("#"+t).find("#divMessage").append('<div class="center connection-timeout">User Disconnects!<\/div>');return}return connection.invoke("SendMessage",n,u).catch(function(n){return console.error(n.toString())}),!0},error:function(){return bootbox.alert("Failed to generate video link!",function(){}),!0}}))})});r.find("#btnSendMessage").click(function(){var e=r.find("#txtPrivateMessage"),s=e.val(),u,f;if(s.length>0){if(r.find("#divMessage").html().length===0&&(u=!1,f=$.cookie("ckIsPaidMember"),f&&f==="true"&&(u=!0),!u)){bootbox.alert("<div style='text-align:center;'><h4 class='alert-msg'>Only paid members are allowed to chat!<br/><br/><a href='/Payment/MembershipPlan' class='bm-button' style='font-size:13px;'>View Membership Plans<\/a><\/h4><\/div>",function(){});return}if(n=getCurrentConnectionId(i),connection.state==="Disconnected"||!o(n)){$("#"+t).find("#divMessage").append('<div class="center connection-timeout">User Disconnects!<\/div>');return}connection.invoke("SendMessage",n,s).catch(function(n){return console.error(n.toString())});e.val("")}});r.find("#txtPrivateMessage").keypress(function(t){t.which==13?r.find("#btnSendMessage").click():(n=getCurrentConnectionId(i),connection.invoke("Typing",n).catch(function(n){return console.error(n.toString())}))});$(window).focus(function(){connection.invoke("MessageSeen",n).catch(function(n){return console.error(n.toString())})});AddDivToContainer(r)}function removeCurrentChattingCookie(n){var t=$.cookie(ckChatWindow);t=t.replace(n,"").replace(",,",",");$.cookie(ckChatWindow,t,{path:"/"})}function getCurrentConnectionId(n){var t="",r=getUserId(n),i=window.chatUsers.find(n=>n.userId===r);return i&&(t=i.connectionId),t}function AddDivToContainer(n){$("#divChatContainer").prepend(n);var t=$(".chat-window").length,i=$(".chat-window").width();$(".chat-window").first().css("right",i*t-29+t*10)}function RePositioningChatWindow(){var t=$(".chat-window").width(),n=1,i=10;$(".chat-window").each(function(){$(this).css("right",t*n-29+n*i);n++})}function setDisconnectMark(n){var i=n.indexOf("msg_")>=0?makeClassName(n):makeClassName("msg_"+n);var t=$("."+i),r=$(".your-chat-name:last",t),u=$(".message:last",t);$(u).append('<div class="message chat-disconn"><\/div>');$(".chat-disconn:last",t).html(r.html());$(".avatar-time",$(".chat-disconn:last")).remove();$(".avatar-name",$(".chat-disconn:last")).append('<span class="chat-disconn-text">Disconnected<\/span>')}window.jQuery||document.write("<script src='/assets/js/jquery.min.js'><\/script>");$(".changePassword").click(function(){$("#change-password-modal").modal("show")});$("#btnChangePasswordCancel").click(function(){$("#change-password-modal").modal("hide")});$("#btnChangePassword").click(function(){var t=$("#currentPassword").val(),n=$("#newPassword").val(),i=$("#confirmPassword").val();if(n!==i){bootbox.alert("Confirm password don't match!",function(){});return}$.ajax({dataType:"json",url:"/Security/IsValidUser",data:{password:t},method:"POST","async":!1,success:function(t){t.isSuccess?$.ajax({dataType:"json",url:"/Security/ChangePassword",data:{newPassword:n},method:"POST","async":!1,success:function(n){n.isSuccess?(clearForm(),bootbox.alert("<h4>Password has been changed sucessfully<\/h4>",function(){})):(clearForm(),bootbox.alert("<h4>Failed to change the password<\/h4>",function(){}))},error:function(){bootbox.alert("<h4>Error occured while changing password!<\/h4>",function(){})}}):(clearForm(),bootbox.alert("<h4>Current password is invalid!<\/h4>",function(){}))},error:function(){bootbox.alert("<h4>Error occured while checking current password!<\/h4>",function(){})}})});app.factory("agencyService",["$http",function(n){return{createAgency:function(t,i,r){return n({url:"/Agency/CreateAgency?username="+t+"&password="+i,method:"POST",data:r})}}}]);app.controller("CreateAgencyCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","agencyService",function(n,t,i,r,u,f,e){function s(){$(".create-agency-loading").show()}function o(){$(".create-agency-loading").hide()}function h(){t.Name="";t.Address="";t.Phone="";t.ContactPerson=""}t.createAgency=function(){if(t.submitted=!0,t.myForm.$invalid)return!1;if(t.Password!==t.ConfirmPassword){bootbox.alert("<h4>Confirm password dont match with password!<\/h4>",function(){});return}setButtonState("btnCreateAgency",!0);s();var n={};n.Name=t.Name;n.Address=t.Address;n.Phone=t.Phone;n.Email=t.Email;n.ContactPerson=t.ContactPerson;e.createAgency(t.Email,t.Password,n).success(function(n){n.isSuccess?bootbox.alert("<h4>Agency created successfully!<\/h4>",function(){}):n.message?bootbox.alert("<h4>"+n.message+"<\/h4>",function(){}):bootbox.alert("<h4>Failed to create the agency!<\/h4>",function(){});setButtonState("btnCreateAgency",!1);o();h()}).error(function(){bootbox.alert("<h4>Error occured while creating agency!<\/h4>",function(){});setButtonState("btnCreateAgency",!1);o()})}}]);app.factory("agencyProfileListService",["$http",function(){}]);app.controller("AgencyProfileListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","agencyProfileListService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/Agency/GetProfileList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].UserId),r.push(t[i].ProfileId),r.push(t[i].Name),r.push(t[i].Gender),r.push(t[i].Age),r.push(t[i].Mobile),r.push(t[i].RegistrationDate),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/Admin/DeleteUser",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting user!<\/h4>",function(){})}})}n(function(n){$("#data-table-agency-profile-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,order:[[6,"desc"]],columns:[{title:"Id"},{title:"Profile ID"},{title:"Name"},{title:"Gender"},{title:"Age"},{title:"Mobile"},{title:"Created"},{title:"Action","class":"center action-btn-container"}],aoColumnDefs:[{aTargets:[0],visible:!1},{aTargets:[2],mRender:function(n,t,i){var u=$(this).closest("tr"),r;return u.remove(),r='<a class="navigateDetailPage" id='+i[0]+">"+i[2]+"<\/a>",$("<div/>").append(r).html()}},{aTargets:[7],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Delete Profile" id='+i[0]+' class="managePhoto btn btn-default cursor-pointer">Photo<\/button>';return r+='&nbsp;<button title="Delete Profile" id='+i[0]+' class="editProfile btn btn-success cursor-pointer">Edit<\/button>',r+='&nbsp;<button title="Delete Profile" id='+i[0]+' class="deleteProfile btn btn-danger cursor-pointer">Del<\/button>',$("<div/>").append(r).html()}}]})});$("#data-table-agency-profile-list").on("click",".managePhoto",function(){var n=$(this).attr("id");window.open("/photo/managephoto/?UserId="+n+"&agency=yes","_blank")});$("#data-table-agency-profile-list").on("click",".editProfile",function(){var n=$(this).attr("id");window.open("/Account/CreateProfile/?UserId="+n+"&Type=update&agency=yes","_blank")});$("#data-table-agency-profile-list").on("click",".deleteProfile",function(){var n=$(this).attr("id"),i=$(this).closest("tr");t(n,function(){$(i).remove()})});$("#data-table-agency-profile-list").on("click",".navigateDetailPage",function(){var n=$(this).attr("id"),t=$(this).attr("email");window.open("/search/profile?id="+n+"&email="+t,"_blank")})}]);app.factory("notificationService",["$http",function(n){return{sendingMessage:function(t,i){return n({url:"/Notification/SendMessage",method:"POST",data:{sendTo:t,lastLoginDay:i}})}}}]);app.controller("NotificationCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","notificationService",function(n,t,i,r,u,f,e){t.LastLoginDay=30;t.sendMessage=function(){if(!t.SendTo){bootbox.alert("<h3>Please select notification target!<\/h3>",function(){});return}bootbox.confirm("<h3>Are you sure to send this notification?<\/h3>",function(n){n&&($("#notification-loading").html("Sending message...").show(),e.sendingMessage(t.SendTo,t.LastLoginDay).success(function(n){n.IsSuccess?bootbox.alert("<h4>Message send successfully<\/h4>",function(){}):bootbox.alert("<h4>Failed to send message<\/h4>",function(){});$("#notification-loading").html("").hide()}).error(function(){$("#notification-loading").html("").hide();bootbox.alert("<h4>Error occured while sending message!<\/h4>",function(){})}))})}}]),function(n){"use strict";function i(t){n("#homepage-success-stories").html("");for(var i=0;i<t.length;i++)n("#homepage-success-stories").append('<div class="grid-item"> <div class="grid-item-image"> <img alt="Success Story" src="/images/successstory/'+t[i].PhotoPath+'" /> <\/div> <div class="grid-item-info"> <span class="title">'+t[i].Title+'<\/span> <div class="m-top-15"> <p class="description">'+t[i].Description+"<\/p><\/div> <\/div> <\/div> ");n("#homepage-success-stories").slick({slidesToShow:3,slidesToScroll:1,arrows:!0,prevArrow:"<img class='a-left control-c prev slick-prev' alt='Left arrow' src='/images/arrow-left-thin.png'>",nextArrow:"<img class='a-right control-c next slick-next' alt='Right arrow' src='/images/arrow-right-thin.png'>",fade:!1,speed:300,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:300,settings:"unslick"}]})}function r(){n.ajax({"async":!0,url:"/Home/GetFeaturedSuccessStories",type:"GET",success:function(n){i(n)}})}function u(t){n("#homepage-blogs").html("");for(var i=0;i<t.length;i++)n("#homepage-blogs").append('<div class="grid-item"> <div class="grid-item-image"> <img alt="bdmarriage blog" src="/images/blog/'+t[i].PhotoPath+'" /> <\/div> <div class="grid-item-info"> <h4 class="heading-four title"><a title="blog" class="home-blog-title" rel="noopener" target="_blank" href="'+t[i].Url+'">'+t[i].Title+'<\/a><\/h4> <div class="m-top-15"> <p class="description">'+t[i].Description+'<\/p><\/div> <div class="blog-meta-box"><div><img alt="Monogram" src="/images/monogram-tiny.png" alt="Administration"><\/div><div class="blog-meta"><p>By '+t[i].BlogBy+'&nbsp; <i class="fa fa-clock-o"><\/i>'+t[i].BlogDate+"<\/p><\/div><\/div><\/div> <\/div> ");n("#homepage-blogs").slick({slidesToShow:3,slidesToScroll:1,arrows:!0,prevArrow:"<img class='a-left control-c prev slick-prev' alt='Left arrow' src='/images/arrow-left-thin.png'>",nextArrow:"<img class='a-right control-c next slick-next' alt='Right arrow' src='/images/arrow-right-thin.png'>",fade:!1,speed:300,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:300,settings:"unslick"}]})}function f(t){n("#homepage-clientTestimonials").html("");for(var i=0;i<t.length;i++)n("#homepage-clientTestimonials").append('<div class="grid-item"> <div class="grid-item-image"> <img alt="Client testimonial" src="/images/testimonials/'+t[i].PhotoPath+'" /> <\/div> <div class="card-one-top text-center grid-item-info"> <p class="card-heading"><a class="client-testimonial-heading" title="comments" rel="noopener" target="_blank" href="'+t[i].Url+'">'+t[i].Title+"<\/a><\/p><p>"+t[i].Location+'<\/p><ul class="stars"><li><i class="fa fa-star"><\/i><\/li><li><i class="fa fa-star"><\/i><\/li><li><i class="fa fa-star"><\/i><\/li><li><i class="fa fa-star"><\/i><\/li><li><i class="fa fa-star"><\/i><\/li><\/ul><p>'+t[i].Description+"<\/p><\/div> <\/div> ");n("#homepage-clientTestimonials").slick({slidesToShow:3,slidesToScroll:1,arrows:!0,prevArrow:"<img class='a-left control-c prev slick-prev' alt='Left arrow' src='/images/arrow-left-thin.png'>",nextArrow:"<img class='a-right control-c next slick-next' alt='Right arrow' src='/images/arrow-right-thin.png'>",fade:!1,speed:300,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:300,settings:"unslick"}]})}r();n("#return-to-top").click(function(){n("body,html").animate({scrollTop:0},500)});n(".home-right-help").click(function(){n(".home-help-tips").is(":visible")==!0?n(".home-help-tips",this).fadeOut("fast"):n(".home-help-tips",this).fadeIn("fast")});n(".home-help-tips").mouseleave(function(){n(".home-help-tips").is(":visible")==!0&&n(".home-help-tips").fadeOut("fast")});n("img.svg").each(function(){var t=n(this),i=t.attr("id"),r=t.attr("class"),u=t.attr("src");n.get(u,function(u){var f=n(u).find("svg");typeof i!="undefined"&&(f=f.attr("id",i));typeof r!="undefined"&&(f=f.attr("class",r));f=f.removeAttr("xmlns:a");t.replaceWith(f)},"xml")});n(".close-p").on("click",function(){n(this).parent().addClass("d-none")});var t=function(){setTimeout(function(){let t=n("#menubar").height(),i=n("#ulmenu").height();i>t?n("#menubar").css("overflow-y","scroll"):n("#menubar").css("overflow-y","hidden")},500)};t();n(window).on("resize",function(){t()});n(function(){});n(".navigation ul li span.sub").click(function(){t();var i=n(this).data("target_");n(i).is(":visible")?(n(i).removeClass("show"),n(this).removeClass("fa-minus"),n(this).addClass("fa-plus")):n(i).is(":visible")||(n(i).addClass("show"),n(this).removeClass("fa-plus"),n(this).addClass("fa-minus"))});n("#btn-home-search").click(function(){var t=n("#gender").val(),i=n("#ageFrom").val(),r=n("#ageTo").val(),u=n("#religion").val(),f=n("#profession").val();window.location.href="/search/result?ageFrom="+i+"&ageTo="+r+"&religion="+u+"&gender="+t+"&profession="+f});n("#gender").change(function(){var t=this.value;t.toLowerCase()==="male"?(n("#ageFrom").val(24),n("#ageTo").val(40)):(n("#ageFrom").val(18),n("#ageTo").val(40))})}(jQuery);app.factory("interestReceivedService",["$http",function(){}]);app.controller("InterestReceivedListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","interestReceivedService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/Interest/GetInterestList?type=Received",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].Id),r.push(t[i].FromUserId),r.push(t[i].FromToName),r.push(t[i].ActionDate),r.push(t[i].Status),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/Interest/AcceptInterest",data:{interestId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>Invitation has been accepted successfully<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to accept the invitation!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while accepting invitation!<\/h4>",function(){})}})}function i(n,t){$.ajax({dataType:"json",url:"/Interest/DeclineInterest",data:{interestId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>Invitation has been declined successfully<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to decline the invitation!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while decline invitation!<\/h4>",function(){})}})}n(function(n){$("#data-table-interest-receive-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,bDestroy:!0,order:[],columns:[{title:"Id"},{title:"FromUserId"},{title:"Received From"},{title:"Date"},{title:"Status"},{title:"Accept","class":"center"},{title:"Decline","class":"center"},{title:"Action","class":"center",width:"120px"}],aoColumnDefs:[{aTargets:[0,1],visible:!1},{aTargets:[2],mRender:function(n,t,i){var r='<a target="_blank" href=/search/profile?id='+i[1]+">"+i[2]+"<\/a>";return $("<div/>").append(r).html()}},{aTargets:[3],aType:"datetime-moment",sortable:!1,render:function(n){var t=moment(n).format("DD MMM YYYY h:mm a"),i=moment(n).format("DD MMM YYYY"),r='<span title="'+t+'">'+i+"<\/span>";return $("<div/>").append(r).html()}},{aTargets:[4],mRender:function(n,t,i){var r="";return r=i[4]==="accept"?'<span class="status request-accept">Accepted<\/span>':i[4]==="pending"?'<span class="status request-pending">Pending<\/span>':'<span class="status request-decline">Declined<\/span>',$("<div/>").append(r).html()}},{aTargets:[5],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button type="submit" id='+i[0]+' class="btn btn-primary accept">Accept<\/button>';return $("<div/>").append(r).html()}},{aTargets:[6],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button type="submit" id='+i[0]+' class="btn btn-danger decline" style="color:#fff;">Decline<\/button>';return $("<div/>").append(r).html()}},{aTargets:[7],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<a target="_blank" href=/message/send?to='+i[1]+"&name="+i[2]+' class="btn btn-success">Send Message<\/a>';return $("<div/>").append(r).html()}}]})});$("#data-table-interest-receive-list").on("click",".decline",function(){var n=$(this).attr("id"),t=$(this).closest("tr");bootbox.confirm("<h4> Are you sure to delete this photo request?<\/h4>",function(r){r&&i(n,function(){$(".status",t).html("Declined").css("color","red").css("font-weight","600")})})});$("#data-table-interest-receive-list").on("click",".accept",function(){var n=$(this).attr("id"),i=$(this).parent().closest("tr");bootbox.confirm("<h4> Are you sure to accept this invitation?<\/h4>",function(r){r&&t(n,function(){$(".status",i).html("Accepted").css("color","green").css("font-weight","600")})})})}]);app.factory("interestSendService",["$http",function(){}]);app.controller("InterestSendListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","interestSendService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/Interest/GetInterestList?type=Send",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].Id),r.push(t[i].ToUserId),r.push(t[i].FromToName),r.push(t[i].ActionDate),r.push(t[i].Status),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}n(function(n){$("#data-table-interest-send-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,bDestroy:!0,order:[[3,"desc"]],columns:[{title:"Id"},{title:"ToUserId"},{title:"Send To"},{title:"Date"},{title:"Status"},{title:"Action","class":"center"}],aoColumnDefs:[{aTargets:[0,1],visible:!1},{aTargets:[2],mRender:function(n,t,i){var r='<a target="_blank" href=/search/profile/?id='+i[1]+">"+i[2]+"<\/a>";return $("<div/>").append(r).html()}},{aTargets:[3],aType:"datetime-moment",sortable:!1,render:function(n){var t=moment(n).format("DD MMM YYYY h:mm a"),i=moment(n).format("DD MMM YYYY"),r='<span title="'+t+'">'+i+"<\/span>";return $("<div/>").append(r).html()}},{aTargets:[4],mRender:function(n,t,i){var r="";return r=i[4]==="accept"?'<span class="status request-accept">Accepted<\/span>':i[4]==="pending"?'<span class="status request-pending">Pending<\/span>':'<span class="status request-decline">Declined<\/span>',$("<div/>").append(r).html()}},{aTargets:[5],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<a target="_blank" href=/message/send?to='+i[1]+"&name="+i[2]+' class="btn btn-success">Send Message<\/a>';return $("<div/>").append(r).html()}}]})})}]);app.factory("messageDetailService",["$http",function(n){return{GetMessage:function(t){return n({url:"/Message/GetMessageDetails",method:"GET",params:{messageId:t}})},deleteMessage:function(t){return n({url:"/Message/DeleteMessage",method:"GET",params:{messageId:t}})}}}]);app.controller("MessageDetailCtrl",["$rootScope","$scope","$http","$filter","$location","$window","Enum","messageDetailService",function(n,t,i,r,u,f,e,o){function s(){var n=getParam("id");o.GetMessage(n).success(function(n){n.Body=n.Body.replace(/\n/g,"<br>");t.message=n}).error(function(){bootbox.alert("<h4>Error occured while getting this message details!<\/h4>",function(){})})}s();t.replyMessage=function(){var n=t.message.Id,i=t.message.FromUserId,r=t.message.FromToName;window.location.href="/message/send?to="+i+"&parentId="+n+"&name="+r+"&reply=y"};t.deleteMessage=function(){bootbox.confirm("<h3 class='text-danger'>Delete Message !<\/h3> <p class='text-danger'> Are you sure to delete this message?<\/p>",function(n){if(n){var t=getParam("id");o.deleteMessage(t).success(function(n){n&&n.IsSuccess&&bootbox.alert("Message has been deleted sucessfully",function(){})}).error(function(){bootbox.alert("Error occured while deleting message!",function(){})})}})}}]);app.factory("messageListService",["$http",function(){}]);app.controller("MessageListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","messageListService",function(){function n(n){var t=getParam("Type");$(".loader").show();$.ajax({dataType:"json",url:"/Message/GetMessageList",data:{messageType:t},success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].Id),r.push(t[i].FromUserId),r.push(t[i].ToUserId),r.push(t[i].FromToName),r.push(t[i].Body),r.push(t[i].MarkReadCss),r.push(t[i].CreateDate),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/Message/DeleteMessage",data:{messageId:n},success:function(n){n.IsSuccess?(bootbox.alert("Message has been deleted sucessfully",function(){}),t()):bootbox.alert("Failed to delete message!",function(){})},error:function(){bootbox.alert("Error occured while deleting message!",function(){})}})}$("#mobile-inbox-tab").addClass("mobile-view-tab-selected");$("#data-table-message-list").on("click",".deleteMsg",function(){var n=$(this).attr("id"),i=$(this).closest("tr");bootbox.confirm("<h3 >Delete Message!<\/h3> <br/><h5> Are you sure to delete this message?<\/h5>",function(r){r&&t(n,function(){$(i).remove()})})});n(function(n){var t=getParam("Type"),r=t==="Inbox"?"From":"Sent To",i=[0,1,2];t!=="Inbox"&&i.push(7);$("#data-table-message-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:50,bDestroy:!0,order:[],columns:[{title:"Id"},{title:"FromUserId"},{title:"ToUserId"},{title:r},{title:"Message"},{title:"Status","class":"center"},{title:"Date","class":"message-list-date-col-minwidth"},{title:"Reply","class":"center"},{title:"Delete","class":"center grid-delete-btn"}],aoColumnDefs:[{aTargets:i,visible:!1},{aTargets:[3],mRender:function(n,i,r){var u=t==="Inbox"?r[1]:r[2],f='<a target="_blank" href=/search/profile/?id='+u+">"+r[3]+"<\/a>";return $("<div/>").append(f).html()}},{aTargets:[4],mRender:function(n,t,i){var r='<div class="message-list-body-truncate"> <a href=/message/details/?id='+i[0]+' class="message-text">'+i[4]+"<\/a><\/div>";return $("<div/>").append(r).html()}},{aTargets:[5],mRender:function(n,t,i){var u=i[5],r;return u==="Seen"?(r='<span class="message-seen">Viewed<\/span>',$("<div/>").append(r).html()):(r='<span class="message-pending">Pending<\/span>',$("<div/>").append(r).html())}},{aTargets:[6],aType:"datetime-moment",sortable:!1,render:function(n){var t=moment(n).format("DD MMM YYYY h:mm a"),r=moment(n).format("DD MMM YYYY"),i='<span title="'+t+'">'+t+"<\/span>";return $("<div/>").append(i).html()}},{aTargets:[7],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<a class="btn btn-primary" href=/message/details/?id='+i[0]+">Reply<\/a>";return $("<div/>").append(r).html()}},{aTargets:[8],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<a title="Delete Message" id='+i[0]+' class="deleteMsg btn btn-danger">Delete<\/a>';return $("<div/>").append(r).html()}}]})})}]);app.factory("sendMessageService",["$http",function(n){return{sendMessage:function(t,i,r){var u=r?"/message/SendMessage?parentId="+i+"&isReply=true":"/message/SendMessage";return n({url:u,method:"POST",data:t})}}}]);app.controller("MessageCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","sendMessageService",function(n,t,i,r,u,f,e){function s(){$(".button-action-loading").show()}function o(){$(".button-action-loading").hide()}t.parentId=getParam("parentId");t.toUserId=getParam("to");t.toName=getParam("name");t.sendMessage=function(){var n={},i,r;n.ToUserId=t.toUserId;n.Body=t.message;i=getParam("reply")==="y"?!0:!1;r=t.parentId;s();e.sendMessage(n,r,i).success(function(n){o();n.isSuccess?bootbox.alert("<h5>Message has been send sucessfully<\/h5>",function(){window.location.href="/message/list?Type=Inbox"}):n.message!==""?bootbox.alert("<h5 class='center'>"+n.message+"<\/h5><div class='center' style='padding-top:20px; padding-bottom: 20px; '><a href='/Payment/MembershipPlan' class='bm-button'>View Membership Plans<\/a> <\/div>",function(){}):n.nidSubmitted?n.nidVerified?bootbox.alert("<h5>Failed to send message!<\/h5>",function(){}):bootbox.alert("<h5 class='center'>Your NID or Passport is under review now!<\/h5><div class='center' style='padding-top:20px; padding-bottom: 20px; '>Please wait a while to approve your NID or Passport<\/div>",function(){}):bootbox.alert("<h5 class='center'>Your identity is not verified yet!<\/h5><div class='center' style='padding-top:20px; padding-bottom: 20px; '>Send a message to others, you have to verify your identity. <a href='/verification/documents' target='_blank' >Click Here<\/a> to submit your NID or Passport scan copy<\/div>",function(){})}).error(function(){o();bootbox.alert("<h5>Error occured while sending the message!<\/h5>",function(){})})}}]);app.factory("myPageService",["$http",function(n){return{getMatches_Basic:function(){return n({url:"/MyPage/GetMatchs_Basic",method:"GET","async":!0})},getMatches_HomeDistrict:function(){return n({url:"/MyPage/GetMatches_HomeDistrict",method:"GET","async":!0})},getUserProfileCompletionStatus:function(){return n({url:"/Account/GetProfileCompletionStatus",method:"GET","async":!1,params:{}})},getVerificationStatus:function(){return n({url:"/Account/GetVerificationStatus",method:"GET","async":!1,params:{}})}}}]);app.controller("MyPageIndexCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","myPageService",function(n,t,i,r,u,f,e){function o(n){t.ageFrom=n.from;t.ageTo=n.to}function s(){$("#profile-completion-color").css("width","60%");$("#profile-completion-count").html("60%");$("#profile-incomplete-field").html('<span class="fill-up-caption">Profile Fill Up:<\/span> Done');e.getUserProfileCompletionStatus().success(function(n){if(n){$(".match-profile-loader").hide();var t=n.FilledPercentage,i=n.FilledStatus;$("#profile-completion-color").css("width",t+"%");$("#profile-completion-count").html(t+"%");$("#profile-completion-btnUpdate").attr("href","/Account/CreateProfile/?UserId="+n.UserId+"&Type=update");i&&$("#profile-incomplete-field").html('<span class="fill-up-caption">Please Fill Up:<\/span> '+i)}}).error(function(){})}function h(){e.getVerificationStatus().success(function(n){var i=n.userId,t="",r,u;n.isMobileVerify?(r=n.mobile,t="/security/verify_mobile?mobile="+r+"&userId="+i,$("#verify-warn").show(),$("#mobile-verify-warn").show(),$("#lnkVerifyMobile").attr("href",t)):n.isEmailVerify&&(u=n.email,t="/security/verify_email?email="+u+"&userId="+i,$("#verify-warn").show(),$("#email-verify-warn").show(),$("#lnkVerifyEmail").attr("href",t))}).error(function(){})}function c(){$.ajax({dataType:"json",url:"/Home/GetNotificationCount",type:"GET",success:function(n){var t,i;n&&(t=n.unreadMessageCount,t>0?($(".mypage-msg-alert-container").show(),i=t>1?"Messages":"Message",$("#newMessageCount").html("You have <b>("+n.unreadMessageCount+")<\/b> New "+i),$("#expressInterestCount").html("<b>("+n.newInterestCount+")<\/b> New Express Interests"),$("#photoRequestCount").html("<b>("+n.pendingPhotoRequestCount+")<\/b> New Photo Requests")):$(".mypage-msg-alert-container").hide())},error:function(){}})}function l(){$(".matches-basic-loader").show();e.getMatches_Basic().success(function(n){var t,i,r,u;for($(".matches-basic-loader").hide(),t=n.recordList,$("#mypage-matches_basic").html(""),i=0;i<t.length;i++)r=t[i].Education,r&&r.length>12&&(r=r.substring(0,12)+"..."),u=t[i].Age+" years, "+t[i].Height+" "+r,$("#mypage-matches_basic").append('<div class="grid-item"> <a style="text-decoration: none;" href="/search/profile?id='+t[i].UserId+'"> <div class="grid-item-image"> <img src="/Photos/Members/'+t[i].PhotoSize+"/"+t[i].ProfilePhoto+'" class="'+t.PhotoMask+'" style="border-radius: 50%; height:100px; width:100px; border:1px solid #ccc;" /> <\/div> <div class="grid-item-info"> <div class="center" style="font-weight:500;">'+t[i].ProfileId+'<\/div> <div class="center" style="font-size:13px;">'+u+'<\/div> <div class="center" style="font-size:13px; margin-top:5px;"><span class="grid-item-view-details mini-p-l-0 mini-p-r-0" style="color:royalblue; font-weight:500; border-radius:12px; border:1px solid yellowgreen; padding:6px; padding-left:10px; padding-right:10px;">View Details<\/span><\/div> <\/div> <\/a> <\/div> ');$("#mypage-matches_basic").slick({slidesToShow:4,slidesToScroll:1,arrows:!0,fade:!1,speed:300,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:300,settings:"unslick"}]})}).error(function(){$(".matches-basic-loader").hide()})}function a(){$(".matches-homeDistrict-loader").show();e.getMatches_HomeDistrict().success(function(n){var t,i,r,u;for($(".matches-homeDistrict-loader").hide(),t=n.recordList,$("#mypage-matches_homeDistrict").html(""),i=0;i<t.length;i++)r=t[i].Education,r&&r.length>12&&(r=r.substring(0,12)+"..."),u=t[i].Age+" years, "+t[i].Height+" "+r,$("#mypage-matches_homeDistrict").append('<div class="grid-item"> <a style="text-decoration: none;" href="/search/profile?id='+t[i].UserId+'"> <div class="grid-item-image"> <img src="/Photos/Members/'+t[i].PhotoSize+"/"+t[i].ProfilePhoto+'" class="'+t.PhotoMask+'" style="border-radius: 50%; height:100px; width:100px; border:1px solid #ccc;" /> <\/div> <div class="grid-item-info"> <div class="center" style="font-weight:500;">'+t[i].ProfileId+'<\/div> <div class="center" style="font-size:13px;">'+u+'<\/div> <div class="center" style="font-size:13px; margin-top:5px;"><span class="grid-item-view-details mini-p-l-0 mini-p-r-0" style="color:royalblue; font-weight:500; border-radius:12px; border:1px solid yellowgreen; padding:6px; padding-left:10px; padding-right:10px;">View Details<\/span><\/div> <\/div> <\/a> <\/div> ');$("#mypage-matches_homeDistrict").slick({slidesToShow:4,slidesToScroll:1,arrows:!0,fade:!1,speed:300,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:300,settings:"unslick"}]})}).error(function(){$(".matches-homeDistrict-loader").hide()})}t.ProfileCreatedBy="Self";t.ageFrom=20;t.ageTo=40;t.Religion="Muslim";t.MaritalStatus="UnMarried";t.GenderSearch=getOppositeGender();$("#ageRangeSlider").ionRangeSlider({skin:"round",type:"double",min:18,max:60,from:20,to:40,onFinish:o});c();s();h();l();a();t.search=function(){if(!t.GenderSearch){bootbox.alert("<h4>Please select gender!<\/h4>",function(){});return}window.location.href="/search/result?ageFrom="+t.ageFrom+"&ageTo="+t.ageTo+"&religion="+t.Religion+"&gender="+t.GenderSearch+"&maritalStatus="+t.MaritalStatus};t.matchViewAll=function(){window.location.href="/search/result?ageFrom="+t.matchCriteria.ageFrom+"&ageTo="+t.matchCriteria.ageTo+"&religion="+t.matchCriteria.religion+"&gender="+t.matchCriteria.gender+"&maritalStatus="+t.matchCriteria.maritalStatus}}]);$(document).ready(function(){function u(n,t){$("#choosenPlanName").html(n);$("#choosenPlanAmount").html(t)}var n="",i="",r=0,t="";n="Gold";i=4;r=3500;t="3500 Taka";u(n,t);$("#plan-silver").click(function(){$(".pricing-table").removeClass("selected-plan");$(this).parent().closest(".pricing-table").addClass("selected-plan");n="Silver";i=1;r=1e3;t="1000 Taka";u(n,t)});$("#plan-bronze").click(function(){$(".pricing-table").removeClass("selected-plan");$(this).parent().closest(".pricing-table").addClass("selected-plan");n="Bronze";i=3;r=2e3;t="2000 Taka";u(n,t)});$("#plan-gold").click(function(){$(".pricing-table").removeClass("selected-plan");$(this).parent().closest(".pricing-table").addClass("selected-plan");n="Gold";i=4;r=3500;t="3500 Taka";u(n,t)});$("#plan-diamond").click(function(){$(".pricing-table").removeClass("selected-plan");$(this).parent().closest(".pricing-table").addClass("selected-plan");n="Diamond";i=5;r=5500;t="5500 Taka";u(n,t)});$("#plan-platinum").click(function(){$(".pricing-table").removeClass("selected-plan");$(this).parent().closest(".pricing-table").addClass("selected-plan");n="Platinum";i=8;r=1e4;t="10000 Taka";u(n,t)});$("#payment-procced").click(function(){if(n===""||i===""){bootbox.alert("<h4>Please select a membership plan!",function(){});return}window.location.href="/Payment/PayAmount?planId="+i})});$(document).ready(function(){function u(n,t){f=!1;$("#couponPlanAmount").html("");$("#btnApplyCoupon").prop("disabled",!1);$(".coupon-free-member").hide();$("#choosenPlanName").html(n);$("#choosenPlanAmount").removeClass("cutt-price").html(t)}var n="",r="",i=0,t="",f=!1,e=getParam("planId");e?e==="11"?(n="Assistant - 3 Months",r=11,i=2e4,t="20,000 Taka",u(n,t)):e==="12"&&(n="Assistant - 6 Months",r=12,i=3e4,t="30,000 Taka",u(n,t)):(n="Gold",r=4,i=3500,t="3500 Taka",u(n,t));$("#plan-silver").click(function(){$(".pricing-table").removeClass("selected-plan");$(".pricing-table-assistant").removeClass("selected-plan");$(this).parent().closest(".pricing-table").addClass("selected-plan");n="Silver";r=1;i=300;t="300 Taka";u(n,t)});$("#plan-bronze").click(function(){$(".pricing-table").removeClass("selected-plan");$(".pricing-table-assistant").removeClass("selected-plan");$(this).parent().closest(".pricing-table").addClass("selected-plan");n="Bronze";r=3;i=2e3;t="2000 Taka";u(n,t)});$("#plan-gold").click(function(){$(".pricing-table").removeClass("selected-plan");$(".pricing-table-assistant").removeClass("selected-plan");$(this).parent().closest(".pricing-table").addClass("selected-plan");n="Gold";r=4;i=3500;t="3500 Taka";u(n,t)});$("#plan-diamond").click(function(){$(".pricing-table").removeClass("selected-plan");$(".pricing-table-assistant").removeClass("selected-plan");$(this).parent().closest(".pricing-table").addClass("selected-plan");n="Diamond";r=5;i=5e3;t="5000 Taka";u(n,t)});$("#plan-platinum").click(function(){$(".pricing-table").removeClass("selected-plan");$(".pricing-table-assistant").removeClass("selected-plan");$(this).parent().closest(".pricing-table").addClass("selected-plan");n="Platinum";r=8;i=7e3;t="7000 Taka";u(n,t)});$("#plan-assistant-3m").click(function(){$(".pricing-table").removeClass("selected-plan");$(".pricing-table-assistant").removeClass("selected-plan");$(this).parent().closest(".pricing-table-assistant").addClass("selected-plan");n="Assistant Service - 3 Months";r=11;i=2e4;t="20000 Taka";u(n,t)});$("#plan-assistant-6m").click(function(){$(".pricing-table").removeClass("selected-plan");$(".pricing-table-assistant").removeClass("selected-plan");$(this).parent().closest(".pricing-table-assistant").addClass("selected-plan");n="Assistant Service - 6 Months";r=12;i=3e4;t="30000 Taka";u(n,t)});$("#payment-procced").click(function(){if(n===""||r===""){bootbox.alert("<h4>Please select a membership plan!",function(){});return}var t="";f&&(t=$("#txtCoupon").val());window.location.href="/Payment/PayAmount?planId="+r+"&coupon="+t});$("#btnApplyCoupon").click(function(){if(!f){$("#loader-verify-coupon").show();var r=$("#txtCoupon").val();$.ajax({dataType:"json",url:"/Campaign/GetCoupon",data:{code:r},success:function(r){if($("#loader-verify-coupon").hide(),r.IsSuccess){if(r.Data.PercentageDiscount){var e=Math.floor(i*parseInt(r.Data.PercentageDiscount,10)/100);i=i-e;u(n,t);$("#btnApplyCoupon").prop("disabled",!0);$("#choosenPlanAmount").addClass("cutt-price");$("#couponPlanAmount").html(i+" Taka (coupon price)").show();parseInt(r.Data.PercentageDiscount,10)===100?$(".coupon-free-member").show():$(".coupon-free-member").hide();f=!0}}else bootbox.alert("<h4>"+r.Message+"<\/h4>",function(){})},error:function(){$("#loader-verify-coupon").hide();bootbox.alert("<h4>Error: Failed to get coupon!<\/h4>",function(){})}})}});$("#btnFreeCouponMember").click(function(){var n=$("#txtCoupon").val();$.ajax({dataType:"json",url:"/Payment/Make_Coupon_100Perc_Free_Membership",data:{coupon:n},success:function(n){n.IsSuccess?window.location.href="/Info/MembershipSuccess":n.Message==="login"?window.location.href="/security/login":bootbox.alert("<h4>Failed to get FREE membership. Please contact with bdmarriage.com<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error: Failed to get FREE membership. Please contact with bdmarriage.com<\/h4>",function(){})}})})});app.factory("photoService",["$http",function(n){return{savePhoto:function(t,i){return n.post("/Photo/SavePhoto?userId="+t,i,{withCredentials:!0,headers:{"Content-Type":undefined},transformRequest:angular.identity})},getPhotoList:function(t){return n({url:"/Photo/GetPhotoList?userId="+t,method:"GET",cache:!1})},getMyPhotoSetting:function(){return n({url:"/Account/GetMyPhotoSetting",method:"GET",cache:!1})},savePhotoSetting:function(t){return n({url:"/Photo/SetPhotoSettings?value="+t,method:"POST",cache:!1})},setProfilePhoto:function(t){return n({url:"/Photo/SetProfilePhoto?photoId="+t,method:"POST",data:{}})},deletePhoto:function(t){return n({url:"/Photo/DeletePhoto?photoId="+t,method:"POST",data:{}})}}}]);app.controller("photoCtrl",["$rootScope","$scope","$http","$window","$filter","$location","Enum","photoService",function(n,t,i,r,u,f,e,o){function s(){var n=getParam("UserId");$(".photo-loader").show();o.getPhotoList(n).success(function(n){t.photoList=n;n.length>0?$(".div-my-photo-container").show():$(".div-my-photo-notfound").show();$(".photo-loader").hide()}).error(function(){$(".photo-loader").hide()})}function l(){o.getMyPhotoSetting().success(function(n){var t=n.replace('"',"").replace('"',"");switch(t){case"view_all":$("#rbViewAll").prop("checked",!0);break;case"view_premiums":$("#rbViewPremiums").prop("checked",!0);break;case"view_liked":$("#rbViewLiked").prop("checked",!0)}}).error(function(){})}function a(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(n){$("#imgTemp").attr("src",n.target.result)};t.readAsDataURL(n.files[0]);$("#divSavePhoto").show()}}var c=getParam("fromReg"),h;c==="yes"?($("#statusMsg").show(),$("#btnActionButton-Container").show(),$("#btnMyBdmarriage").hide()):($("#btnMyBdmarriage").show(),$("#btnActionButton-Container").hide());t.IsFileValid=!1;s();l();t.saveSettings=function(){var n=$("input[type='radio']:checked").val();o.savePhotoSetting(n).success(function(){bootbox.alert("<h4>Photo settings has been saved successfully<\/h4>",function(){})}).error(function(){bootbox.alert("<h4>Failed to save photo settings<\/h4>",function(){})})};t.selectPhoto=function(n){t.memberPhoto=n[0]};t.setProfilePhoto=function(n){o.setProfilePhoto(n).success(function(){bootbox.alert("<h4>Your profile photo has been set successfully<\/h4>",function(){});s()}).error(function(){bootbox.alert("<h4>Failed to set profile photo<\/h4>",function(){})})};t.deletePhoto=function(n){bootbox.confirm("<h4>Are you sure, you want to delete this photo?<\/h4>",function(t){t&&o.deletePhoto(n).success(function(n){n.IsSuccess?s():bootbox.alert("<h4>Failed to delete this photo<\/h4>",function(){})}).error(function(){bootbox.alert("<h4>Error occured while deleting this photo<\/h4>",function(){})})})};t.uploadPhoto=function(){if(t.submitted=!0,t.myForm.$invalid)return!1;h()};h=function(){var i=t.memberPhoto,r,n;if(t.CheckFile(i),!t.IsFileValid)return!1;r=getParam("UserId");n=new FormData;n.append("file",i);$(".loader").show();$("#divSavePhoto").hide();o.savePhoto(r,n).success(function(n){n.isSuccess?(bootbox.alert("<h4>Photo saved successfully<\/h4>",function(){}),s(),$("#imgTemp").attr("src","/Images/user-privacy.gif"),$("#divSavePhoto").hide()):bootbox.alert("<h4>"+n.message+"<\/h4>",function(){});$(".loader").hide()}).error(function(){$(".loader").hide();bootbox.alert("<h4>Error while saving your photo!<\/h4>",function(){})})};t.CheckFile=function(n){t.IsFileValid=!1;n!=null?(n.type=="image/png"||n.type=="image/jpeg")&&n.size<=10485760?(t.FileInvalidMessage="",t.IsFileValid=!0):bootbox.alert("<h4>Sorry Invalid file selected! <br />(Allowed only png and jpeg format, Photo Size: 10 MB Maximum)<\/h4>",function(){}):bootbox.alert("<h4>Photo is required!<\/h4>",function(){})};$("#inputFile").change(function(){a(this)});$("#btnPhotoCancel").click(function(){$("#imgTemp").attr("src","/Images/user-privacy.gif");$("#divSavePhoto").hide()})}]);app.factory("manageDocService",["$http",function(n){return{savePhoto:function(t,i){return n.post("/Verification/SavePhoto?type="+t,i,{withCredentials:!0,headers:{"Content-Type":undefined},transformRequest:angular.identity})},getPhotoList:function(){return n({url:"/Verification/GetPhotoList",method:"GET",cache:!1})},deletePhoto:function(t){return n({url:"/Verification/DeletePhoto?photoId="+t,method:"POST",data:{}})}}}]);app.controller("verificationDocsCtrl",["$rootScope","$scope","$http","$window","$filter","$location","Enum","manageDocService",function(n,t,i,r,u,f,e,o){function s(){o.getPhotoList().success(function(n){t.photoList=n;n.length>0&&$(".div-my-photo-container").show()}).error(function(){})}function l(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(n){$("#imgTemp").attr("src",n.target.result)};t.readAsDataURL(n.files[0]);$("#tblPhotoPreview").show();$("#divSavePhoto").show()}}var h,c;t.IsFileValid=!1;h=getParam("fromReg");h==="yes"?($("#btnActionButton-Container").show(),$("#registration-steps").show(),$("#btnMyBdmarriage").hide()):($("#btnMyBdmarriage").show(),$("#registration-steps").hide(),$("#btnActionButton-Container").hide());s();t.selectPhoto=function(n){t.memberPhoto=n[0]};t.deletePhoto=function(n){bootbox.confirm("<h4>Are you sure, you want to delete this file?<\/h4>",function(t){t&&o.deletePhoto(n).success(function(n){n.IsSuccess?s():n.Message?bootbox.alert("<h4>"+n.Message+"<\/h4>",function(){}):bootbox.alert("<h4>Failed to delete this photo!<\/h4>",function(){})}).error(function(){bootbox.alert("<h4>Error occured while deleting this file<\/h4>",function(){})})})};t.uploadPhoto=function(){if(t.submitted=!0,t.myForm.$invalid)return!1;c()};c=function(){var i=t.memberPhoto,n,r;if(t.CheckFile(i),!t.IsFileValid)return!1;n=new FormData;n.append("file",i);r="Identity";o.savePhoto(r,n).success(function(n){n.IsSuccess?(window.isSaveFile=!0,bootbox.alert("<h4>File saved successfully<\/h4>",function(){}),s(),$("#imgTemp").attr("src","/Images/blank-photo.png"),$("#tblPhotoPreview").hide(),$("#divSavePhoto").hide()):bootbox.alert("<h4>"+n.Message+"<\/h4>",function(){})}).error(function(){bootbox.alert("<h4>Error while saving your file!<\/h4>",function(){})})};t.CheckFile=function(n){t.IsFileValid=!1;n!=null?(n.type=="image/png"||n.type=="image/jpeg")&&n.size<=10485760?(t.FileInvalidMessage="",t.IsFileValid=!0):bootbox.alert("<h4>Sorry Invalid file selected! <br />(Allowed only png and jpeg format, Photo Size: 10 MB Maximum)<\/h4>",function(){}):bootbox.alert("<h4>File is required!<\/h4>",function(){})};$("#inputNidFile").change(function(){l(this)});$("#btnPhotoCancel").click(function(){$("#imgTemp").attr("src","/Images/blank-photo.png");$("#divSavePhoto").hide()});$("#btnContinue").click(function(){if(window.isSaveFile){var n=getParam("partnerGender");window.location.href="/Account/PartnerPreference?partnerGender="+n}else bootbox.alert("<h4>Please upload your NID or Passport!<\/h4>",function(){})});$("#btnSkip").click(function(){var n=getParam("partnerGender");window.location.href="/Account/PartnerPreference?partnerGender="+n})}]);app.factory("photoPermissionListService",["$http",function(){}]);app.controller("PhotoPermissionListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","photoPermissionListService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/PhotoPermission/GetPhotoPermissionList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].Id),r.push(t[i].FromUserId),r.push(t[i].FromName),r.push(t[i].IsAllow),r.push(t[i].CreateDate),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/PhotoPermission/DeletePhotoPermission",data:{photoPermissionId:n},success:function(n){n.IsSuccess?(bootbox.alert("Photo request has been deleted sucessfully",function(){}),t()):bootbox.alert("Failed to delete photo request!",function(){})},error:function(){bootbox.alert("Error occured while deleting photo request!",function(){})}})}function i(n,t){$.ajax({dataType:"json",url:"/PhotoPermission/AllowPhotoPermission",data:{photoPermissionId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>Photo request has been permitted successfully<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to delete photo permission!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting photo permission!<\/h4>",function(){})}})}$("#data-table-photo-request-list").on("click",".deleteRecord",function(){var n=$(this).attr("id"),i=$(this).closest("tr");bootbox.confirm("<h4> Are you sure to delete this photo request?<\/h4>",function(r){r&&t(n,function(){$(i).remove()})})});$("#data-table-photo-request-list").on("click",".allowPhotoView",function(){var n=$(this).attr("id"),t=$(this).parent().closest("tr");bootbox.confirm("<h4> Are you allow to show your photo to this user?<\/h4>",function(r){r&&i(n,function(){$(".allow-photo",t).html("Allowed").css("color","green").css("font-weight","600")})})});n(function(n){$("#data-table-photo-request-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,bDestroy:!0,columns:[{title:"Id"},{title:"FromUserId"},{title:"From"},{title:"Allow View Photo","class":"center"},{title:"Date"},{title:"Allow","class":"center"},{title:"Delete","class":"center"}],aoColumnDefs:[{aTargets:[0,1],visible:!1},{aTargets:[2],mRender:function(n,t,i){var r='<a target="_blank" href=/search/profile?id='+i[1]+">"+i[2]+"<\/a>";return $("<div/>").append(r).html()}},{aTargets:[3],mRender:function(n,t,i){var r="";return r=i[3]?'<span class="allow-photo" style="font-weight: 600; color:green;">Allowed<\/span>':'<span class="allow-photo" style="font-weight: 600; color:red;">Pending<\/span>',$("<div/>").append(r).html()}},{aTargets:[5],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button type="submit" id='+i[0]+' class="btn btn-primary allowPhotoView">Allow<\/button>';return $("<div/>").append(r).html()}},{aTargets:[6],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button type="submit" id='+i[0]+' class="btn btn-danger deleteRecord" style="color:#fff;">Delete<\/button>';return $("<div/>").append(r).html()}}]})})}]);app.factory("favoriteListService",["$http",function(){}]);app.controller("FavoriteListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","favoriteListService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/Account/GetFavoriteList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].Id),r.push(t[i].FavoriteUserId),r.push(t[i].FavoriteUserName),r.push(t[i].ActionDate),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/Account/DeleteFavoriteUser",data:{id:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>Record has been deleted sucessfully<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to delete this record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting favorite user!<\/h4>",function(){})}})}$("#data-table-favorite-list").on("click",".deleteRecord",function(){var n=$(this).attr("id"),i=$(this).closest("tr");bootbox.confirm("<h4> Are you sure to delete from favorite list?<\/h4>",function(r){r&&t(n,function(){$(i).remove()})})});n(function(n){$("#data-table-favorite-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,bDestroy:!0,columns:[{title:"Id"},{title:"FavoriteUserId"},{title:"Name"},{title:"Date"},{title:"Delete","class":"center"}],aoColumnDefs:[{aTargets:[0,1],visible:!1},{aTargets:[2],mRender:function(n,t,i){var r='<a target="_blank" href=/search/profile/?id='+i[1]+">"+i[2]+"<\/a>";return $("<div/>").append(r).html()}},{aTargets:[3],aType:"datetime-moment",sortable:!1,render:function(n){var t=moment(n).format("DD MMM YYYY h:mm a"),i=moment(n).format("DD MMM YYYY"),r='<span title="'+t+'">'+i+"<\/span>";return $("<div/>").append(r).html()}},{aTargets:[4],searchable:!1,sortable:!1,mRender:function(n,t,i){var r="<span id="+i[0]+' class="fa fa-times cursor-pointer deleteRecord"><\/span>';return $("<div/>").append(r).html()}}]})})}]);app.factory("advanceSearchService",["$http",function(n){return{searchResult:function(t){return n({url:"/Search/SearchResult",method:"POST",data:t})},getHomeDistrictList:function(){return n.get("/Setup/GetHomeDistrictList")},getProfessionList:function(){return n.get("/Setup/GetProfessionParentList")},getCountryList:function(){return n.get("/Setup/GetCountryListForSearch")},getUserIdByProfileId:function(t){return n({url:"/Account/GetUserIdByProfileId",method:"GET","async":!1,params:{profileId:t}})}}}]);app.controller("AdvanceSearchCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","advanceSearchService",function(n,t,i,r,u,f,e){function o(){e.getHomeDistrictList().success(function(n){t.homeDistrictList=n;setTimeout(function(){$("#ddlHomeDistrict").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0})},100)}).error(function(){})}function s(){e.getProfessionList().success(function(n){t.professionList=n;setTimeout(function(){$("#ddlProfession").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0})},100)}).error(function(){})}function h(){e.getCountryList().success(function(n){t.countryList=n;setTimeout(function(){$("#ddlCountryLivingIn").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0})},100)}).error(function(){})}setAppTitle("Search Profile");$("#mobile-search-tab").addClass("mobile-view-tab-selected");t.ageFrom="";t.ageTo="";t.heightFrom="";t.heightTo="";t.gender=getOppositeGender();t.religion=getMyReligion();o();s();h();t.GenderSearch==="male"?(t.ageFrom=24,t.ageTo=40,t.heightFrom="4ft 5in",t.heightTo="6ft 5in"):(t.ageFrom=18,t.ageTo=35,t.heightFrom="4ft 5in",t.heightTo="6ft 5in");$("#ddlMaritalStatus").multiselect({includeSelectAllOption:!0,nonSelectedText:"Please Select",buttonWidth:"250px",dropRight:!0});$("#ddlBodyType").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});$("#ddlComplexion").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});$("#ddlProfileCreatedBy").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});$("#ddlEducation").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});$("#ddlWorkingSector").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});t.SearchByProfileId=function(){e.getUserIdByProfileId(t.profileId).success(function(n){n.userId?window.open("/search/profile/?id="+n.userId):bootbox.alert("<h4>Profile not found!<\/h4>",function(){})}).error(function(){})};t.AdvanceSearch=function(){var e="",n="",o="",s="",i="",r="",u="",f="",w=$("#ddlMaritalStatus option:selected"),h,c,l,a,v,y,p;w.each(function(){e+=$(this).val()+","});e=e?e.slice(0,-1):e;h=$("#ddlHomeDistrict option:selected");h.each(function(){n+=$(this).val()+","});$(".multiselect-selected-text",$("#ddlHomeDistrict").parent()).html().indexOf("All selected")>=0&&(n="");n=n?n.slice(0,-1):n;c=$("#ddlBodyType option:selected");c.each(function(){o+=$(this).val()+","});o=o?o.slice(0,-1):o;l=$("#ddlComplexion option:selected");l.each(function(){s+=$(this).val()+","});s=s?s.slice(0,-1):s;a=$("#ddlCountryLivingIn option:selected");a.each(function(){i+=$(this).val()+","});$(".multiselect-selected-text",$("#ddlCountryLivingIn").parent()).html().indexOf("All selected")>=0&&(i="");i=i?i.slice(0,-1):i;v=$("#ddlEducation option:selected");v.each(function(){r+=$(this).val()+","});$(".multiselect-selected-text",$("#ddlEducation").parent()).html().indexOf("All selected")>=0&&(r="");r=r?r.slice(0,-1):r;y=$("#ddlProfession option:selected");y.each(function(){u+=$(this).val()+","});$(".multiselect-selected-text",$("#ddlProfession").parent()).html().indexOf("All selected")>=0&&(u="");u=u?u.slice(0,-1):u;p=$("#ddlWorkingSector option:selected");p.each(function(){f+=$(this).val()+","});$(".multiselect-selected-text",$("#ddlWorkingSector").parent()).html().indexOf("All selected")>=0&&(f="");f=f?f.slice(0,-1):f;window.location.href="/search/result?ageFrom="+t.ageFrom+"&ageTo="+t.ageTo+"&heightFrom="+t.heightFrom+"&heightTo="+t.heightTo+"&religion="+t.religion+"&gender="+t.gender+"&maritalStatus="+e+"&homeDistrict="+n+"&education="+r+"&profession="+u+"&livingCountry="+i+"&workingSector="+f}}]);app.factory("profileDetailService",["$http",function(n){return{getUserProfile:function(t){return n({url:"/Account/GetUserProfile",method:"GET","async":!1,params:{userId:t}})},getAgency:function(t){return n({url:"/Agency/GetAgency",method:"GET","async":!1,params:{id:t}})},sendInterest:function(t){return n({url:"/Interest/SendInterest",method:"POST",data:t})},saveFavoriteUser:function(t){return n({url:"/Account/SaveFavoriteUser?favoriteUserId="+t,method:"POST",data:{}})},sendPhotoRequest:function(t){return n({url:"/PhotoPermission/SendPhotoPermission",method:"POST",data:t})},updateAboutMe:function(t,i){return n({url:"/Account/UpdateAboutMe",method:"POST",params:{userId:t,aboutMe:i}})}}}]);app.controller("ProfileDetailCtrl",["$rootScope","$scope","$http","$filter","$location","$compile","Enum","profileDetailService",function(n,t,i,r,u,f,e,o){function l(n){t.ageFrom=n.from;t.ageTo=n.to}function a(){var n=!1,t=$.cookie("ckIsPaidMember");return t&&t==="true"&&(n=!0),n}function s(n){bootbox.alert("<h4 class='alert-msg profile-{{profile.Id}}'>This profile comes from a marriage agency. Please contact with the agency below:<\/h4><br/><span class='agency-profile-id'><\/span><br/><span class='agency-name'><\/span><br/><span class='agency-mobile'><\/span><br/><span class='agency-view-details' style='padding:10px; font-size:15px; display:none;'><br/><a target='_blank' href='/Payment/MembershipPlan'>Upgrade your membership<\/a> to view details<\/span>",function(){});o.getAgency(n.AgencyId).success(function(t){var i=n.ProfileId,r=t.Name,u=t.Phone;a()||(i="XXXXXX",r="XXXXXX",u="XXXXXX",$(".agency-view-details").show());$(".agency-profile-id").html("<b>Profile Id:<\/b> "+i);$(".agency-name").html("<b>Marriage Agency:<\/b> "+r);$(".agency-mobile").html("<b>Contact Number:<\/b> "+u)}).error(function(){})}function v(){var n=getChatUserInfo(getParam("id"));if(n.isOffline){bootbox.alert("<h4>Member Disconnects!<\/h4>",function(){});return}OpenPrivateChatWindow(n.connectionId,n.chatUserName)}function y(n){o.getUserProfile(n).success(function(n){var f,i,r,u;t.userProfile=n;$("#user-age").html(n.Age+" Years");$("#user-age1").html(n.Age+" Years");t.Rank=n.Rank;t.IsHidden=n.IsHidden;t.isAgeMatch=n.PartnerPreference.IsAgeMatch;t.isHeightMatch=n.PartnerPreference.IsHeightMatch;t.isMaritalStatusMatch=n.PartnerPreference.IsMaritalStatusMatch;t.isEducationMatch=n.PartnerPreference.IsEducationMatch;t.isProfessionMatch=n.PartnerPreference.IsProfessionMatch;t.isWorkingSectorMatch=n.PartnerPreference.IsWorkingSectorMatch;t.isComplexionMatch=n.PartnerPreference.IsComplexionMatch;f=7;i=0;n.PartnerPreference.IsAgeMatch&&i++;n.PartnerPreference.IsHeightMatch&&i++;n.PartnerPreference.IsMaritalStatusMatch&&i++;n.PartnerPreference.IsEducationMatch&&i++;n.PartnerPreference.IsProfessionMatch&&i++;n.PartnerPreference.IsComplexionMatch&&i++;n.PartnerPreference.IsWorkingSectorMatch&&i++;$("#match-count").html(i+" of "+f+" Matching");$("#photo-album").html(h(n,n.PhotoList));n.IsMobileVerified?$("#imgPhoneVerified").show():$("#imgPhoneVerified").hide();n.IsIdentityVerified?$("#imgNidVerified").show():$("#imgNidVerified").hide();r=!1;u=$.cookie("ckIsPaidMember");u&&u==="true"&&(r=!0);r?($(".lockView").hide(),$(".unlockView").show()):($(".lockView").show(),$(".unlockView").hide());n.PhysicalAttributeDetails&&n.PhysicalAttributeDetails!=="Tell you later"||$("#liPhysicalAttr").hide();n.ProfessionDetails&&n.ProfessionDetails!=="Tell you later"||$("#liProfessionalDetails").hide();n.EducationDetails&&n.EducationDetails!=="Tell you later"||$("#liEducationDetails").hide();n.FamilyDetails&&n.FamilyDetails!=="Tell you later"||$("#liFamilyDetails").hide()}).error(function(){bootbox.alert("<h4>Profile information not found!<h4>",function(){})})}function h(n,t){var i,u,f,e;if(t.length>0){var r='<div class="thumbs">';for(i=0;i<t.length;i++)u=t[i],r+='<div class="album-preview"> <a href="#" data-full="/photos/members/'+n.PhotoSize+"/"+u.PhotoName+'" data-title="photo"> <img src="/photos/members/s25634/'+u.PhotoName+'" /> <\/a> <\/div>';return r+="<\/div>",f='<a href="/photos/members/'+n.PhotoSize+"/"+t[0].PhotoName+'" class="full" title="Photo"><img src="/photos/members/'+n.PhotoSize+"/"+t[0].PhotoName+'"><\/a>',e='<div class="gallery clearfix"><div class="pics clearfix">'+r+f+"<\/div><\/div>",e}return""}t.ProfileCreatedBy="Self";t.GenderSearch=getOppositeGender();t.ageFrom=20;t.ageTo=40;t.Religion="Muslim";t.MaritalStatus="UnMarried";var c=getParam("id");y(c);$("#ageRangeSlider").ionRangeSlider({skin:"round",type:"double",min:18,max:60,from:20,to:58,onFinish:l});setTimeout(function(){var n=getChatUserInfo(getParam("id"));n&&(n.isOffline?$(".user-chat-status").hide():$(".user-chat-status").show())},500);t.getGenderIcon=function(n){return n==="male"?"icon-male":"icon-female"};t.himOrHerIcon=function(n){return n==="male"?"icon-user-1":"icon-female"};t.himOrHerText=function(n){return n==="male"?"Him":"Her"};t.heOrSheText=function(n){return n==="male"?"He":"She"};t.hisOrHerText=function(n){return n==="male"?"His":"Her"};t.sendInterest=function(){if(t.userProfile.IsAgencyProfile){s(t.userProfile);return}var n=getUserStatus();if(n.isLoggedIn){if(!n.isVerified){bootbox.alert("<h4 class='alert-msg'>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}}else{window.location.href="/security/login";return}bootbox.confirm("<h4 class='alert-msg'>Are you sure to express your interest to this user?<\/h4>",function(n){if(n){var i={};i.ToUserId=t.userProfile.UserId;o.sendInterest(i).success(function(n){n.isSuccess?bootbox.alert("<h4 class='alert-msg'>Your interest has been send successfully to this user<\/h4>",function(){}):n.message?bootbox.alert('<h4 class="alert-msg">'+n.message+"<\/h4>",function(){}):bootbox.alert("<h4 class='alert-msg'>Failed to send your interest<\/h4>",function(){})}).error(function(){bootbox.alert("<h4 class='alert-msg'>Error occured while sending your interest!<\/h4>",function(){})})}})};t.sendMessage=function(){var n,i,r;if(t.userProfile.IsAgencyProfile){s(t.userProfile);return}if(n=getUserStatus(),n.isLoggedIn){if(!n.isVerified){bootbox.alert("<h4 class='alert-msg'>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}}else{window.location.href="/security/login";return}i=t.userProfile.UserId;r=t.userProfile.Name;window.location.href="/message/send?to="+i+"&name="+r};t.saveFavoriteUser=function(){var i=t.userProfile.UserId,n=getUserStatus();if(n.isLoggedIn){if(!n.isVerified){bootbox.alert("<h4>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}}else{$("#loginModal").modal();return}o.saveFavoriteUser(i).success(function(n){n.isSuccess?bootbox.alert("<h4>Profile is added to your favorite list successfully!<\/h4>",function(){}):n.message&&bootbox.alert("<h4>"+n.message+"<\/h4>",function(){})}).error(function(){})};t.updateAboutMe=function(){var n=t.userProfile.UserId,i=$("#adminAboutMe").val();o.updateAboutMe(n,i).success(function(n){n.isSuccess?bootbox.alert("<h4 class='alert-msg'>AboutMe has been updated successfully!<\/h4>",function(){}):bootbox.alert("<h4 class='alert-msg'>Failed to update about me!<\/h4>",function(){})}).error(function(){bootbox.alert("<h4 class='alert-msg'>Error occured while updating about me!<\/h4>",function(){})})};t.viewAlbum=function(){t.userProfile.PhotoMaskLabel!==""?bootbox.alert("<h4>"+t.userProfile.PhotoMaskLabel+"<\/h4>",function(){}):bootbox.dialog({title:"",size:"large",className:"album-box",message:$("#photo-album").html(),buttons:{}})};t.sendPhotoRequest=function(n){var i={},t;if(i.ToUserId=n.UserId,t=getUserStatus(),t.isLoggedIn){if(!t.isVerified){bootbox.alert("<h4 class='alert-msg'>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}}else{window.location.href="/security/login";return}o.sendPhotoRequest(i).success(function(n){n.isSuccess?bootbox.alert("<h4 class='alert-msg'>You photo request has been send seccessfully!<\/h4>",function(){}):n.message?bootbox.alert("<h4 class='alert-msg'>"+n.message+"<\/h4>",function(){}):bootbox.alert("<h4 class='alert-msg'>Failed to send photo request!<\/h4>",function(){})}).error(function(){bootbox.alert("Error to send photo request!",function(){})})};t.search=function(){window.location.href="/search/result?ageFrom="+t.ageFrom+"&ageTo="+t.ageTo+"&religion="+t.Religion+"&gender="+t.GenderSearch+"&maritalStatus="+t.MaritalStatus};t.openChat=function(){var i=getUserStatus(),n,t;if(i.isLoggedIn){if(!i.isVerified){bootbox.alert("<h4 class='alert-msg'>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}}else{$("#loginModal").modal();return}n=!1;t=$.cookie("ckIsPaidMember");t&&t==="true"&&(n=!0);n?v():bootbox.alert("<div style='text-align:center;'><h4 class='alert-msg'>Only paid members are allowed to chat!<br/><br/><a href='/Payment/MembershipPlan' class='bm-button' style='font-size:13px;'>View Membership Plans<\/a><\/h4><\/div>",function(){})};$(document).on("click",".album-preview a",function(){$(".preview-selected").removeClass("preview-selected");$(this).parent().addClass("preview-selected");var n=$(this).data();event.preventDefault();$(".full img").fadeOut(100,function(){$(".full img").attr("src",n.full);$(".full").attr("href",n.full);$(".full").attr("title",n.title)}).fadeIn()})}]);$(document).ready(function(){function t(n,t){$.ajax({dataType:"json",url:"/Admin/DeleteUser",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting user!<\/h4>",function(){})}})}function n(n,t,i,r,u){if(!u){bootbox.alert("<h4>Please Set the Rank!<\/h4>",function(){});return}var f=!1;if($("#ckbIsHidden").is(":checked")&&(f=!0),f&&u<6){bootbox.alert("<h4>Only VIP / Rank 6 profiles can be hidden!<\/h4>",function(){});return}$(".profile-approve-loader").show();$.ajax({dataType:"json",url:"/Account/ApproveUser_UpdateAboutMe",data:{userId:n,aboutMe:t,isFeatured:i,isMobileValidate:r,rank:u,isHidden:f},success:function(n){n.IsSuccess?($(".profile-approve-loader").hide(),window.close()):bootbox.alert("<h4>Failed to approve user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while approving user!<\/h4>",function(){})}})}function i(n,t){$.ajax({dataType:"json",url:"/Admin/BlockUser",data:{userId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>User has been blocked sucessfully<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to block user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while block user!<\/h4>",function(){})}})}$(window).width()<768&&($("#btnSendMessage").html("Send Message"),$("#btnSendInterest").html("Like"),$("#btnFavorite").html("Favorite"));$("#btnBlockUser").click(function(){var n=getParam("id");bootbox.confirm("<h4>Are you sure to block this profile?<\/h4>",function(t){t&&i(n,function(){})})});$("#btnSendEmail").click(function(){var n=$("#email").val(),t=$("#emailSubject").val(),i=$("#emailBody").val();bootbox.confirm("<h3>Are you sure to send this message?<\/h3>",function(r){r&&($(".modal-loader").show(),$.ajax({dataType:"json",url:"/Notification/SendEmail",data:{sendTo:"updaterequest",specificEmailList:n,subject:t,message:i,lastLoginDay:0},success:function(){bootbox.alert("<h4>Message send successfully<\/h4>",function(){});$(".modal-loader").hide();callback(dataSet)},error:function(){$(".modal-loader").hide();bootbox.alert("<h4>Failed to send message<\/h4>",function(){})}}))})});$(".deleteProfile").click(function(){var n=getParam("id");t(n,function(){window.close()})});$(".verifyProfile").click(function(){var t=$("input[name='Rank']:checked").val(),i=getParam("id"),r=$("#adminAboutMe").val(),u=$(this).closest("tr");n(i,r,!1,!1,t)});$(".verifyProfile_Featured").click(function(){var t=$("input[name='Rank']:checked").val(),i=getParam("id"),r=$("#adminAboutMe").val(),u=$(this).closest("tr");n(i,r,!0,!1,t)});$(".verifyProfile_MobileValidate").click(function(){var t=$("input[name='Rank']:checked").val(),i=getParam("id"),r=$("#adminAboutMe").val(),u=$(this).closest("tr");n(i,r,!1,!0,t)});$(".sendMessage").click(function(){var t=getParam("id"),n=getParam("email");$("#email").val(n);window.userId=t;window.email=n;$("#notifyModal").modal()})});$(document).ready(function(){function n(n){n?($(".logging").show(),$("#email").attr("disabled","disabled"),$("#password").attr("disabled","disabled"),$("#loginBtn").attr("disabled","disabled"),$(".message").removeClass("error-message")):($(".logging").hide(),$("#email").removeAttr("disabled"),$("#password").removeAttr("disabled"),$("#loginBtn").removeAttr("disabled"))}var t,i,r,u,f,e,o,s,h;$(window).width()<768&&(t=$(".gender-filter"),$(".gender-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"),t.hide(),i=$(".age-filter"),$(".age-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"),i.hide(),r=$(".livingcountry-filter"),$(".livingcountry-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"),r.hide(),u=$(".homedistrict-filter"),$(".homedistrict-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"),u.hide(),f=$(".profession-filter"),$(".profession-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"),f.slideToggle(),e=$(".education-filter"),$(".education-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"),e.slideToggle(),o=$(".height-filter"),$(".height-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"),o.hide(),s=$(".workingSector-filter"),$(".workingSector-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"),s.slideToggle(),h=$(".profileid-filter"),$(".profileid-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"),h.slideToggle());$("#password").keyup(function(n){n.keyCode==13&&$(".login").click()});$(".search-page-login").click(function(){var i=window.location.pathname+document.location.search,t={},r;t.Username=$("#email").val();t.Password=$("#password").val();t.RememberMe=!0;t.ReturnUrl=i;n(!0);r=getParam("ReturnUrl");$.ajax({dataType:"json",contentType:"application/json",url:"/Security/Login",type:"POST",data:JSON.stringify(t),success:function(t){n(!1);t.isSuccess?window.location.href=t.redirectUrl:$(".message").addClass("login-error").html(t.message)},error:function(){$(".message").addClass("login-error").html("Operation Failed!");n(!1)}})})});app.factory("searchResultService",["$http",function(n){return{searchResult:function(t){return n({url:"/Search/SearchResult",method:"POST",data:t})},sendPhotoRequest:function(t){return n({url:"/PhotoPermission/SendPhotoPermission",method:"POST",data:t})},sendInterest:function(t){return n({url:"/Interest/SendInterest",method:"POST",data:t})},saveFavoriteUser:function(t){return n({url:"/Account/SaveFavoriteUser?favoriteUserId="+t,method:"POST",data:{}})},sendMessage:function(t){return n({url:"/Message/SendMessage",method:"POST",data:t})},getUserProfile:function(t){return n({url:"/Account/GetUserProfile",method:"GET","async":!1,params:{UserId:t}})},getAgency:function(t){return n({url:"/Agency/GetAgency",method:"GET","async":!1,params:{id:t}})},getUserIdByProfileId:function(t){return n({url:"/Account/GetUserIdByProfileId",method:"GET","async":!1,params:{profileId:t}})},getHomeDistrictList:function(){return n.get("/Setup/GetHomeDistrictList")},getEducationList:function(){return n.get("/Setup/GetEducationList")},getProfessionList:function(){return n.get("/Setup/GetProfessionParentList")},getCountryList:function(){return n.get("/Setup/GetCountryListForSearch")},getWorkingSectorList:function(){return n.get("/Setup/GetWorkingSectorList")}}}]);app.controller("SearchCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","searchResultService",function(n,t,i,r,u,f,e){function ot(n){var i=n.from,r=n.to;t.ageFrom=i;t.ageTo=r;t.refineSearch()}function l(n,i){var f,u,r,n;i=i.replace(/\'/g,"");f=i?i.split(","):"";switch(n){case"education":for(u=0;u<f.length;u++)for(r=0;r<t.educationList.length;r++)if(n=t.educationList[r],n.Value.toLowerCase()===f[u].toLowerCase()){t.educationList[r].IsChecked=!0;break}f&&(t.isEducationAllChecked=!1);break;case"profession":for(u=0;u<f.length;u++)for(r=0;r<t.professionList.length;r++)if(n=t.professionList[r],n.Value.toLowerCase()===f[u].toLowerCase()){t.professionList[r].IsChecked=!0;break}f&&(t.isProfessionAllChecked=!1);break;case"homeDistrict":for(u=0;u<f.length;u++)for(r=0;r<t.homeDistrictList.length;r++)if(n=t.homeDistrictList[r],n.Value.toLowerCase()===f[u].toLowerCase()){t.homeDistrictList[r].IsChecked=!0;break}f&&(t.isHomeDistrictAllChecked=!1);break;case"livingCountry":for(u=0;u<f.length;u++)for(r=0;r<t.livingCountryList.length;r++)if(n=t.livingCountryList[r],n.Value.toLowerCase()===f[u].toLowerCase()){t.livingCountryList[r].IsChecked=!0;break}f&&(t.isLivingCountryAllChecked=!1);break;case"workingSector":for(u=0;u<f.length;u++)for(r=0;r<t.workingSectorList.length;r++)if(n=t.workingSectorList[r],n.Value.toLowerCase()===f[u].toLowerCase()){t.workingSectorList[r].IsChecked=!0;break}f&&(t.isWorkingSectorAllChecked=!1)}}function st(n){t.heightFrom=n.from_value.replace("'","").replace('"',"");t.heightTo=n.to_value.replace("'","").replace('"',"");t.refineSearch()}function ht(){$(".search-loading").show()}function tt(){$(".search-loading").hide()}function ct(){$(".searchpage-action-loader").show()}function it(){$(".searchpage-action-loader").hide()}function lt(){$(".express-interest-section").show()}function a(){$(".express-interest-section").hide()}function rt(){$(".chatting-section").hide()}function at(){$(".chatting-section").show()}function vt(){$(".message-section").show()}function ut(){$(".message-section").hide()}function g(n){$(".upgrade-plan").hide();$(".searchlist-action-wrapper").show();$(".searchlist-action-wrapper").css("width",$(".search-result-block").width());$(".searchlist-action-wrapper").css("top",$("#"+n.target.id).parent().closest(".search-result-block").position().top+6);$(".searchlist-action-wrapper").css("left",$(".search-result-block").position().left+1)}function ft(){var n=!1,t=$.cookie("ckIsPaidMember");return t&&t==="true"&&(n=!0),n}function et(n){bootbox.alert("<h4 class='alert-msg profile-{{profile.Id}}'>This profile comes from a marriage agency. Please contact with the agency below:<\/h4><br/><h4 class='agency-profile-id'><\/h4><h4 class='agency-name'><\/h4><h4 class='agency-mobile'><\/h4><br/><span class='agency-view-details' style='padding:10px; font-size:15px; display:none;'><a target='_blank' href='/Payment/MembershipPlan'>Upgrade your membership<\/a> to view details<\/span>",function(){});e.getAgency(n.AgencyId).success(function(t){var i=n.ProfileId,r=t.Name,u=t.Phone;ft()||(i="XXXXXX",r="XXXXXX",u="XXXXXX",$(".agency-view-details").show());$(".agency-profile-id").html("<b>Profile Id:<\/b> "+i);$(".agency-name").html("<b>Marriage Agency:<\/b> "+r);$(".agency-mobile").html("<b>Contact Number:<\/b> "+u)}).error(function(){})}function yt(n,t){if(t.IsAgencyProfile){et(t);return}g(n);$(".searchlist-action-title").html("Express Interest");$(".action-message").html("");a();ut();rt();ct();var i={};i.ToUserId=t.UserId;e.sendInterest(i).success(function(n){it();lt();n.isSuccess?$(".action-message",".express-interest-section").html("Your interest has been send to "+t.Name):n.message?$(".action-message",".express-interest-section").html(n.message):$(".action-message",".express-interest-section").html("Failed to send your interest!")}).error(function(){it();$("action-message",".express-interest-section").html("Error occured while sending your interest!")})}function pt(n){var t=getChatUserInfo(n.UserId);if(t){if(t.isOffline){bootbox.alert("<h4>Member Disconnects!<\/h4>",function(){});return}OpenPrivateChatWindow(t.connectionId,t.chatUserName)}else{bootbox.alert("<h4>Member is in Offline!<\/h4>",function(){});return}}function wt(){var n=t.searchModel,e="Any",i,f,u,r;if(n.HeightFrom&&n.HeightTo){var o=n.HeightFrom.substring(0,1)+"ft",s=n.HeightFrom.substring(2)?n.HeightFrom.substring(2)+"in":"",h=n.HeightTo.substring(0,1)+"ft",c=n.HeightTo.substring(2)?n.HeightTo.substring(2)+"in":"";e=o+" "+s+" - "+h+" "+c}if(i="All",n.Profession){for(f=n.Profession.replace(/\'/g,"").replace(/\ /g,"").split(","),u=0;u<f.length;u++)for(r=0;r<t.professionList.length;r++)if(t.professionList[r].Value===f[u].toString()){i+=t.professionList[r].Name+", ";break}i&&i!=="All"&&i.substring(0,i.length-2)}$("#search-gender").html(n.Gender);$("#search-age").html(n.AgeFrom+" - "+n.AgeTo+" years");$("#search-height").html(e);$("#search-religion").html(n.Religion?n.Religion.replace(/\'/g," ").replace(/\,/g,", "):"All");$("#search-marital-status").html(n.MaritalStatus?n.MaritalStatus.replace(/\'/g,"").replace(/\,/g,", "):"All");$("#search-education").html(n.Education?n.Education.replace(/\'/g," ").replace(/\,/g,", "):"All");$("#search-profession").html(i);$("#search-working-sector").html(n.WorkingSector?n.WorkingSector.replace(/\'/g," ").replace(/\,/g,", "):"All");$("#search-country-living").html(n.LivingCountry?n.LivingCountry.replace(/\'/g," ").replace(/\,/g,", "):"All")}function nt(n,i,r){var f="Any";if(n.HeightFrom&&n.HeightTo){var o=n.HeightFrom.substring(0,1)+"ft",s=n.HeightFrom.substring(2)?n.HeightFrom.substring(2)+"in":"",h=n.HeightTo.substring(0,1)+"ft",c=n.HeightTo.substring(2)?n.HeightTo.substring(2)+"in":"";f=o+" "+s+" - "+h+" "+c}var l=n.Gender,a=n.AgeFrom+" - "+n.AgeTo+" years",v=n.Religion?n.Religion.replace(/\'/g," "):"All",y=n.MaritalStatus?n.MaritalStatus.replace(/\'/g," "):"All",u=l+", "+a+", "+f+", "+v+", "+y;u=u.length>65?u.substring(0,65)+"...":u;$(".search-criteria").html(u);$("html, body").animate({scrollTop:0},"fast");ht();n.IsGetTotalRecord=i;e.searchResult(n).success(function(n){t.searchResult=n.recordList;setTimeout(function(){for(var i,r,t=0;t<n.recordList.length;t++)i=n.recordList[t].UserId,r=getChatUserInfo(i),r&&!r.IsOffline&&$("#btnChatNow-"+i).removeClass("icon-chat-empty").addClass("chat-now")},200);r&&(t.totalProfilesFound=n.totalProfilesFound);tt();$("#lbl-total-record-found").html(t.totalProfilesFound+" profiles found");n.recordList.length>0?i&&($("#pagination-ul").remove(),$(".pagination-container").html('<ul id="pagination-ul" class="pagination-md"><\/ul>').show(),$("#pagination-ul").twbsPagination({totalPages:n.totalPages,visiblePages:9,initiateStartPageClick:!1,onPageClick:function(n,i){t.searchModel.PageNo=i;nt(t.searchModel,!1,!1)}})):($(".pagination-container").hide(),$(".no-profile-found").show())}).error(function(){tt();bootbox.alert("<h4>Error to get search records!<\/h4>",function(){})})}function bt(){e.getCountryList().success(function(n){t.livingCountryList=n;l("livingCountry",t.livingCountry)}).error(function(){})}function kt(){e.getHomeDistrictList().success(function(n){t.homeDistrictList=n;l("homeDistrict",t.homeDistrict)}).error(function(){})}function dt(){e.getEducationList().success(function(n){t.educationList=n;l("education",t.education)}).error(function(){})}function gt(){e.getProfessionList().success(function(n){t.professionList=n;l("profession",t.profession)}).error(function(){})}function ni(){e.getWorkingSectorList().success(function(n){t.workingSectorList=n;l("workingSector",t.workingSector)}).error(function(){})}var v,y,p,w,b,h,o,c,k,d,s;if(setAppTitle("Search Result"),t.totalProfilesFound=0,t.ageFrom=20,t.ageTo=40,t.isLivingCountryAllChecked=!0,t.isHomeDistrictAllChecked=!0,t.isEducationAllChecked=!0,t.isProfessionAllChecked=!0,t.isWorkingSectorAllChecked=!0,bt(),kt(),dt(),gt(),ni(),v=getParam("ageFrom"),y=getParam("ageTo"),t.ageFrom=v?v:20,t.ageTo=y?y:40,t.religion=getParam("religion"),t.gender=getParam("gender"),t.maritalStatus=getParam("maritalStatus"),p=getParam("heightFrom"),w=getParam("heightTo"),t.heightFrom=p?p.replace("'","").replace('"',"").replace("ft","").replace("in",""):"",t.heightTo=w?w.replace("'","").replace('"',"").replace("ft","").replace("in",""):"",t.homeDistrict=getParam("homeDistrict"),t.education=getParam("education"),t.profession=getParam("profession"),t.livingCountry=getParam("livingCountry"),t.workingSector=getParam("workingSector"),b=getParam("searchby"),b&&(h=getParam("v"),h=h?h:"",h))switch(b){case"division":t.homeDistrict=h;break;case"education":t.education=h.replace(/-/g," ").replace("A Label","A-Label");break;case"country":t.livingCountry=h.replace(/-/g," ");break;case"profession":t.profession=h.replace(/-/g," ")}for(o={},o.AgeFrom=parseInt(t.ageFrom,10),o.AgeTo=parseInt(t.ageTo,10),o.HeightFrom=t.heightFrom,o.HeightTo=t.heightTo,o.Religion=t.religion,o.Gender=t.gender,o.MaritalStatus=t.maritalStatus,o.LivingCountry=t.livingCountry,o.HomeDistrict=t.homeDistrict,o.Education=t.education,o.Profession=t.profession,o.WorkingSector=t.workingSector,o.PageNo=1,t.searchModel=o,nt(o,!0,!0),$("#ageRangeSlider").ionRangeSlider({skin:"round",type:"double",min:18,max:60,from:t.ageFrom,to:t.ageTo,onFinish:ot}),c=["4'1\"","4'2\"","4'3\"","4'4\"","4'5\"","4'6\"","4'7\"","4'8\"","4'9\"","4'10\"","4'11\"","5'","5'1\"","5'2\"","5'3\"","5'4\"","5'5\"","5'6\"","5'7\"","5'8\"","5'9\"","5'10\"","5'11\"","6'","6'1\"","6'2\"","6'3\"","6'4\"","6'5\"","6'6\"","6'7\"","6'8\"","6'9\"","6'10\""],k=5,s=0;s<c.length;s++)if(c[s].replace("'","").replace('"',"")===t.heightFrom.replace(" ","")){k=s;break}for(d=26,s=0;s<c.length;s++)if(c[s].replace("'","").replace('"',"")===t.heightTo.replace(" ","")){d=s;break}$("#heightRangeSlider").ionRangeSlider({skin:"round",type:"double",values:c,from:k,to:d,onFinish:st});t.himOrHer=function(n){return n==="male"?"him":"her"};t.register=function(){window.location.href="/register/account"};t.profileIdSearch=function(){e.getUserIdByProfileId(t.profileId).success(function(n){n.userId?window.open("/search/profile/?id="+n.userId):bootbox.alert("<h4>Profile not found!<\/h4>",function(){})}).error(function(){})};t.expandCollapse=function(n){var t;n==="gender"?(t=$(".gender-filter"),$(t).is(":visible")?$(".gender-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"):$(".gender-icon-showhide").removeClass("fa-chevron-down").addClass("fa-chevron-right"),t.slideToggle()):n==="age"?(t=$(".age-filter"),$(t).is(":visible")?$(".age-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"):$(".age-icon-showhide").removeClass("fa-chevron-down").addClass("fa-chevron-right"),t.slideToggle()):n==="height"?(t=$(".height-filter"),$(t).is(":visible")?$(".height-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"):$(".height-icon-showhide").removeClass("fa-chevron-down").addClass("fa-chevron-right"),t.slideToggle()):n==="livingcountry"?(t=$(".livingcountry-filter"),$(t).is(":visible")?$(".livingcountry-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"):$(".livingcountry-icon-showhide").removeClass("fa-chevron-down").addClass("fa-chevron-right"),t.slideToggle()):n==="homedistrict"?(t=$(".homedistrict-filter"),$(t).is(":visible")?$(".homedistrict-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"):$(".homedistrict-icon-showhide").removeClass("fa-chevron-down").addClass("fa-chevron-right"),t.slideToggle()):n==="profession"?(t=$(".profession-filter"),$(t).is(":visible")?$(".profession-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"):$(".profession-icon-showhide").removeClass("fa-chevron-down").addClass("fa-chevron-right"),t.slideToggle()):n==="education"?(t=$(".education-filter"),$(t).is(":visible")?$(".education-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"):$(".education-icon-showhide").removeClass("fa-chevron-down").addClass("fa-chevron-right"),t.slideToggle()):n==="workingSector"?(t=$(".workingSector-filter"),$(t).is(":visible")?$(".workingSector-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"):$(".workingSector-icon-showhide").removeClass("fa-chevron-down").addClass("fa-chevron-right"),t.slideToggle()):n==="profileId"&&(t=$(".profileid-filter"),$(t).is(":visible")?$(".profileid-icon-showhide").removeClass("fa-chevron-right").addClass("fa-chevron-down"):$(".profileid-icon-showhide").removeClass("fa-chevron-down").addClass("fa-chevron-right"),t.slideToggle())};t.closeWrapper=function(){$(".searchlist-action-wrapper").hide()};t.saveFavoriteUser=function(n){var t=getUserStatus(),i;if(t.isLoggedIn){if(!t.isVerified){bootbox.alert("<h4>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}}else{i=new bootstrap.Modal(document.getElementById("loginModal"),{});i.show();return}e.saveFavoriteUser(n).success(function(n){n.isSuccess?bootbox.alert("<h4>Profile is added to your favorite list successfully!<\/h4>",function(){}):n.message&&bootbox.alert("<h4>"+n.message+"<\/h4>",function(){})}).error(function(){})};t.viewFullProfile=function(n){var t=getUserStatus(),i;if(t.isLoggedIn){if(!t.isVerified){bootbox.alert("<h4>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}}else{i=new bootstrap.Modal(document.getElementById("loginModal"),{});i.show();return}window.open("/search/profile?id="+n)};t.sendInterest=function(n,t){var i=getUserStatus(),r;if(i.isLoggedIn){if(!i.isVerified){bootbox.alert("<h4 class='alert-msg'>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}}else{r=new bootstrap.Modal(document.getElementById("loginModal"),{});r.show();return}bootbox.confirm("<h4 class='alert-msg'>Are you sure to express your interest to this profile?<\/h4>",function(i){i&&yt(n,t)})};t.openSendMessage=function(n,i){var r=getUserStatus(),u;if(r.isLoggedIn){if(!r.isVerified){bootbox.alert("<h4 class='alert-msg'>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}}else{u=new bootstrap.Modal(document.getElementById("loginModal"),{});u.show();return}if(i.IsAgencyProfile){et(i);return}g(n);t.MessageToUserId=i.UserId;$(".searchlist-action-title").html("Send Message");$(".action-message").html("");$(".message-action-container").show();t.message="";vt();a();rt()};t.openChat=function(n,i){var f=ft(),r=getUserStatus(),u;if(r.isLoggedIn)if(r.isVerified){if(!f){g(n);$(".searchlist-action-title").html("Chatting");$(".action-message").html("");$(".message-action-container").show();t.message="";ut();a();at();return}}else{bootbox.alert("<h4 class='alert-msg'>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}else{u=new bootstrap.Modal(document.getElementById("loginModal"),{});u.show();return}pt(i)};t.sendMessage=function(){if(t.message!==""){$(".msg-sending-loader").show();a();var n={};n.ToUserId=t.MessageToUserId;n.Body=t.message;e.sendMessage(n).success(function(n){$(".msg-sending-loader").hide();$(".message-action-container").hide();n.isSuccess?$(".action-message",".message-section").html("Message has been send successfully"):n.message!==""?($(".action-message",".message-section").html(n.message),$(".upgrade-plan").show()):n.nidSubmitted?n.nidVerified?$(".action-message",".message-section").html("Failed to send the message!"):bootbox.alert("<h5 class='center'>Your NID or Passport is under review now!<\/h5><div class='center' style='padding-top:20px; padding-bottom: 20px; '>Please wait a while to approve your NID or Passport<\/div>",function(){}):bootbox.alert("<h5 class='center'>Your identity is not verified yet!<\/h5><div class='center' style='padding-top:20px; padding-bottom: 20px; '>Send a message to others, you have to verify your identity. <a href='/verification/documents' target='_blank' >Click Here<\/a> to submit your NID or Passport scan copy<\/div>",function(){})}).error(function(){$(".msg-sending-loader").hide();$(".message-action-container").hide();$(".action-message",".message-section").html("Error occured while sending message!")})}};t.sendPhotoRequest=function(n){var i={},t;if(i.ToUserId=n.UserId,t=getUserStatus(),t.isLoggedIn){if(!t.isVerified){bootbox.alert("<h4 class='alert-msg'>Your account is not verified yet. Its under verification process!<\/h4>",function(){});return}}else{window.location.href="/security/login";return}e.sendPhotoRequest(i).success(function(n){n.isSuccess?bootbox.alert("<h4>You photo request has been send seccessfully!<\/h4>",function(){}):n.message?bootbox.alert("<h4 class='alert-msg'>"+n.message+"<\/h4>",function(){}):bootbox.alert("<h4 class='alert-msg'>Failed to send photo request!<\/h4>",function(){})}).error(function(){bootbox.alert("<h4 class='alert-msg'>Error to send photo request!<\/h4>",function(){})})};t.refineSearch=function(){for(var i,r="",u="",f="",e="",n=0;n<t.livingCountryList.length;n++)i=t.livingCountryList[n],i.IsChecked===!0&&(r+=i.Value+",");for(r&&(r=r.slice(0,-1)),n=0;n<t.homeDistrictList.length;n++)i=t.homeDistrictList[n],i.IsChecked===!0&&(u+=i.Value+",");for(u&&(u=u.slice(0,-1)),n=0;n<t.educationList.length;n++)i=t.educationList[n],i.IsChecked===!0&&(f+=i.Value+",");for(f&&(f=f.slice(0,-1)),n=0;n<t.professionList.length;n++)i=t.professionList[n],i.IsChecked===!0&&(e+=i.Value+",");e&&(e=e.slice(0,-1));o={};o.AgeFrom=t.ageFrom;o.AgeTo=t.ageTo;o.HeightFrom=t.heightFrom;o.HeightTo=t.heightTo;o.Religion=t.religion;o.Gender=t.gender;o.MaritalStatus=t.maritalStatus;o.LivingCountry=r;o.HomeDistrict=u;o.Education=f;o.Profession=e;o.PageNo=1;t.searchModel=o;nt(o,!0,!0)};t.genderChanged=function(){t.refineSearch()};t.livingCountryCheckAllChanged=function(){if(t.isLivingCountryAllChecked)for(var n=0;n<t.livingCountryList.length;n++)t.livingCountryList[n].IsChecked=!1;t.refineSearch()};t.livingCountryCheckChanged=function(){for(var i=!1,n=0;n<t.livingCountryList.length;n++)if(t.livingCountryList[n].IsChecked===!0){i=!0;break}t.isLivingCountryAllChecked=i?!1:!0;t.refineSearch()};t.homeDistrictCheckAllChanged=function(){if(t.isHomeDistrictAllChecked)for(var n=0;n<t.homeDistrictList.length;n++)t.homeDistrictList[n].IsChecked=!1;t.refineSearch()};t.homeDistrictCheckChanged=function(){for(var i=!1,n=0;n<t.homeDistrictList.length;n++)if(t.homeDistrictList[n].IsChecked===!0){i=!0;break}t.isHomeDistrictAllChecked=i?!1:!0;t.refineSearch()};t.educationCheckAllChanged=function(){if(t.isEducationAllChecked)for(var n=0;n<t.educationList.length;n++)t.educationList[n].IsChecked=!1;t.refineSearch()};t.educationCheckChanged=function(){for(var i=!1,n=0;n<t.educationList.length;n++)if(t.educationList[n].IsChecked===!0){i=!0;break}t.isEducationAllChecked=i?!1:!0;t.refineSearch()};t.professionCheckAllChanged=function(){if(t.isProfessionAllChecked)for(var n=0;n<t.professionList.length;n++)t.professionList[n].IsChecked=!1;t.refineSearch()};t.professionCheckChanged=function(){for(var i=!1,n=0;n<t.professionList.length;n++)if(t.professionList[n].IsChecked===!0){i=!0;break}t.isProfessionAllChecked=i?!1:!0;t.refineSearch()};t.workingSectorCheckAllChanged=function(){if(t.isWorkingSectorAllChecked)for(var n=0;n<t.workingSectorList.length;n++)t.workingSectorList[n].IsChecked=!1;t.refineSearch()};t.workingSectorCheckChanged=function(){for(var i=!1,n=0;n<t.workingSectorList.length;n++)if(t.workingSectorList[n].IsChecked===!0){i=!0;break}t.isWorkingSectorAllChecked=i?!1:!0;t.refineSearch()};t.viewSearchCriteria=function(){$(".search-criteria-details").is(":visible")?($(".search-criteria-details").hide(),$(".criteria-arrow").removeClass("fa-chevron-up").addClass("fa-chevron-down")):($(".search-criteria-details").show(),$(".criteria-arrow").removeClass("fa-chevron-down").addClass("fa-chevron-up"));wt()};t.closeSearchCriteria=function(){$(".search-criteria-details").hide();$(".criteria-arrow").removeClass("fa-chevron-up").addClass("fa-chevron-down")}}]);$(document).ready(function(){function n(n){n?($(".status-msg").show(),$("#email").attr("disabled","disabled"),$("#btnSendPassword").attr("disabled","disabled")):($(".status-msg").hide(),$("#email").removeAttr("disabled"),$("#btnSendPassword").removeAttr("disabled"))}$(".forgotPassword").click(function(){var t={};t.Username=$("#email").val();n(!0);$.ajax({dataType:"json",url:"/Security/ForgotPassword",type:"POST",data:t,success:function(t){n(!1);t.IsSuccess?bootbox.alert("<br /><h4>Your password has been send to your mobile or email.<\/h4><br />",function(){}):bootbox.alert("<h4>Your mobile/email account is not found in bdmarriage!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while sending your password! Please contact with bdmarriage team<\/h4>",function(){});n(!1)}})})});$(document).ready(function(){function n(n){n?($(".logging").show(),$("#loginUsername").attr("disabled","disabled"),$("#loginPassword").attr("disabled","disabled"),$("#loginBtn").attr("disabled","disabled"),$(".message").removeClass("error-message")):($(".logging").hide(),$("#loginUsername").removeAttr("disabled"),$("#loginPassword").removeAttr("disabled"),$("#loginBtn").removeAttr("disabled"))}$("#register").click(function(){window.location.href="/register/account"});$("#loginPassword").keyup(function(n){n.keyCode==13&&$(".login").click()});$(".login").click(function(){var t={},i;t.Username=$("#loginUsername").val();t.Password=$("#loginPassword").val();t.RememberMe=$("#rememberMe").is(":checked")?!0:!1;n(!0);i=getParam("ReturnUrl");$.ajax({dataType:"json",contentType:"application/json",url:"/Security/Login",type:"POST",data:JSON.stringify(t),success:function(t){n(!1);t.isSuccess?window.location.href=i?i:t.redirectUrl:$(".message").addClass("login-error").html(t.message)},error:function(){$(".message").addClass("login-error").html("Operation Failed!");n(!1)}})})});$(document).ready(function(){function n(n){n?($(".status-msg").show(),$("#subject").attr("disabled","disabled"),$("#email").attr("disabled","disabled"),$("#description").attr("disabled","disabled"),$("#btnSend").attr("disabled","disabled")):($(".status-msg").hide(),$("#subject").removeAttr("disabled"),$("#email").removeAttr("disabled"),$("#description").removeAttr("disabled"),$("#btnSend").removeAttr("disabled"))}function i(){$("#subject").val("");$("#email").val("");$("#description").val("")}var t=getParam("subject");t&&$("#subject").val(t);$("#btnSend").click(function(){var t=$("#subject").val(),r=$("#email").val(),u=$("#description").val();if(t)if(r){if(!u){bootbox.alert("<h4>Please enter your message<\/h4>",function(){});return}}else{bootbox.alert("<h4>Please enter your email / mobile<\/h4>",function(){});return}else{bootbox.alert("<h4>Please enter a message subject<\/h4>",function(){});return}n(!0);$.ajax({dataType:"json",url:"/Corporate/ContactUs",type:"POST",data:{subject:t,email:r,description:u},success:function(t){n(!1);t.isSuccess?($(".message").html("Your message has been send successfully!"),i()):$(".message").html("Failed to send your message!")},error:function(){$("#message").html("Error occured while sending your message!");n(!1)}})})});$(document).ready(function(){function r(){var i,n=120,t;$("#timing").html(n);$("#btnConfirmMobileNumber").prop("disabled",!0);$("#btnConfirmMobileNumber").addClass("btn-disable-back");t=$("#btnConfirmMobileNumber").html();i=setInterval(function(){--n;$("#btnConfirmMobileNumber").html(t+" ("+n+")");n===0&&(clearInterval(i),$("#btnConfirmMobileNumber").html(t),$("#btnConfirmMobileNumber").prop("disabled",!1),$("#btnConfirmMobileNumber").addClass("btn-enable-back"))},1e3)}var t=getParam("mobile"),i=getParam("userId"),n;$("#mobile").val(t);n="/Account/CreateProfile/?UserId="+i+"&Type=update";$("#edit-account").prop("href",n);$("#verify-digit1").keyup(function(){$("#verify-digit2").focus()});$("#verify-digit2").keyup(function(){$("#verify-digit3").focus()});$("#verify-digit3").keyup(function(){$("#verify-digit4").focus()});$("#btnConfirmMobileNumber").click(function(){$(".loading").show();$("#send-status-msg").html("Verification code is sending...");r();$.ajax({dataType:"json",url:"/Account/SendToken",type:"POST",data:{isSms:!0},success:function(n){n.isSuccess&&($("#send-loading").hide(),$("#send-status-msg").html("Verification code has been sent to your mobile. (It may take 15 to 120 seconds to arrive)"),$("#verify-digit1").focus())},error:function(){}})});$("#btnVerify-mobile-Token").click(function(){var n=$("#verify-digit1").val(),t=$("#verify-digit2").val(),i=$("#verify-digit3").val(),r=$("#verify-digit4").val(),u=n+t+i+r;setButtonState("btnVerifyToken",!0);$(".token-verifying-loader").show();$.ajax({dataType:"json",url:"/Account/VerifyTokenFromWeb",type:"POST",data:{id:null,token:u,isMobileVerified:!0,isEmailVerified:!1},success:function(n){n.isSuccess?window.location.href="/mypage":bootbox.alert("<h4>Sorry, Invalid Token!<\/h4>",function(){});setButtonState("btnVerifyToken",!1);$(".token-verifying-loader").hide()},error:function(){setButtonState("btnVerifyToken",!1);$(".token-verifying-loader").hide()}})})});$(document).ready(function(){function r(n,t){setButtonState("btnVerifyToken",!0);$(".token-verifying-loader").show();$.ajax({dataType:"json",url:"/Account/VerifyTokenFromWeb",type:"POST",data:{id:n,token:t,isMobileVerified:!1,isEmailVerified:!0},success:function(n){n.isSuccess?window.location.href="/mypage":bootbox.alert("<h4>Sorry, Invalid Token!<\/h4>",function(){});setButtonState("btnVerifyToken",!1);$(".token-verifying-loader").hide()},error:function(){setButtonState("btnVerifyToken",!1);$(".token-verifying-loader").hide()}})}function e(){var i,n=120,t;$("#timing").html(n);$("#btnConfirmEmailAccount").prop("disabled",!0);$("#btnConfirmEmailAccount").addClass("btn-disable-back");t=$("#btnConfirmEmailAccount").html();i=setInterval(function(){--n;$("#btnConfirmEmailAccount").html(t+" ("+n+")");n===0&&(clearInterval(i),$("#btnConfirmEmailAccount").html(t),$("#btnConfirmEmailAccount").prop("disabled",!1),$("#btnConfirmEmailAccount").addClass("btn-enable-back"))},1e3)}var u=getParam("email"),n=getParam("userId"),f=getParam("verifyFromEmail"),t=getParam("verifyFromEmailToken"),i;f==="true"&&t&&r(n,t);$("#email").val(u);i="/Account/CreateProfile/?UserId="+n+"&Type=update";$("#edit-account").prop("href",i);$("#verify-digit1").keyup(function(){$("#verify-digit2").focus()});$("#verify-digit2").keyup(function(){$("#verify-digit3").focus()});$("#verify-digit3").keyup(function(){$("#verify-digit4").focus()});$("#btnConfirmEmailAccount").click(function(){$(".loading").show();$("#send-status-msg").html("Verification code is sending...");e();$.ajax({dataType:"json",url:"/Account/SendToken",type:"POST",data:{isSms:!1},success:function(n){n.isSuccess&&($("#send-loading").hide(),$("#send-status-msg").html("Verification code has been sent to your email. (It may take 15 to 120 seconds to arrive)"),$("#verify-digit1").focus())},error:function(){}})});$("#btnVerify-email-Token").click(function(){var n=$("#verify-digit1").val(),t=$("#verify-digit2").val(),i=$("#verify-digit3").val(),u=$("#verify-digit4").val(),f=n+t+i+u;r(null,f)})});app.factory("featuredProfileListService",["$http",function(){}]);app.controller("FeaturedProfileListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","featuredProfileListService",function(){function n(n){$.ajax({dataType:"json",url:"/Admin/GetUnVerifiedUserList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].UserId),r.push(t[i].Name),r.push(t[i].Mobile),r.push(t[i].ProfileBy),r.push(t[i].RegistrationDate),u.push(r);n(u)},error:function(){}})}function t(n,t){$.ajax({dataType:"json",url:"/Admin/DeleteUser",data:{userId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>User has been deleted sucessfully<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to delete user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting user!<\/h4>",function(){})}})}function i(n,t){$.ajax({dataType:"json",url:"/Admin/VerifyUser",data:{userId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>User has been approved sucessfully<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to approve user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while approving user!<\/h4>",function(){})}})}n(function(n){$("#data-table-featured-profile-list").dataTable({data:n,bLengthChange:!1,bFilter:!1,pageLength:50,bDestroy:!0,columns:[{title:"Id"},{title:"Name"},{title:"Mobile"},{title:"Profile By"},{title:"Date"},{title:"Action","class":"center"}],aoColumnDefs:[{aTargets:[0],visible:!1},{aTargets:[1],mRender:function(n,t,i){var r='<a target="_blank" href=/search/profile/?id='+i[0]+">"+i[1]+"<\/a>";return $("<div/>").append(r).html()}},{aTargets:[5],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Verify Profile" id='+i[0]+' class="verifyProfile btn btn-primary cursor-pointer">Approve<\/button>';return r+='&nbsp;&nbsp;<button title="Delete Profile" id='+i[0]+' class="deleteProfile btn btn-danger cursor-pointer">Delete<\/button>',$("<div/>").append(r).html()}}]})});$("#data-table-featured-profile-list").on("click",".deleteProfile",function(){var n=$(this).attr("id"),i=$(this).closest("tr");bootbox.confirm("<h4>Are you sure to delete this profile?<\/h4>",function(r){r&&t(n,function(){$(i).remove()})})});$("#data-table-featured-profile-list").on("click",".verifyProfile",function(){var n=$(this).attr("id"),t=$(this).closest("tr");bootbox.confirm("<h4>Are you sure to approved this profile?<\/h4>",function(r){r&&i(n,function(){$(t).remove()})})})}]);app.factory("PaymentTransactionListService",["$http",function(){}]);app.controller("PaymentTransactionListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","PaymentTransactionListService",function(){function n(n){$.ajax({dataType:"json",url:"/Admin/GePaymentTransactions",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].Tran_Id),r.push(t[i].Tran_Date),r.push(t[i].MembershipStatus),r.push(t[i].Status),r.push(t[i].Amount),r.push(t[i].Store_Amount),r.push(t[i].MemberId),u.push(r);n(u)},error:function(){}})}n(function(n){$("#data-table-payment-tran-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,order:[],columns:[{title:"Tran Id"},{title:"Tran Date",sType:"date"},{title:"Membership"},{title:"Status"},{title:"Amount"},{title:"Store Amount"},{title:"MemberId"}],aoColumnDefs:[{aTargets:[1],render:function(n){var t=moment(n).format("DD MMM YYYY h:mm a"),i='<span title="'+t+'">'+t+"<\/span>";return $("<div/>").append(i).html()}},{aTargets:[3],visible:!1}]})})}]);app.factory("photoVerifyListService",["$http",function(){}]);app.controller("PhotoVerifyListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","photoVerifyListService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/Admin/GetPendingPhotoList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].Id),r.push(t[i].UserId),r.push(t[i].PhotoName),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/Photo/DeletePhoto",method:"POST",data:{photoId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete this photo!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting this photo!<\/h4>",function(){})}})}function i(n,t){$.ajax({dataType:"json",url:"/Admin/DeleteUser",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete this profile!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting this profile!<\/h4>",function(){})}})}function r(n,t){$.ajax({dataType:"json",url:"/Admin/ActivatePhoto",data:{photoId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to approve this photo!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while approving this photo!<\/h4>",function(){})}})}n(function(n){$("#data-table-photo-verify-list").dataTable({data:n,bLengthChange:!1,bFilter:!1,pageLength:50,bDestroy:!0,columns:[{title:"Id"},{title:"UserId"},{title:"Photo","class":"center vertical-middle"},{title:"View Profile","class":"center vertical-middle"},{title:"Action","class":"center vertical-middle",width:"380"}],aoColumnDefs:[{aTargets:[0,1],visible:!1},{aTargets:[2],mRender:function(n,t,i){var r='<a target="_blank" href=/Photos/Members/xl51865/'+i[2]+'><img alt="" src="/Photos/Members/s25634/'+i[2]+'"/> <\/a>';return $("<div/>").append(r).html()}},{aTargets:[3],mRender:function(n,t,i){var r='<a target="_blank" href=/search/profile?id='+i[1]+">View Profile <\/a>";return $("<div/>").append(r).html()}},{aTargets:[4],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button style="float:left;" title="Verify Profile" id='+i[0]+' class="verifyPhoto btn btn-primary cursor-pointer">Approve<\/button>';return r+='&nbsp;&nbsp;<button style="float:left; margin-left:5px;" title="Delete Photo" id='+i[0]+' class="deletePhoto btn btn-warning cursor-pointer">Delete Photo<\/button>',r+='&nbsp;&nbsp;<button style="float:right;" title="Delete Profile" userId='+i[1]+' class="deleteProfile btn btn-danger cursor-pointer">Delete Profile<\/button>',$("<div/>").append(r).html()}}]})});$("#data-table-photo-verify-list").on("click",".deletePhoto",function(){var n=$(this).attr("id"),i=$(this).closest("tr");t(n,function(){$(i).remove()})});$("#data-table-photo-verify-list").on("click",".deleteProfile",function(){var n=$(this).attr("userId"),t=$(this).closest("tr");i(n,function(){$(t).remove()})});$("#data-table-photo-verify-list").on("click",".verifyPhoto",function(){var n=$(this).attr("id"),t=$(this).closest("tr");r(n,function(){$(t).remove()})})}]);app.factory("profileVerifyListService",["$http",function(){}]);app.controller("ProfileVerifyListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","profileVerifyListService",function(){function t(n,t){$.ajax({dataType:"json",url:"/Campaign/AddCallCount",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to save phone call record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while saving phone call record!<\/h4>",function(){})}})}function n(n,t){$.ajax({dataType:"json",url:"/Campaign/AddDialCount",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to save phone dial record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while saving phone dial record!<\/h4>",function(){})}})}function i(t,i){$.ajax({dataType:"json",url:"/Admin/PhoneVerifyNotification",data:{userId:t},success:function(r){r.isSuccess?(n(t,function(){}),bootbox.alert("<h4>Notification send successfully!<\/h4>",function(){}),i()):bootbox.alert("<h4>Failed to send notification!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while sending notification!<\/h4>",function(){})}})}function r(n){var i=getParam("type"),t;$("#profileVerifyTitle").html("Profile - "+i);t="";i==="unapproved-verified"?t="/Admin/GetUserList?type=unapproved-verified":i==="unapproved-unverified"?t="/Admin/GetUserList?type=unapproved-unverified":i==="incomplete"?t="/Admin/GetUserList?type=incomplete":i==="deleted"?t="/Admin/GetUserList?type=deleted":i==="blocked"&&(t="/Admin/GetUserList?type=blocked");$(".loader").show();$.ajax({dataType:"json",url:t,success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].UserId),r.push(t[i].Name),r.push(t[i].Gender),r.push(t[i].Mobile),r.push(t[i].ProfileBy),r.push(t[i].IsMobileVerified),r.push(t[i].CallCount),r.push(t[i].DialCount),r.push(t[i].RegistrationDate),r.push(t[i].AboutMyself),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function u(n,t){$.ajax({dataType:"json",url:"/Admin/DeleteUser",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting user!<\/h4>",function(){})}})}function f(n,t){$.ajax({dataType:"json",url:"/Admin/BlockUser",data:{userId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>User has been blocked sucessfully<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to block user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while block user!<\/h4>",function(){})}})}function e(n,t){$.ajax({dataType:"json",url:"/Admin/VerifyUser_VerifyMobile",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to approve user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while approving user!<\/h4>",function(){})}})}r(function(n){$("#data-table-profile-verify-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,aaSorting:[],columns:[{title:"Id"},{title:"Name"},{title:"Gender"},{title:"Mobile"},{title:"Created"},{title:"Verified","class":"center"},{title:"Call","class":"center"},{title:"Dial / Notify","class":"center"},{title:"Date"},{title:"Call"},{title:"Dial"},{title:"Apr","class":"center action-btn-container"},{title:"Del","class":"center action-btn-container"},{title:"Notify","class":"center action-btn-notify"}],aoColumnDefs:[{aTargets:[0,11],visible:!1},{aTargets:[1],mRender:function(n,t,i){var u=$(this).closest("tr"),r;return u.remove(),r='<a class="navigateDetailPage" title="'+i[8]+'" id='+i[0]+" email="+i[7]+">"+i[1]+"<\/a>",$("<div/>").append(r).html()}},{aTargets:[4],sortable:!1},{aTargets:[5],sortable:!1,mRender:function(n,t,i){var r="";return r=i[5]?'<i class="icon-check-1" style="color:green;font-weight:600; font-size:15px;"><\/i>':'<i class="glyphicon glyphicon-remove" style="color:#555;"><\/i>',$("<div/>").append(r).html()}},{aTargets:[6],mRender:function(n,t,i){var r="",u;return r=i[6]?i[6]:"0",u='<span class="td-phone-call" title='+r+">"+r+"<\/span>",$("<div/>").append(u).html()}},{aTargets:[7],mRender:function(n,t,i){var r="",u;return r=i[7]?i[7]:"0",u='<span class="td-phone-dial" title='+r+">"+r+"<\/span>",$("<div/>").append(u).html()}},{aTargets:[9],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Phone call" id='+i[0]+' class="phoneCall btn btn-primary cursor-pointer" >Call<\/button>';return $("<div/>").append(r).html()}},{aTargets:[10],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Phone dial" id='+i[0]+' class="phoneDial btn btn-warning cursor-pointer" >Dial<\/button>';return $("<div/>").append(r).html()}},{aTargets:[11],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Verify Profile" id='+i[0]+' class="verifyProfile btn btn-success cursor-pointer" >A + M<\/button>';return $("<div/>").append(r).html()}},{aTargets:[12],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Delete Profile" id='+i[0]+' class="deleteProfile btn btn-danger cursor-pointer">Del<\/button>';return $("<div/>").append(r).html()}},{aTargets:[13],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Notify" id='+i[0]+' class="notify btn btn-info cursor-pointer" >Notify<\/button>';return $("<div/>").append(r).html()}}]})});$("#data-table-profile-verify-list").on("click",".phoneCall",function(){var u=$(this).attr("id"),f=$(this).closest("tr"),n=$(f),i=$(".td-phone-call",n).html(),r;i&&(r=parseInt(i,10)+1,$(".td-phone-call",n).text(r));t(u,function(){})});$("#data-table-profile-verify-list").on("click",".phoneDial",function(){var u=$(this).attr("id"),f=$(this).closest("tr"),t=$(f),i=$(".td-phone-dial",t).html(),r;i&&(r=parseInt(i,10)+1,$(".td-phone-dial",t).text(r));n(u,function(){})});$("#data-table-profile-verify-list").on("click",".deleteProfile",function(){var n=$(this).attr("id"),t=$(this).closest("tr");u(n,function(){$(t).remove()})});$("#data-table-profile-verify-list").on("click",".verifyProfile",function(){var n=$(this).attr("id"),t=$(this).closest("tr");e(n,function(){$(t).remove()})});$("#data-table-profile-verify-list").on("click",".sendMessage",function(){var t=$(this).attr("id"),n=$(this).attr("email");$("#email").val(n);window.userId=t;window.email=n;window.currentTr=$(this).closest("tr");$("#notifyModal").modal()});$("#data-table-profile-verify-list").on("click",".notify",function(){var n=$(this).attr("id");i(n,function(){})});$("#data-table-profile-verify-list").on("click",".navigateDetailPage",function(){var n=$(this).attr("id"),t=$(this).attr("email"),i=$(this).closest("tr");$(i).css("background-color","#A2D9CE");window.open("/search/profile?id="+n+"&email="+t,"_blank")});$("#btnBlockUser").click(function(){var n=window.userId,t=window.currentTr;bootbox.confirm("<h4>Are you sure to block this profile?<\/h4>",function(i){i&&f(n,function(){$(t).remove()})})});$("#btnSendEmail").click(function(){var n=$("#email").val(),t=$("#emailSubject").val(),i=$("#emailBody").val();bootbox.confirm("<h3>Are you sure to send this message?<\/h3>",function(r){r&&($(".modal-loader").show(),$.ajax({dataType:"json",url:"/Notification/SendEmail",data:{sendTo:"updaterequest",specificEmailList:n,subject:t,message:i,lastLoginDay:0},success:function(){bootbox.alert("<h4>Message send successfully<\/h4>",function(){});$(".modal-loader").hide();callback(dataSet)},error:function(){$(".modal-loader").hide();bootbox.alert("<h4>Failed to send message<\/h4>",function(){})}}))})})}]);app.factory("identityVerifyListService",["$http",function(){}]);app.controller("IdentityVerifyListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","identityVerifyListService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/Admin/GetPendingIdentityList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].Id),r.push(t[i].UserId),r.push(t[i].Type),r.push(t[i].PhotoName),r.push(t[i].Name),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/VerificationDoc/DeletePhoto",method:"POST",data:{photoId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete this photo!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting this  photo!<\/h4>",function(){})}})}function i(n,t){$.ajax({dataType:"json",url:"/Admin/DeleteUser",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete this profile!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting this profile!<\/h4>",function(){})}})}function r(n,t,i,r){$.ajax({dataType:"json",url:"/Admin/ActivateVerificationDoc",data:{photoId:n,userId:t,type:i},success:function(n){n.IsSuccess?r():bootbox.alert("<h4>Failed to approve this file!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while approving this file!<\/h4>",function(){})}})}function u(n,t,i){$.ajax({dataType:"json",url:"/Campaign/SendCoupon",data:{userId:n,couponPercentage:t,couponExpireInHour:i},success:function(n){n.IsSuccess?bootbox.alert("<h4>Coupon send successfully!<\/h4>",function(){}):bootbox.alert("<h4>Failed to send this coupon!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while sending coupon!<\/h4>",function(){})}})}n(function(n){$("#data-table-identity-verify-list").dataTable({data:n,bLengthChange:!1,bFilter:!1,pageLength:50,bDestroy:!0,columns:[{title:"Id"},{title:"UserId"},{title:"Type"},{title:"Document","class":"center vertical-middle"},{title:"Description","class":"center vertical-middle"},{title:"Action","class":"center vertical-middle",width:"280"}],aoColumnDefs:[{aTargets:[0,1,2],visible:!1},{aTargets:[3],mRender:function(n,t,i){var r='<a target="_blank" href="/Photos/Verifications/Original/'+i[3]+'"><img style="max-width:300px;" alt="" src="/Photos/Verifications/Original/'+i[3]+'"/> <\/a>';return $("<div/>").append(r).html()}},{aTargets:[4],mRender:function(n,t,i){var r='<a target="_blank" href=/search/profile/?id='+i[1]+">"+i[4]+"<\/a>";return $("<div/>").append(r).html()}},{aTargets:[5],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Verify Profile" id='+i[0]+" userId="+i[1]+" type="+i[2]+' class="verifyPhoto btn btn-primary cursor-pointer">Approve<\/button>',u;return r+='&nbsp;&nbsp;<button margin-left:5px;" title="Delete Photo" id='+i[0]+' class="deletePhoto btn btn-warning cursor-pointer">Delete<\/button>',u='<div class="coupon-container" style="width:250px; padding-top:10px;border-top: 1px solid #dcdcdc;margin-top: 10px;"><input class="discountPerc" placeholder="%" style="text-align:center;width:50px;height: 33px;position: relative;top: 2px;" />  <input placeholder="hour" class="validityHour" style="text-align:center;width:50px;height: 33px;position: relative;top: 2px;" /><button userId='+i[1]+' style="margin-left:5px;" class="sendCoupon btn btn-success cursor-pointer">Send Coupon<\/button><\/div>',r+=u,$("<div/>").append(r).html()}}]})});$("#data-table-identity-verify-list").on("click",".deletePhoto",function(){var n=$(this).attr("id"),i=$(this).closest("tr");t(n,function(){$(i).remove()})});$("#data-table-identity-verify-list").on("click",".deleteProfile",function(){var n=$(this).attr("userId"),t=$(this).closest("tr");i(n,function(){$(t).remove()})});$("#data-table-identity-verify-list").on("click",".verifyPhoto",function(){var n=$(this).attr("id"),t=$(this).attr("userId"),i=$(this).attr("type"),u=$(this).closest("tr");r(n,t,i,function(){$(u).remove()})});$("#data-table-identity-verify-list").on("click",".sendCoupon",function(){var r=$(this).parent().closest(".coupon-container").children(".discountPerc"),f=$(this).parent().closest(".coupon-container").children(".validityHour"),n=r.val(),t=f.val(),i;n&&t||bootbox.alert("<h4>Please set the parameter!<\/h4>",function(){});i=$(this).attr("userId");u(i,n,t)})}]);$(document).ready(function(){$("#findMember").click(function(){$("#name").text("");$("#phone").text("");$("#gender").text("");var n=$("#emailPhone").val();$.ajax({dataType:"json",url:"/Account/GetUserInformation?emailPhone="+n,success:function(n){n&&($("#memberId").text(n.UserId),$("#name").text(n.Name),$("#phone").text(n.Mobile),$("#email").text(n.Email),$("#gender").text(n.Gender),$("#username").text(n.Username),$("#password").text(n.Password),$("#status").text(n.Status),$("#profile-details").prop("href","/search/profile/?id="+n.UserId))},error:function(){}})});$("#makePaidMember").click(function(){var t=$("#membershipPlan").val(),n=$("#memberId").text();n?$.ajax({dataType:"json",url:"/Admin/CreatePaidMembership",data:{userId:n,planId:t},success:function(n){n.IsSuccess?(bootbox.alert("<h4>Subscription has been completed successfully<\/h4>",function(){}),$("#emailPhone").val(""),$("#memberId").text(""),$("#name").text(""),$("#phone").text(""),$("#gender").text("")):bootbox.alert("<h4>Failed to subscribe user<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured!<\/h4>",function(){})}}):bootbox.alert("<h4>Please choose the member to update as Paid Member!<\/h4>",function(){})});$("#btnDeleteMember").click(function(){var n=$("#memberId").text();n?bootbox.confirm("<h4>Are you sure to delete this member?<\/h4>",function(t){t&&$.ajax({dataType:"json",url:"/Admin/DeleteUser",data:{userId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>Member has been deleted successfully<\/h4>",function(){}),$("#emailPhone").val(""),$("#memberId").text(""),$("#name").text(""),$("#phone").text(""),$("#gender").text("")):bootbox.alert("<h4>Failed to delete the user<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured!<\/h4>",function(){})}})}):bootbox.alert("<h4>Please choose the member to delete!<\/h4>",function(){})});$("#btnActivateMember").click(function(){var n=$("#memberId").text();n?bootbox.confirm("<h4>Are you sure to activate this member?<\/h4>",function(t){t&&$.ajax({dataType:"json",url:"/Admin/ActiveUser",data:{userId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>Member has been activated successfully<\/h4>",function(){}),$("#emailPhone").val(""),$("#memberId").text(""),$("#name").text(""),$("#phone").text(""),$("#gender").text("")):bootbox.alert("<h4>Failed to activate the user<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured!<\/h4>",function(){})}})}):bootbox.alert("<h4>Please choose the member to active!<\/h4>",function(){})})});app.factory("receiveMsgStatusListService",["$http",function(){}]);app.controller("ReceiveMsgStatusListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","receiveMsgStatusListService",function(){function t(n){$(".loader").show();$.ajax({dataType:"json",url:"/Admin/GetReceivedMessageStatus",success:function(t){var u=[],i,r;if(t&&t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].ToUserId),r.push(t[i].Name),r.push(t[i].Mobile),r.push(t[i].FromUserId),r.push(t[i].From_Name),r.push(t[i].From_Mobile),r.push(t[i].ViewStatus),r.push(t[i].ReplyStatus),r.push(t[i].CallCount),r.push(t[i].DialCount),r.push(t[i].CreateDateString),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function i(n,t){$.ajax({dataType:"json",url:"/Campaign/AddCallCount",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to save phone call record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while saving phone call record!<\/h4>",function(){})}})}function n(n,t){$.ajax({dataType:"json",url:"/Campaign/AddDialCount",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to save phone dial record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while saving phone dial record!<\/h4>",function(){})}})}function r(n,t){$.ajax({dataType:"json",url:"/Security/SendUsernamePassword",data:{userId:n},success:function(n){n.isSuccess?(bootbox.alert("<h4>Username and Password send successfully!<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to send password!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while sending password!<\/h4>",function(){})}})}function u(t,i){$.ajax({dataType:"json",url:"/Security/SendReceivedMessageNotification",data:{userId:t},success:function(r){r.isSuccess?(n(t,function(){}),bootbox.alert("<h4>Notification send successfully!<\/h4>",function(){}),i()):bootbox.alert("<h4>Failed to send notification!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while sending notification!<\/h4>",function(){})}})}t(function(n){$("#data-table-receive-msg-status-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,order:[],columns:[{title:"ToUserId"},{title:"To Name"},{title:"To Mobile"},{title:"FromUserId"},{title:"From Name"},{title:"From Mobile"},{title:"Viewd","class":"center"},{title:"Replied","class":"center"},{title:"Call","class":"center"},{title:"Dial / Notify","class":"center"},{title:"Date"},{title:"Call","class":"center action-btn-call"},{title:"Dial","class":"center action-btn-dial"},{title:"Send Pass","class":"center action-btn-sendPass"},{title:"Notify","class":"center action-btn-notify"}],aoColumnDefs:[{aTargets:[0,3],visible:!1},{aTargets:[1],mRender:function(n,t,i){var r='<a target="_blank" href=/search/profile/?id='+i[0]+"><b>"+i[1]+"<\/b><\/a>";return $("<div/>").append(r).html()}},{aTargets:[2],mRender:function(n,t,i){var r="<span><b>"+i[2]+"<\/b><\/span>";return $("<div/>").append(r).html()}},{aTargets:[4],mRender:function(n,t,i){var r='<a target="_blank" href=/search/profile/?id='+i[3]+">"+i[4]+"<\/a>";return $("<div/>").append(r).html()}},{aTargets:[6],mRender:function(n,t,i){var u=i[6],r;return u==="Viewed"?(r='<span class="message-list-seen">Viewed<\/span>',$("<div/>").append(r).html()):(r='<span class="message-list-notseen">Not Viewed<\/span>',$("<div/>").append(r).html())}},{aTargets:[7],mRender:function(n,t,i){var u=i[7],r;return u==="Replied"?(r='<span class="message-list-seen">Replied<\/span>',$("<div/>").append(r).html()):(r='<span class="message-list-notseen">Not Replied<\/span>',$("<div/>").append(r).html())}},{aTargets:[8],mRender:function(n,t,i){var r="",u;return r=i[8]?i[8]:"0",u='<span class="td-phone-call" title='+r+">"+r+"<\/span>",$("<div/>").append(u).html()}},{aTargets:[9],mRender:function(n,t,i){var r="",u;return r=i[9]?i[9]:"0",u='<span class="td-phone-dial" title='+r+">"+r+"<\/span>",$("<div/>").append(u).html()}},{aTargets:[11],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Phone call" id='+i[0]+' class="phoneCall btn btn-primary cursor-pointer" >Call<\/button>';return $("<div/>").append(r).html()}},{aTargets:[12],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Phone dial" id='+i[0]+' class="phoneDial btn btn-warning cursor-pointer" >Dial<\/button>';return $("<div/>").append(r).html()}},{aTargets:[13],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Send Password" id='+i[0]+' class="sendPassword btn btn-success cursor-pointer" >Send Pass<\/button>';return $("<div/>").append(r).html()}},{aTargets:[14],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Notify" id='+i[0]+' class="notify btn btn-info cursor-pointer" >Notify<\/button>';return $("<div/>").append(r).html()}}]})});$("#data-table-receive-msg-status-list").on("click",".phoneCall",function(){var u=$(this).attr("id"),f=$(this).closest("tr"),n=$(f),t=$(".td-phone-call",n).html(),r;t&&(r=parseInt(t,10)+1,$(".td-phone-call",n).text(r));i(u,function(){})});$("#data-table-receive-msg-status-list").on("click",".phoneDial",function(){var u=$(this).attr("id"),f=$(this).closest("tr"),t=$(f),i=$(".td-phone-dial",t).html(),r;i&&(r=parseInt(i,10)+1,$(".td-phone-dial",t).text(r));n(u,function(){})});$("#data-table-receive-msg-status-list").on("click",".sendMessage",function(){var t=$(this).attr("id"),n=$(this).attr("email");$("#email").val(n);window.userId=t;window.email=n;window.currentTr=$(this).closest("tr");$("#notifyModal").modal()});$("#data-table-receive-msg-status-list").on("click",".sendPassword",function(){var n=$(this).attr("id");r(n,function(){})});$("#data-table-receive-msg-status-list").on("click",".notify",function(){var n=$(this).attr("id");u(n,function(){})});$("#btnBlockUser").click(function(){var n=window.userId,t=window.currentTr;bootbox.confirm("<h4>Are you sure to block this profile?<\/h4>",function(i){i&&blockProfile(n,function(){$(t).remove()})})});$("#btnSendEmail").click(function(){var n=$("#email").val(),t=$("#emailSubject").val(),i=$("#emailBody").val();bootbox.confirm("<h3>Are you sure to send this message?<\/h3>",function(r){r&&($(".modal-loader").show(),$.ajax({dataType:"json",url:"/Notification/SendEmail",data:{sendTo:"updaterequest",specificEmailList:n,subject:t,message:i,lastLoginDay:0},success:function(){bootbox.alert("<h4>Message send successfully<\/h4>",function(){});$(".modal-loader").hide();callback(dataSet)},error:function(){$(".modal-loader").hide();bootbox.alert("<h4>Failed to send message<\/h4>",function(){})}}))})})}]);app.factory("adminSearchMemberService",["$http",function(){}]);app.controller("AdminSearchMemberCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","adminSearchMemberService",function(){function n(n){$("#data-table-admin-search-member").dataTable({data:n,bLengthChange:!1,paging:!1,searching:!1,bDestroy:!0,bFilter:!0,pageLength:100,order:[[5,"desc"]],columns:[{title:"Id"},{title:"Name"},{title:"Gender"},{title:"Mobile"},{title:"Myself"},{title:"Register"},{title:"Send Pass","class":"center action-btn-sendPass"}],aoColumnDefs:[{aTargets:[0],visible:!1},{aTargets:[1],mRender:function(n,t,i){var r='<a target="_blank" href=/search/profile/?id='+i[0]+"&email="+i[6]+">"+i[1]+"<\/a>";return $("<div/>").append(r).html()}},{aTargets:[4],mRender:function(n,t,i){var r="<span title="+i[4]+">"+i[4]+"<\/span>";return $("<div/>").append(r).html()}},{aTargets:[6],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Send Password" id='+i[0]+' class="sendPassword btn btn-success cursor-pointer" >Send Pass<\/button>';return $("<div/>").append(r).html()}}]})}function t(n,t){$.ajax({dataType:"json",url:"/Security/SendUsernamePassword",data:{userId:n},success:function(n){n.isSuccess?(bootbox.alert("<h4>Username and Password send successfully!<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to send password!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while sending password!<\/h4>",function(){})}})}$("#data-table-admin-search-member").on("click",".sendPassword",function(){var n=$(this).attr("id");t(n,function(){})});$("#ddlSearchField").multiselect({includeSelectAllOption:!0,nonSelectedText:"All",buttonWidth:"150px",dropRight:!0});$("#findMember").click(function(){var t="",r=$("#ddlSearchField option:selected"),i;r.each(function(){var n=$(this).val();t+=$(this).val()+","});i=$("#searchText").val();$.ajax({dataType:"json",url:"/Account/GetUserProfileList?searchFields="+t+"&searchText="+i,success:function(t){var u,i,r;if(t){if(u=[],t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].UserId),r.push(t[i].Name),r.push(t[i].Gender),r.push(t[i].Mobile),r.push(t[i].AboutMyself),r.push(t[i].RegistrationDate),u.push(r);n(u)}},error:function(){}})});$("#btnActivateMember").click(function(){var n=$("#memberId").text();n?bootbox.confirm("<h4>Are you sure to activate this member?<\/h4>",function(t){t&&$.ajax({dataType:"json",url:"/Admin/ActiveUser",data:{userId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>Member has been activated successfully<\/h4>",function(){}),$("#emailPhone").val(""),$("#memberId").text(""),$("#name").text(""),$("#phone").text(""),$("#gender").text("")):bootbox.alert("<h4>Failed to activate the user<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured!<\/h4>",function(){})}})}):bootbox.alert("<h4>Please choose the member to active!<\/h4>",function(){})})}]);app.factory("AboutMyselfVerifyService",["$http",function(){}]);app.controller("AboutMyselfVerifyCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","AboutMyselfVerifyService",function(){function n(n,t){$.ajax({dataType:"json",url:"/Campaign/AddCallCount",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to save phone call record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while saving phone call record!<\/h4>",function(){})}})}function t(n,t){$.ajax({dataType:"json",url:"/Campaign/AddDialCount",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to save phone dial record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while saving phone dial record!<\/h4>",function(){})}})}function i(n){$(".loader").show();$.ajax({dataType:"json",url:"/Admin/GetUpdateAboutMyselfList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].UserId),r.push(t[i].AboutMyself),r.push(t[i].Gender),r.push(t[i].Mobile),r.push(t[i].ProfileBy),r.push(t[i].IsMobileVerified),r.push(t[i].CallCount),r.push(t[i].DialCount),r.push(t[i].RegistrationDate),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function r(n,t){$.ajax({dataType:"json",url:"/Admin/DeclineMyself",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting user!<\/h4>",function(){})}})}function u(n,t){$.ajax({dataType:"json",url:"/Admin/BlockUser",data:{userId:n},success:function(n){n.IsSuccess?(bootbox.alert("<h4>User has been blocked sucessfully<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to block user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while block user!<\/h4>",function(){})}})}function f(n,t){$.ajax({dataType:"json",url:"/Admin/ApproveMyself",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to approve user!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while approving user!<\/h4>",function(){})}})}i(function(n){$("#data-table-about-myself-verify-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,order:[[8,"desc"]],columns:[{title:"Id"},{title:"About Myself"},{title:"Gender"},{title:"Mobile"},{title:"Created"},{title:"Verified","class":"center"},{title:"Call","class":"center"},{title:"Dial","class":"center"},{title:"Date"},{title:"Call"},{title:"Dial"},{title:"Apr","class":"center action-btn-container"},{title:"Dec","class":"center action-btn-container"}],aoColumnDefs:[{aTargets:[0,2,4,5,6,7,9,10],visible:!1},{aTargets:[1],mRender:function(n,t,i){var u=$(this).closest("tr"),r;return u.remove(),r='<a class="navigateDetailPage" title="'+i[8]+'" id='+i[0]+" email="+i[7]+">"+i[1]+"<\/a>",$("<div/>").append(r).html()}},{aTargets:[5],sortable:!1,mRender:function(n,t,i){var r="";return r=i[5]?'<i class="icon-check-1" style="color:green;font-weight:600; font-size:15px;"><\/i>':'<i class="glyphicon glyphicon-remove" style="color:#555;"><\/i>',$("<div/>").append(r).html()}},{aTargets:[6],mRender:function(n,t,i){var r="",u;return r=i[6]?i[6]:"0",u='<span class="td-phone-call" title='+r+">"+r+"<\/span>",$("<div/>").append(u).html()}},{aTargets:[7],mRender:function(n,t,i){var r="",u;return r=i[7]?i[7]:"0",u='<span class="td-phone-dial" title='+r+">"+r+"<\/span>",$("<div/>").append(u).html()}},{aTargets:[9],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Phone call" id='+i[0]+' class="phoneCall btn btn-primary cursor-pointer" >Call<\/button>';return $("<div/>").append(r).html()}},{aTargets:[10],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Phone dial" id='+i[0]+' class="phoneDial btn btn-warning cursor-pointer" >Dial<\/button>';return $("<div/>").append(r).html()}},{aTargets:[11],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Verify Profile" id='+i[0]+' class="approveMyself btn btn-success cursor-pointer" >Apv<\/button>';return $("<div/>").append(r).html()}},{aTargets:[12],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Delete Profile" id='+i[0]+' class="declineMyself btn btn-danger cursor-pointer">Dec<\/button>';return $("<div/>").append(r).html()}}]})});$("#data-table-about-myself-verify-list").on("click",".phoneCall",function(){var u=$(this).attr("id"),f=$(this).closest("tr"),t=$(f),i=$(".td-phone-call",t).html(),r;i&&(r=parseInt(i,10)+1,$(".td-phone-call",t).text(r));n(u,function(){})});$("#data-table-about-myself-verify-list").on("click",".phoneDial",function(){var u=$(this).attr("id"),f=$(this).closest("tr"),n=$(f),i=$(".td-phone-dial",n).html(),r;i&&(r=parseInt(i,10)+1,$(".td-phone-dial",n).text(r));t(u,function(){})});$("#data-table-about-myself-verify-list").on("click",".declineMyself",function(){var n=$(this).attr("id"),t=$(this).closest("tr");r(n,function(){$(t).remove()})});$("#data-table-about-myself-verify-list").on("click",".approveMyself",function(){var n=$(this).attr("id"),t=$(this).closest("tr");f(n,function(){$(t).remove()})});$("#data-table-about-myself-verify-list").on("click",".sendMessage",function(){var t=$(this).attr("id"),n=$(this).attr("email");$("#email").val(n);window.userId=t;window.email=n;window.currentTr=$(this).closest("tr");$("#notifyModal").modal()});$("#data-table-about-myself-verify-list").on("click",".navigateDetailPage",function(){var n=$(this).attr("id"),t=$(this).attr("email"),i=$(this).closest("tr");$(i).css("background-color","#A2D9CE");window.open("/search/profile/?id="+n+"&email="+t,"_blank")});$("#btnBlockUser").click(function(){var n=window.userId,t=window.currentTr;bootbox.confirm("<h4>Are you sure to block this profile?<\/h4>",function(i){i&&u(n,function(){$(t).remove()})})});$("#btnSendEmail").click(function(){var n=$("#email").val(),t=$("#emailSubject").val(),i=$("#emailBody").val();bootbox.confirm("<h3>Are you sure to send this message?<\/h3>",function(r){r&&($(".modal-loader").show(),$.ajax({dataType:"json",url:"/Notification/SendEmail",data:{sendTo:"updaterequest",specificEmailList:n,subject:t,message:i,lastLoginDay:0},success:function(){bootbox.alert("<h4>Message send successfully<\/h4>",function(){});$(".modal-loader").hide();callback(dataSet)},error:function(){$(".modal-loader").hide();bootbox.alert("<h4>Failed to send message<\/h4>",function(){})}}))})})}]);app.factory("educationDetailsVerifyService",["$http",function(){}]);app.controller("EducationDetailsVerifyCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","educationDetailsVerifyService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/Admin/GetUpdatedEducationDetailList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].UserId),r.push(t[i].EducationDetails),r.push(t[i].Mobile),r.push(t[i].Modified),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/Admin/DeclineEducationDetails",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting record!<\/h4>",function(){})}})}function i(n,t){$.ajax({dataType:"json",url:"/Admin/ApproveEducationDetails",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to approve!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while approving!<\/h4>",function(){})}})}n(function(n){$("#data-table-educationdetails-verify-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,order:[[3,"desc"]],columns:[{title:"Id"},{title:"Education Details"},{title:"Mobile"},{title:"Modified"},{title:"Apr","class":"center action-btn-container"},{title:"Dec","class":"center action-btn-container"}],aoColumnDefs:[{aTargets:[0],visible:!1},{aTargets:[1],mRender:function(n,t,i){var u=$(this).closest("tr"),r;return u.remove(),r='<a class="navigateDetailPage" id='+i[0]+">"+i[1]+"<\/a>",$("<div/>").append(r).html()}},{aTargets:[3],render:function(n){return moment(n,"x").format("DD MMM YYYY h:mm:ss a")}},{aTargets:[4],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Verify Profile" id='+i[0]+' class="approveUpdate btn btn-success cursor-pointer" >Apv<\/button>';return $("<div/>").append(r).html()}},{aTargets:[5],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Delete Profile" id='+i[0]+' class="declineUpdate btn btn-danger cursor-pointer">Dec<\/button>';return $("<div/>").append(r).html()}}]})});$("#data-table-educationdetails-verify-list").on("click",".declineUpdate",function(){var n=$(this).attr("id"),i=$(this).closest("tr");t(n,function(){$(i).remove()})});$("#data-table-educationdetails-verify-list").on("click",".approveUpdate",function(){var n=$(this).attr("id"),t=$(this).closest("tr");i(n,function(){$(t).remove()})});$("#data-table-educationdetails-verify-list").on("click",".navigateDetailPage",function(){var n=$(this).attr("id"),t=$(this).attr("email"),i=$(this).closest("tr");$(i).css("background-color","#A2D9CE");window.open("/search/profile/?id="+n+"&email="+t,"_blank")})}]);app.factory("familyDetailsVerifyService",["$http",function(){}]);app.controller("FamilyDetailsVerifyCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","familyDetailsVerifyService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/Admin/GetUpdatedFamilyDetailList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].UserId),r.push(t[i].FamilyDetails),r.push(t[i].Mobile),r.push(t[i].Modified),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/Admin/DeclineFamilyDetails",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting record!<\/h4>",function(){})}})}function i(n,t){$.ajax({dataType:"json",url:"/Admin/ApproveFamilyDetails",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to approve!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while approving!<\/h4>",function(){})}})}n(function(n){$("#data-table-familydetails-verify-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,order:[[3,"desc"]],columns:[{title:"Id"},{title:"Family Details"},{title:"Mobile"},{title:"Modified"},{title:"Apr","class":"center action-btn-container"},{title:"Dec","class":"center action-btn-container"}],aoColumnDefs:[{aTargets:[0],visible:!1},{aTargets:[1],mRender:function(n,t,i){var u=$(this).closest("tr"),r;return u.remove(),r='<a class="navigateDetailPage" id='+i[0]+">"+i[1]+"<\/a>",$("<div/>").append(r).html()}},{aTargets:[3],render:function(n){return moment(n,"x").format("DD MMM YYYY h:mm:ss a")}},{aTargets:[4],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Verify Profile" id='+i[0]+' class="approveUpdate btn btn-success cursor-pointer" >Apv<\/button>';return $("<div/>").append(r).html()}},{aTargets:[5],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Delete Profile" id='+i[0]+' class="declineUpdate btn btn-danger cursor-pointer">Dec<\/button>';return $("<div/>").append(r).html()}}]})});$("#data-table-familydetails-verify-list").on("click",".declineUpdate",function(){var n=$(this).attr("id"),i=$(this).closest("tr");t(n,function(){$(i).remove()})});$("#data-table-familydetails-verify-list").on("click",".approveUpdate",function(){var n=$(this).attr("id"),t=$(this).closest("tr");i(n,function(){$(t).remove()})});$("#data-table-familydetails-verify-list").on("click",".navigateDetailPage",function(){var n=$(this).attr("id"),t=$(this).attr("email"),i=$(this).closest("tr");$(i).css("background-color","#A2D9CE");window.open("/search/profile/?id="+n+"&email="+t,"_blank")})}]);app.factory("professionalDetailsVerifyService",["$http",function(){}]);app.controller("ProfessionalDetailsVerifyCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","professionalDetailsVerifyService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/Admin/GetUpdatedProfessionDetailList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].UserId),r.push(t[i].ProfessionDetails),r.push(t[i].Mobile),r.push(t[i].Modified),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/Admin/DeclineProfessionDetails",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting record!<\/h4>",function(){})}})}function i(n,t){$.ajax({dataType:"json",url:"/Admin/ApproveProfessionDetails",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to approve!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while approving!<\/h4>",function(){})}})}n(function(n){$("#data-table-professionaldetails-verify-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,order:[[3,"desc"]],columns:[{title:"Id"},{title:"Profession Details"},{title:"Mobile"},{title:"Modified"},{title:"Apr","class":"center action-btn-container"},{title:"Dec","class":"center action-btn-container"}],aoColumnDefs:[{aTargets:[0],visible:!1},{aTargets:[1],mRender:function(n,t,i){var u=$(this).closest("tr"),r;return u.remove(),r='<a class="navigateDetailPage" id='+i[0]+">"+i[1]+"<\/a>",$("<div/>").append(r).html()}},{aTargets:[3],render:function(n){return moment(n,"x").format("DD MMM YYYY h:mm:ss a")}},{aTargets:[4],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Verify Profile" id='+i[0]+' class="approveUpdate btn btn-success cursor-pointer" >Apv<\/button>';return $("<div/>").append(r).html()}},{aTargets:[5],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Delete Profile" id='+i[0]+' class="declineUpdate btn btn-danger cursor-pointer">Dec<\/button>';return $("<div/>").append(r).html()}}]})});$("#data-table-professionaldetails-verify-list").on("click",".declineUpdate",function(){var n=$(this).attr("id"),i=$(this).closest("tr");t(n,function(){$(i).remove()})});$("#data-table-professionaldetails-verify-list").on("click",".approveUpdate",function(){var n=$(this).attr("id"),t=$(this).closest("tr");i(n,function(){$(t).remove()})});$("#data-table-professionaldetails-verify-list").on("click",".navigateDetailPage",function(){var n=$(this).attr("id"),t=$(this).attr("email"),i=$(this).closest("tr");$(i).css("background-color","#A2D9CE");window.open("/search/profile/?id="+n+"&email="+t,"_blank")})}]);app.factory("physicalAttrDetailsService",["$http",function(){}]);app.controller("PhysicalAttrDetailsCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","physicalAttrDetailsService",function(){function n(n){$(".loader").show();$.ajax({dataType:"json",url:"/Admin/GetUpdatedPhysicalAttributeDetailList",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].UserId),r.push(t[i].PhysicalAttributeDetails),r.push(t[i].Mobile),r.push(t[i].Modified),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function t(n,t){$.ajax({dataType:"json",url:"/Admin/DeclinePhysicalAttrDetails",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to delete record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while deleting record!<\/h4>",function(){})}})}function i(n,t){$.ajax({dataType:"json",url:"/Admin/ApprovePhysicalAttrDetails",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to approve!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while approving!<\/h4>",function(){})}})}n(function(n){$("#data-table-physicalattr-verify-list").dataTable({data:n,bLengthChange:!1,bFilter:!0,pageLength:100,order:[[3,"desc"]],columns:[{title:"Id"},{title:"Physical Attr Details"},{title:"Mobile"},{title:"Modified"},{title:"Apr","class":"center action-btn-container"},{title:"Dec","class":"center action-btn-container"}],aoColumnDefs:[{aTargets:[0],visible:!1},{aTargets:[1],mRender:function(n,t,i){var u=$(this).closest("tr"),r;return u.remove(),r='<a class="navigateDetailPage" id='+i[0]+">"+i[1]+"<\/a>",$("<div/>").append(r).html()}},{aTargets:[3],render:function(n){return moment(n,"x").format("DD MMM YYYY h:mm:ss a")}},{aTargets:[4],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Verify Profile" id='+i[0]+' class="approveUpdate btn btn-success cursor-pointer" >Apv<\/button>';return $("<div/>").append(r).html()}},{aTargets:[5],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Delete Profile" id='+i[0]+' class="declineUpdate btn btn-danger cursor-pointer">Dec<\/button>';return $("<div/>").append(r).html()}}]})});$("#data-table-physicalattr-verify-list").on("click",".declineUpdate",function(){var n=$(this).attr("id"),i=$(this).closest("tr");t(n,function(){$(i).remove()})});$("#data-table-physicalattr-verify-list").on("click",".approveUpdate",function(){var n=$(this).attr("id"),t=$(this).closest("tr");i(n,function(){$(t).remove()})});$("#data-table-physicalattr-verify-list").on("click",".navigateDetailPage",function(){var n=$(this).attr("id"),t=$(this).attr("email"),i=$(this).closest("tr");$(i).css("background-color","#A2D9CE");window.open("/search/profile/?id="+n+"&email="+t,"_blank")})}]);app.factory("adminDailyStatsService",["$http",function(){}]);app.controller("AdminDailyStatsCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","adminDailyStatsService",function(){function i(n){$.ajax({dataType:"json",url:"/Admin/GetDaywiseApprove",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].Date),r.push(t[i].TotalProfile),r.push(t[i].TotalVerified),r.push(t[i].TotalDeleted),r.push(t[i].TotalPending),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function r(n){$.ajax({dataType:"json",url:"/Admin/GetDaywise_Male_Female_Approve",success:function(t){var u=[],i,r;if(t.length>0)for(i=0;i<t.length;i++)r=[],r.push(t[i].Date),r.push(t[i].TotalMaleVerified),r.push(t[i].TotalFemaleVerified),u.push(r);$(".loader").hide();n(u)},error:function(){$(".loader").hide()}})}function n(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t][0]);return i}function t(n){for(var i=[],t=0;t<n.length;t++)parseInt(n[t][2],10)>0&&i.push(n[t][2]);return i}function u(n){for(var i=[],t=0;t<n.length;t++)parseInt(n[t][3],10)>0&&i.push(n[t][3]);return i}function f(n){for(var i=[],t=0;t<n.length;t++)parseInt(n[t][4],10)>0&&i.push(n[t][4]);return i}function e(n){for(var i=[],t=0;t<n.length;t++)parseInt(n[t][1],10)>0&&i.push(n[t][1]);return i}function o(n){for(var i=[],t=0;t<n.length;t++)parseInt(n[t][2],10)>0&&i.push(n[t][2]);return i}$(".loader").show();i(function(i){for(var r=[],e=0;e<i.length;e++)e<7&&r.push(i[e]);$("#profile-stats-30days").highcharts({chart:{type:"column"},title:{text:"Last 30 Days Profile Approved Status"},xAxis:{categories:n(i)},yAxis:{min:0,title:{text:"Profile Status"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}<\/span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: <\/td><td style="padding:0"><b>{point.y}<\/b><\/td><\/tr>',footerFormat:"<\/table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0,dataLabels:{enabled:!0}}},series:[{name:"Total Approved",color:"#3D3C98",data:t(i)}]});$("#profile-stats-7days").highcharts({chart:{type:"column"},title:{text:"Last 7 Days Details Profile Status"},xAxis:{categories:n(r)},yAxis:{min:0,title:{text:"Profile Status"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}},tooltip:{headerFormat:"<b>{point.x}<\/b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}}},series:[{name:"Total Approved",color:"#1E8449",data:t(r)},{name:"Total Pending",color:"#FFFF00",data:f(r)},{name:"Total Deleted",color:"#FF0000",data:u(r)}]})});r(function(t){$("#profile-stats-male-female-10days").highcharts({chart:{type:"column"},title:{text:"Last 10 Days Male / Female Profile Status"},xAxis:{categories:n(t)},yAxis:{min:0,title:{text:"Profile Status"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}},tooltip:{headerFormat:"<b>{point.x}<\/b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}}},series:[{name:"Total Male Approved",color:"#3700B3",data:e(t)},{name:"Total Female Approved",color:"#FF0266",data:o(t)}]})})}]);app.factory("campaignNotificationService",["$http",function(){}]);app.controller("CampaignNotificationCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","campaignNotificationService",function(){function n(n){var t=$("#onlyEmail").is(":checked"),r=$("#txtLastLoginBefore").val(),i="";i=n==="SendLastLoginBefore"?"?isOnlyEmail="+t+"&lastLoginBefore="+r:"?isOnlyEmail="+t;$(".btn-notification").prop("disabled",!0);$("#notification-sending-loader").show();$.ajax({dataType:"json",url:"/Campaign/"+n+i,success:function(n){n.IsSuccess?bootbox.alert("<h4>Notification has been delivered successfully!<\/h4>",function(){}):bootbox.alert("<h4>Failed to deliver notification!<\/h4>",function(){});$(".btn-notification").prop("disabled",!1);$("#notification-sending-loader").hide()},error:function(){bootbox.alert("<h4>Error occured while delivering Notification!<\/h4>",function(){});$(".btn-notification").prop("disabled",!1);$("#notification-sending-loader").hide()}})}$("#btnSendViewCount").click(function(){bootbox.confirm("<h4>Are you sure to send view count notification?<\/h4>",function(t){t&&n("SendViewCount")})});$("#btnSendBirthdayWish").click(function(){bootbox.confirm("<h4>Are you sure to send birthday wish notification?<\/h4>",function(t){t&&n("SendBirthdayWish")})});$("#btnSendLastLoginBefore").click(function(){bootbox.confirm("<h4>Are you sure to send last login notification?<\/h4>",function(t){t&&n("SendLastLoginBefore")})})}]);app.factory("campaignMemberService",["$http",function(){}]);app.controller("CampaignMemberCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","campaignMemberService",function(){function t(n){$("#data-table-campaign-member").dataTable({data:n,bLengthChange:!0,paging:!0,searching:!0,bDestroy:!0,bFilter:!0,pageLength:10,order:[[6,"desc"]],columns:[{title:"Id"},{title:"Name"},{title:"Gender"},{title:"Mobile"},{title:"Call","class":"center"},{title:"Dial","class":"center"},{title:"Register"},{title:"Call Count","class":"center action-btn-container"},{title:"Dial Count","class":"center action-btn-container"},{title:"Send Pass","class":"center action-btn-sendPass"},{title:"Send Coupon","class":"center action-btn-sendPass"}],aoColumnDefs:[{aTargets:[0],visible:!1},{aTargets:[1],mRender:function(n,t,i){var r='<a target="_blank" href="/search/profile?id='+i[0]+"&email="+i[6]+'">'+i[1]+"<\/a>";return $("<div/>").append(r).html()}},{aTargets:[4],mRender:function(n,t,i){var r="",u;return r=i[4]?i[4]:"0",u='<span class="td-phone-call" title='+r+">"+r+"<\/span>",$("<div/>").append(u).html()}},{aTargets:[5],mRender:function(n,t,i){var r="",u;return r=i[5]?i[5]:"0",u='<span class="td-phone-dial" title='+r+">"+r+"<\/span>",$("<div/>").append(u).html()}},{aTargets:[6],render:function(n){var t=moment(n).format("DD MMM YYYY"),i='<span title="'+t+'">'+t+"<\/span>";return $("<div/>").append(i).html()}},{aTargets:[7],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Phone call" id='+i[0]+' class="phoneCall btn btn-primary cursor-pointer" >Call<\/button>';return $("<div/>").append(r).html()}},{aTargets:[8],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Phone dial" id='+i[0]+' class="phoneDial btn btn-warning cursor-pointer" >Dial<\/button>';return $("<div/>").append(r).html()}},{aTargets:[9],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="Send Password" id='+i[0]+' class="sendPassword btn btn-success cursor-pointer" >Send Pass<\/button>';return $("<div/>").append(r).html()}},{aTargets:[10],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<div class="coupon-container" style="width:250px;"><input class="discountPerc" placeholder="%" style="text-align:center;width:50px;height: 33px;position: relative;top: 2px;" value="50" />  <input placeholder="hour" class="validityHour" style="text-align:center;width:50px;height: 33px;position: relative;top: 2px;" value="72" /><button userId='+i[0]+' style="margin-left:5px;" class="sendCoupon btn btn-success cursor-pointer">Send Coupon<\/button><\/div>';return $("<div/>").append(r).html()}}]})}function n(){var t="",i=$("#ddlEducation option:selected");i.each(function(){var n=$(this).val();t+=$(this).val()+","});var r=$("input[name='Gender']:checked").val(),u=$("input[name='MaritalStatus']:checked").val(),f=$("input[name='MemberType']:checked").val(),e=$("#txtCreatedBeforeFrom").val(),o=$("#txtCreatedBeforeTo").val(),s=$("#txtPaidMemberExpiresFrom").val(),h=$("#txtPaidMemberExpiresTo").val(),c=$("#txtPaidMemberStartFrom").val(),l=$("#txtPaidMemberStartTo").val(),a=$("#ageFrom").val(),v=$("#ageTo").val(),n=0;return $("#rankALL").is(":checked")?n=0:$("#rank1").is(":checked")?n=1:$("#rank2").is(":checked")?n=2:$("#rank3").is(":checked")?n=3:$("#rank4").is(":checked")?n=4:$("#rank5").is(":checked")&&(n=5),"?gender="+r+"&rank="+n+"&maritalStatus="+u+"&memberType="+f+"&accountCreatedBeforeFrom="+e+"&accountCreatedBeforeTo="+o+"&paidMembershipStartFrom="+c+"&paidMembershipStartTo="+l+"&paidMemberExpiresFrom="+s+"&paidMemberExpiresTo="+h+"&ageFrom="+a+"&ageTo="+v+"&educations="+t}function i(n,t){$.ajax({dataType:"json",url:"/Campaign/AddCallCount",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to save phone call record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while saving phone call record!<\/h4>",function(){})}})}function r(n,t){$.ajax({dataType:"json",url:"/Campaign/AddDialCount",data:{userId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to save phone dial record!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while saving phone dial record!<\/h4>",function(){})}})}function u(n,t){$.ajax({dataType:"json",url:"/Security/SendUsernamePassword",data:{userId:n},success:function(n){n.isSuccess?(bootbox.alert("<h4>Username and Password send successfully!<\/h4>",function(){}),t()):bootbox.alert("<h4>Failed to send password!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while sending password!<\/h4>",function(){})}})}function f(n,t,i){$.ajax({dataType:"json",url:"/Campaign/SendCoupon",data:{userId:n,couponPercentage:t,couponExpireInHour:i},success:function(n){n.IsSuccess?bootbox.alert("<h4>Coupon send successfully!<\/h4>",function(){}):bootbox.alert("<h4>Failed to send this coupon!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error occured while sending coupon!<\/h4>",function(){})}})}$("#data-table-campaign-member").on("click",".phoneCall",function(){var u=$(this).attr("id"),f=$(this).closest("tr"),n=$(f),t=$(".td-phone-call",n).html(),r;t&&(r=parseInt(t,10)+1,$(".td-phone-call",n).text(r));i(u,function(){})});$("#data-table-campaign-member").on("click",".phoneDial",function(){var u=$(this).attr("id"),f=$(this).closest("tr"),n=$(f),t=$(".td-phone-dial",n).html(),i;t&&(i=parseInt(t,10)+1,$(".td-phone-dial",n).text(i));r(u,function(){})});$("#data-table-campaign-member").on("click",".sendPassword",function(){var n=$(this).attr("id");u(n,function(){})});$("#data-table-campaign-member").on("click",".sendCoupon",function(){var r=$(this).parent().closest(".coupon-container").children(".discountPerc"),u=$(this).parent().closest(".coupon-container").children(".validityHour"),n=r.val(),t=u.val(),i;n&&t||bootbox.alert("<h4>Please set the parameter!<\/h4>",function(){});i=$(this).attr("userId");f(i,n,t)});$("#ddlEducation").multiselect({includeSelectAllOption:!0,nonSelectedText:"All",buttonWidth:"200px",dropRight:!0});$("input[type=radio][name=MemberType]").change(function(){this.value=="paid"?($("#tr-paid-member-expire").show(),$("#tr-paid-member-buy").show(),$("#txtCreatedBeforeFrom").val(0),$("#txtCreatedBeforeTo").val(30),$("#tr-account-created").hide()):($("#tr-paid-member-expire").hide(),$("#tr-paid-member-buy").hide(),$("#txtCreatedBeforeFrom").val(0),$("#txtCreatedBeforeTo").val(30),$("#tr-account-created").show())});$("#ckbAddCoupon").change(function(){$(this).is(":checked")?($("#txtDiscountPercentage").prop("disabled",!1),$("#txtExpireHour").prop("disabled",!1),$("#message-body").val($("#message-body").val()+" \nYour coupon: !COUPON!")):($("#txtDiscountPercentage").prop("disabled",!0),$("#txtExpireHour").prop("disabled",!0))});$("#findMember").click(function(){var i=n();$("#member-loader").show();$("#tbl-data-container").hide();$("#sms-container").hide();$("#notification-container").hide();$.ajax({dataType:"json",url:"/Campaign/GetUserProfileList"+i,success:function(n){var u,i,r;if(n){if(u=[],n.length>0)for(i=0;i<n.length;i++)r=[],r.push(n[i].UserId),r.push(n[i].Name),r.push(n[i].Gender),r.push(n[i].Mobile),r.push(n[i].CallCount),r.push(n[i].DialCount),r.push(n[i].Created),u.push(r);t(u)}$("#tbl-data-container").show();$("#sms-container").show();$("#notification-container").show();$("#member-loader").hide()},error:function(){$("#tbl-data-container").show();$("#sms-container").show();$("#notification-container").show();$("#member-loader").hide()}})});$("#btnSendCampaign").click(function(){if($("#ckbAddCoupon").is(":checked")&&$("#message-body").val().indexOf("!COUPON!")===-1){bootbox.alert("<h4>You must have to add !COUPON! in message body to replace the coupon code!<\/h4>",function(){});return}bootbox.confirm("<h4>Are you sure to send this campaign?<\/h4>",function(t){var i;if(t){var r=!1,u=$("#message-to").val(),f=$("#message-body").val(),e=$("#txtDiscountPercentage").val(),o=$("#txtExpireHour").val();r=$("#ckbAddCoupon").is(":checked")?!0:!1;$("#btnSendMessage").prop("disabled",!0);$("#campaign-sending-loader").show();i=n();i=i+"&testMobileEmail="+u+"&message="+f+"&isAddCoupon="+r+"&couponPercentage="+e+"&couponExpireInHour="+o;i=encodeURI(i);$.ajax({dataType:"json",url:"/Campaign/SendCampaign"+i,success:function(n){n.IsSuccess?bootbox.alert("<h4>Message has been delivered successfully!<\/h4>",function(){}):bootbox.alert("<h4>Failed to deliver message!<\/h4>",function(){});$("#btnSendMessage").prop("disabled",!1);$("#campaign-sending-loader").hide()},error:function(){bootbox.alert("<h4>Error occured while delivering message!<\/h4>",function(){});$("#btnSendMessage").prop("disabled",!1);$("#campaign-sending-loader").hide()}})}})})}]);app.factory("couponListService",["$http",function(){}]);app.controller("CouponListCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","couponListService",function(){function n(){$.ajax({dataType:"json",url:"/Campaign/GetCouponList",success:function(n){var u,i,r;if(n){if(u=[],n.length>0)for(i=0;i<n.length;i++)r=[],r.push(n[i].Id),r.push(n[i].Username),r.push(n[i].Code),r.push(n[i].PercentageDiscount),r.push(n[i].ExpireDate),r.push(n[i].IsUsed),u.push(r);t(u)}},error:function(){}})}function t(n){$("#data-table-coupon-list").dataTable({data:n,bLengthChange:!0,paging:!1,searching:!0,bDestroy:!0,bFilter:!0,pageLength:100,order:[[5,"desc"]],columns:[{title:"Id"},{title:"UserName"},{title:"Code"},{title:"Discount"},{title:"Expire Date"},{title:"Status"},{title:"Mark Used","class":"center action-btn-container"}],aoColumnDefs:[{aTargets:[0],visible:!1},{aTargets:[4],render:function(n){return moment(n,"x").format("DD MMM YYYY")}},{aTargets:[5],mRender:function(n,t,i){var u=!1,r;return i[5]&&(u=i[5]),r="",r=u?'<label class="td-coupon-status td-coupon-used"><\/label>':'<label class="td-coupon-status"><\/label>',$("<div/>").append(r).html()}},{aTargets:[6],searchable:!1,sortable:!1,mRender:function(n,t,i){var r='<button title="" id='+i[0]+' class="setUsed btn btn-primary cursor-pointer" >Used<\/button>';return $("<div/>").append(r).html()}}]})}function i(n,t){$.ajax({dataType:"json",url:"/Campaign/SetCouponUsed",data:{couponId:n},success:function(n){n.IsSuccess?t():bootbox.alert("<h4>Failed to mark coupon id as used!<\/h4>",function(){})},error:function(){bootbox.alert("<h4>Error: Failed to mark coupon id as used!<\/h4>",function(){})}})}n();$("#data-table-coupon-list").on("click",".setUsed",function(){var t=$(this).attr("id"),r=$(this).closest("tr"),u=$(r),n=$(".td-coupon-status",u);n&&$(n).addClass("td-coupon-used");i(t,function(){})})}]);app.factory("campaignLogService",["$http",function(){}]);app.controller("CampaignLogCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","campaignLogService",function(){function n(){$.ajax({dataType:"json",url:"/Campaign/GetCampaignLogs",success:function(n){var u,i,r;if(n){if(u=[],n.length>0)for(i=0;i<n.length;i++)r=[],r.push(n[i].Id),r.push(n[i].Target),r.push(n[i].SmsCount),r.push(n[i].EmailCount),r.push(n[i].Message),r.push(n[i].ActionDate),u.push(r);t(u)}},error:function(){}})}function t(n){$("#data-table-campaign-log").dataTable({data:n,bLengthChange:!1,paging:!1,searching:!0,bDestroy:!0,bFilter:!0,pageLength:100,order:[[5,"desc"]],columns:[{title:"Id"},{title:"Targets"},{title:"Sms Count"},{title:"Email Count"},{title:"Message"},{title:"Action Date"}],aoColumnDefs:[{aTargets:[0],visible:!1},{aTargets:[5],render:function(n){return moment(n,"x").format("DD MMM YYYY")}}]})}n()}]);"use strict";var ckOnlineStatus="ckOnlineStatus",ckChatUserName="ckChatUserName",ckChatWindow="ckChatWindow",ckIsPaidMember="ckIsPaidMember",connection=null,rightSideMaxChatUsers=50;$(function(){var n=appEnv(),t=n==="production"?"https://chathub.bdmarriage.com/chatHub":"http://localhost:22298/chatHub";connection=(new signalR.HubConnectionBuilder).withUrl(t).withAutomaticReconnect().build();connection.start().then(function(){var n=$.cookie(ckChatUserName);if(n&&n.toLowerCase().indexOf("approved")>=0){var t=!1,i=!1,r=$.cookie(ckOnlineStatus);r&&(r==="offline"?t=!0:r==="invisible"&&(i=!0));t?markMeOffline():i?markMeInvisible():markMeOnline();$(".chat-loader").show();connection.invoke("OnConnect",n,t,i).catch(function(n){return console.error(n.toString())})}}).catch(function(n){return console.error(n.toString())});connection.on("PeriodicUpdate",function(n){var t,r,u;for(i=0;i<window.chatUsers.length;i++)t=window.chatUsers[i].userId,r=n.find(n=>n.userId===t),r&&r.isOffline&&(u=$(".chat-online-status",$("#"+t)),u&&u.removeClass("online-mark").addClass("offline-mark"))});connection.on("MeConnected",function(n,t){var u,i,f;for(clearTimeout(window.chatDisconnect),$("#hdConnectionId").val(n),window.chatUsers=t,i=0;i<window.chatUsers.length;i++)AddUser(t[i].connectionId,t[i].chatUserName,t[i].isOffline,t[i].isInvisible);if($(".chat-loader").hide(),f=$.cookie(ckChatWindow),f&&(u=f.split(","),u&&u.length>0))for(i=0;i<u.length;i++)u[i]&&$("."+u[i]).click();if(f=$.cookie(ckChatWindow),f)for(i=0;i<window.chatUsers.length;i++){var o=window.chatUsers[i],r="msg_"+makeClassName(o.chatUserName),e=$.cookie(r);e=sessionStorage.getItem(r);e&&$("."+r).length>0&&($("."+r).append(e),o.isOffline&&setDisconnectMark(r),$("."+r).scrollTop($("."+r)[0].scrollHeight))}});connection.on("NewUserConnected",function(n,t,i,r,u){var e=!1,s=!0,h=$.cookie(ckChatUserName),f,c,o;h&&(s=h.indexOf("_male_")===-1?!1:!0,f=!0,f=i.indexOf("_male_")===-1?!1:!0,s?f||(e=!0):f&&(e=!0),c=$("#divChatUsers li").length,c<=rightSideMaxChatUsers&&e&&(window.chatUsers&&window.chatUsers.length>0&&(o=window.chatUsers.findIndex(function(n){return n.userId===t}),o!==-1&&window.chatUsers.splice(o,1)),window.chatUsers.push({connectionId:n,userId:t,chatUserName:i,isOffline:r,isInvisible:u}),AddUser(n,i,r,u)))});connection.on("ReceiveMessage",function(n,t,i,r,u){var h=getShortName(t),c=getCurrentTime(),f=getPrivateChatWindowId(t,i),s,o,u,l,y,e,p;$("#"+f).find("#typingIndicator").hide();$("#"+f).length==0?(s="",o=makeClassName(t),$("."+o).length>0&&(s=$("."+o).html(),$("."+o).closest(".chat-window").remove()),createPrivateChatWindow(n,f,t),s.indexOf('class="your-chat-msg"')!=-1&&$("#"+f).find(".messageArea").html(s)):o=u?makeClassName(i):makeClassName(t);u=!1;l=$.cookie(ckChatUserName);u=l.indexOf(t)===-1?!1:!0;var a=t.indexOf("_")+1,w=t.indexOf("_",t.indexOf("_")+1),b=w-a,v=t.substr(a,b);u?$("#"+f).find("#divMessage").append('<div class="message right"><div class="userName my-chat-name"><span class="avatar-time">'+c+'<\/span> <span class="avatar-name">'+h+'<\/span><img class="chat-pic-right" src="/Photos/Members/s25634/'+v+'"><\/img><\/div><div class="my-chat-msg">'+r+"<\/div><\/div>"):$("#"+f).find("#divMessage").append('<div class="message"><div class="userName your-chat-name"><img class="chat-pic-left" src="/Photos/Members/s25634/'+v+'"><\/img> <span class="avatar-name">'+h+'<\/span> <span class="avatar-time">'+c+'<\/span> <\/div><div class="your-chat-msg">'+r+"<\/div><\/div>");y=$("#"+f).find(".messageArea").html();sessionStorage.setItem("msg_"+o,y);e=document.createElement("audio");e.src="/audio/message-come.mp3";e.volume=.8;e.autoPlay=!1;e.preLoad=!0;e.controls=!0;e.play();p=$("#"+f).find("#divMessage")[0].scrollHeight;$("#"+f).find("#divMessage").scrollTop(p)});window.TypingTimer=null;connection.on("Typing",function(n,t){var i=getPrivateChatWindowId(n,t);$("#"+i).find("#isTyping").html("<em>Typing<\/em>");$("#"+i).find("#typingIndicator").show();clearTimeout(window.TypingTimer);window.TypingTimer=setTimeout(function(){$("#"+i).find("#typingIndicator").hide()},3e3)});connection.on("MessageSeen",function(n,t){var i=getPrivateChatWindowId(n,t),r="Seen "+moment().format("hh:mm a");$("#"+i).find("#msg-seen").remove();$("#"+i).find(".my-chat-msg:last").after("<div id='msg-seen'><i class='icon-check-1'><\/i> <span>"+r+"<\/span><\/div>")});connection.on("Disconnected",function(n,t){var r=window.chatUsers.find(t=>t.connectionId===n),u,i;t==="invisible"?(r&&(r.isInvisible=!0,r.isOffline=!1),i=$("#"+n),i&&i.closest("li").hide()):t==="offline"?(r&&(r.isOffline=!0,r.isInvisible=!1),i=$(".chat-online-status",$("#"+n).closest("li")),i&&i.removeClass("online-mark").addClass("offline-mark")):t==="permanent"&&(u=window.chatUsers.findIndex(function(t){return t.connectionId===n}),u!==-1&&window.chatUsers.splice(u,1),i=$(".chat-online-status",$("#"+n).closest("li")),i&&i.removeClass("online-mark").addClass("offline-mark"))})});$(".chat-visibility-area").click(function(){$(".chat-visibility-container").toggle(100)});$("#online-me").click(function(){$(".chat-visibility-container").toggle(100);$.cookie(ckOnlineStatus,"online",{path:"/"});markMeOnline();var n=$.cookie(ckChatUserName);n&&connection.invoke("OnConnect",n,!1,!1).catch(function(n){return console.error(n.toString())})});$("#offline-me").click(function(){$(".chat-visibility-container").toggle(100);$.cookie(ckOnlineStatus,"offline",{path:"/"});markMeOffline();connection.invoke("OnDisconnect","offline").catch(function(n){return console.error(n.toString())})});$("#invisible-me").click(function(){$(".chat-visibility-container").toggle(100);$.cookie(ckOnlineStatus,"invisible",{path:"/"});markMeInvisible();connection.invoke("OnDisconnect","invisible").catch(function(n){return console.error(n.toString())})});window.onbeforeunload=function(){connection.invoke("OnDisconnect","permanent").catch(function(n){return console.error(n.toString())})};$(function(){loadTopMenuNotifications();loadChatAreaOnRight();var n=52,t=40,i=$(window).height()-n-t;$("#divChatUsers").slimScroll({height:i+"px"});$(document).ready(function(){function i(n,t,i){for(var u=n.length,r=-1;i--&&r++<u;)if(r=n.indexOf(t,r),r<0)break;return r}var r=0;$(window).scroll(function(){r=$(window).scrollTop()});$("#divChatContainer").mouseleave(function(){$("#chat-user-info").hide()});$("#chat-user-info").mouseenter(function(){$("#chat-user-info").show()});$("#chat-user-info").mouseleave(function(){$("#chat-user-info").hide()});$(document).on("mouseover",".chat-user-li",function(){var o,s,f,c;$("#chat-user-info").show();var y=$("#divChatUsers").width()+8,p=$(this).position().top+n+t-20+r,u=$(this).find(".user").attr("class"),e=u.substr(0,u.indexOf("_"));e=e.replace("user ","");o=!1;s=$.cookie("ckIsPaidMember");s&&s==="true"&&(o=!0);f=$(this).find("img").attr("src");o||(f=f.replace("s25634","b10025"));$("#chat-hover-user-img").attr("src",f);c=$(this).find(".user").html();$("#chat-hover-user-name").html(c);var l=i(u,"_",4)+1,w=i(u,"_",5),b=w-l,k=u.substr(l,b)+" years";$("#chat-hover-user-age").html(k);var a=i(u,"_",7)+1,d=i(u,"_",8),g=d-a,h=u.substr(a,g);h=h.replace("--"," / ");$("#chat-hover-user-education").html(h);var v=i(u,"_",8)+1,nt=i(u,"_",9),tt=nt-v,it=u.substr(v,tt);$("#chat-hover-user-maritalStatus").html(it);$("#chat-hover-user-viewdetails").attr("href","/search/profile/?id="+e);$("#chat-user-info").css("right",y);$("#chat-user-info").css("top",p)})})});app.factory("createProfileService",["$http",function(n){return{saveUserProfile:function(t){return n({url:"/Account/SaveUserProfile",method:"POST",contentType:"application/json",data:t})},getUserProfile:function(t){return n({url:"/Account/GetUserProfile",method:"GET","async":!1,params:{UserId:t}})}}}]);app.controller("CreateProfileCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","createProfileService",function(n,t,i,r,u,f,e){function y(){for(var n=[],i=(new Date).getFullYear()-18,r=0;r<=45;r++)n.push(i),i--;t.birthYearList=n}function l(){if(t.ProfileCreatedBy!="Self"){$(".profile-creator-name-section").show();var n=t.ProfileCreatedBy==="Parents"?"Father / Mother Name":t.ProfileCreatedBy+" Name";$(".profile-creator-name-caption").html(n+'<span class="mandatory-field">*<\/span>')}else $(".profile-creator-name-section").hide()}function p(){$(".create-profile-loading").show()}function a(){$(".create-profile-loading").hide()}function w(n){if(t.Email=n.Email,t.Mobile=n.Mobile,t.Password=n.Password,t.ConfirmPassword=n.Password,t.ProfileCreatedBy=n.ProfileBy,t.MaritalStatus=n.MaritalStatus,t.Gender=n.Gender,t.Name=n.Name,t.Religion=n.Religion,t.NID=n.NID,t.PhotoMode=n.PhotoMode,t.Nationality=n.Nationality,t.BirthDay=moment(n.DateOfBirth).format("DD"),t.BirthMonth=moment(n.DateOfBirth).format("MM"),t.BirthYear=moment(n.DateOfBirth).format("YYYY"),t.Height=n.Height,t.Weight=n.Weight,t.BodyType=n.BodyType,t.Complexion=n.Complexion,t.BloodGroup=n.BloodGroup,t.PhysicalAttributeDetails=n.PhysicalAttributeDetails==="Undefined"||n.PhysicalAttributeDetails==="Tell you later"?"":n.PhysicalAttributeDetails,t.Education=n.Education,t.EducationDetails=n.EducationDetails==="Undefined"||n.EducationDetails==="Tell you later"?"":n.EducationDetails,t.Profession=n.ProfessionWithGroupKey,t.ProfessionDetails=n.ProfessionDetails==="Undefined"||n.ProfessionDetails==="Tell you later"?"":n.ProfessionDetails,t.WorkingWith=n.WorkingWith,t.AnnualIncome=n.AnnualIncome,t.FatherStatus=n.FatherStatus,t.MotherStatus=n.MotherStatus,t.HomeDistrict=n.HomeDistrict,t.CountryLivingIn=n.CountryLivingIn,t.CityLivingIn=n.CityLivingIn==="Undefined"||n.CityLivingIn==="Tell you later"?"":n.CityLivingIn,t.FamilyDetails=n.FamilyDetails==="Undefined"||n.FamilyDetails==="Tell you later"?"":n.FamilyDetails,t.ReligiousValue=n.ReligiousValue,t.FamilyValue=n.FamilyValue,t.Diet=n.Diet,t.Smoke=n.Smoke,t.AboutMe=n.AboutMyself,t.ProfileCreatorName=n.ProfileCreatorName,t.MonthlyIncome=n.MonthlyIncome,t.IsIncomePrivate=n.IsIncomePrivate,t.BrotherUnMarriedCount=n.BrotherUnMarriedCount,t.BrotherMarriedCount=n.BrotherMarriedCount,t.SisterUnMarriedCount=n.SisterUnMarriedCount,t.SisterMarriedCount=n.SisterMarriedCount,t.NoOfChildren=n.NoOfChildren,t.FatherOccupation=n.FatherOccupation,t.MotherOccupation=n.MotherOccupation,n.ProfileBy!="Self"){$(".profile-creator-name-section").show();var i=n.ProfileBy==="Parents"?"Father / Mother Name":n.ProfileBy+" Name";$(".profile-creator-name-caption").html(i+'<span class="mandatory-field">*<\/span>')}n.MaritalStatus!=="UnMarried"&&$("#NoOfChildrenContainer").show();$("#aboutme-length").html(n.AboutMyself.length)}function o(n){return n==null||n===""}function b(){return o(t.Gender)?!1:o(t.Name)||o(t.Mobile)||o(t.Height)||o(t.Weight)||o(t.BodyType)||o(t.Complexion)||o(t.Education)||o(t.WorkingWith)||o(t.Profession)||o(t.FatherStatus)||o(t.MotherStatus)||o(t.HomeDistrict)||o(t.AboutMe)?!1:!s()&&!$("#ckbAgreeTerms").is(":checked")?($("#agreeContainer").addClass("i-agree-required"),bootbox.alert("<h4 class='alert-msg'>Please agree terms & conditions!<\/h4>",function(){}),!1):!0}function k(n){for(var t,r=n.split(" "),i=0;i<r.length;i++)if(t=r[i],(t.indexOf("013")>=0||t.indexOf("014")>=0||t.indexOf("015")>=0||t.indexOf("016")>=0||t.indexOf("017")>=0||t.indexOf("018")>=0||t.indexOf("019")>=0)&&t.length==11)return t;return null}function d(n){for(var t,r=n.split(" "),i=0;i<r.length;i++)if(t=r[i],t.indexOf("@")>=0&&t.indexOf(".")>=0)return t;return null}function v(){localStorage.setItem("mobile","");localStorage.setItem("email","");localStorage.setItem("password","");localStorage.setItem("profileCreatedBy","")}function g(n){$(".error-message").show();$(".error-list").append("<li>"+n+"<\/li>")}function s(){var n=getParam("UserId"),t=getParam("Type");return n!==""&&t==="update"?!0:!1}var h,c;t.userId=getParam("UserId");window.isAgency=getParam("agency")?!0:!1;window.isAgency&&($("#registration-steps").hide(),$(".agency-no-need").hide(),$(".login-section-header").html("Gender & Status"));h=$("#aboutMe").val().length;$("#aboutme-length").html(h);$("#aboutMe").keyup(function(){var n=$("#aboutMe").val().length;$("#aboutme-length").html(n)});t.ProfileCreatedBy="Self";t.PhotoMode="";t.Nationality="Bangladeshi";t.CountryLivingIn="Bangladesh";t.ReligiousValue="Average religious";t.FamilyValue="Traditional";t.Diet="DoesNotMatter";t.Smoke="NonSmoker";t.BrotherUnMarriedCount=0;t.BrotherMarriedCount=0;t.SisterUnMarriedCount=0;t.SisterMarriedCount=0;t.NoOfChildren="0";y();s()?(c=t.userId,$("#ckbAgreeTerms").prop("checked",!0),$("#btnCreateProfile").text("Update My Profile"),$("#breadcrumb-header-label").html("Update Profile"),$("#form-header-label").html("Update Profile"),$("#registration-steps").hide(),$("#terms-condition-section").hide(),e.getUserProfile(c).success(function(n){w(n)}).error(function(){g("Error to get userProfile info")})):(t.Mobile=localStorage.getItem("mobile"),t.Email=localStorage.getItem("email"),t.Password=localStorage.getItem("password"),t.ProfileCreatedBy=localStorage.getItem("profileCreatedBy"),l());t.changeMaritalStatus=function(){t.MaritalStatus!=="UnMarried"?$("#NoOfChildrenContainer").show():$("#NoOfChildrenContainer").hide()};t.profileCreatedByChange=function(){l()};t.showTermsAndCondition=function(){bootbox.dialog({title:"",size:"large",title:"Terms & Conditions",className:"terms-condition",message:$("#terms-and-condition").html(),buttons:{}})};t.previewText=function(){var r="",i,n,u;t.HintEducation&&(r="I completed my "+t.HintEducation,t.HintInstitution&&(r+=" from "+t.HintInstitution+". "));i="";t.HintDesignation&&(i="Currently I am working as a "+t.HintDesignation,t.HintCompanyName&&(i+=" in "+t.HintCompanyName+". "));n="";t.HintBrother&&(parseInt(t.HintBrother,10)===1?n="I have "+t.HintBrother+" brother":parseInt(t.HintBrother,10)>1&&(n="I have "+t.HintBrother+" brothers"));t.HintSister?n+=n?parseInt(t.HintSister,10)===1?" and "+t.HintSister+" sister. ":parseInt(t.HintSister,10)>1?" and "+t.HintSister+" sisters. ":". ":parseInt(t.HintSister,10)===1?" I have "+t.HintSister+" sister. ":parseInt(t.HintSister,10)>1?" I have "+t.HintSister+" sisters. ":". ":n&&(n+=". ");u="";t.HintSpouseType&&(u="I am looking for a "+t.HintSpouseType+" spouse as my life partner.");t.AboutMe=r+i+n+u};t.myselfHelper=function(){var n=$("#help-myself-container");$(n).is(":visible")?$("#linkOpenMyselfHelper").html('<i class="icon-down-circled"><\/i> Help me to write this'):$("#linkOpenMyselfHelper").html('<i class="icon-up-circled"><\/i> Help me to write this');n.slideToggle()};t.numberOnly=function(n){$.inArray(n.keyCode,[46,8,9,27,13,110,190])!==-1||n.keyCode==65&&(n.ctrlKey===!0||n.metaKey===!0)||n.keyCode>=35&&n.keyCode<=40||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()};t.CreateProfile=function(){var f,l,r,y,i,u,h,c,o,n;if(t.submitted=!0,!b()){i=$(".ng-invalid-required",".form-horizontal").first();i&&i.length>0&&(u=i.offset().top-80,$(window).scrollTop(u));return}if(t.ProfileCreatedBy!="Self"){if(!t.ProfileCreatorName){bootbox.alert("<h4 class='alert-msg'>Please enter profile creator name!<\/h4>",function(){});return}}else t.ProfileCreatorName=t.Name;if(f=!1,t.BirthYear&&t.BirthMonth&&t.BirthDay?(l=t.BirthYear+"-"+t.BirthMonth+"-"+t.BirthDay+"T00:00:00",r=new Date(l),r=="Invalid Date"&&(f=!0),y="YYYY-MM-DD",r=moment(r).format(y)):f=!0,f){bootbox.alert("<h4 class='alert-msg'>Invalid Date of Birth!<\/h4>",function(){});$(".birth-date-container").css("border","1px solid red");i=$(".birth-date",".form-horizontal").first();u=i.offset().top-80;$(window).scrollTop(u);return}if(t.AboutMe.length<20){bootbox.alert("<h4>Your have to write about yourself. Minimum 20 characters.<\/h4>",function(){});return}if(h=k(t.AboutMe),h){bootbox.alert("<h4>Mobile Number '"+h+"' is not allowed!<\/h4>",function(){});return}if(c=d(t.AboutMe),c){bootbox.alert("<h4>Email '"+c+"' is not allowed!<\/h4>",function(){});return}setButtonState("btnCreateProfile",!0);o=t.PhotoMode;o||(o=t.Gender==="male"?EPhotoMode.view_all:EPhotoMode.view_premiums);p();n={};n.User={};n.User.Email=t.Email;n.User.Mobile=t.Mobile;n.User.Password=t.Password;n.ProfileBy=t.ProfileCreatedBy;n.Gender=t.Gender;n.MaritalStatus=t.MaritalStatus;n.UserId=t.userId;n.Name=t.Name;n.DateOfBirth=r;n.Religion=t.Religion;n.Nationality=t.Nationality;n.Mobile=t.Mobile;n.NID=t.NID;n.PhotoMode=o;n.Height=t.Height;n.Weight=t.Weight.replace("kg","").replace("Kg","").replace("KG","");n.BodyType=t.BodyType;n.Complexion=t.Complexion;n.BloodGroup=t.BloodGroup;n.PhysicalAttributeDetails=t.PhysicalAttributeDetails;n.Education=t.Education;n.EducationDetails=t.EducationDetails;n.Profession=t.Profession;n.ProfessionDetails=t.ProfessionDetails;n.WorkingWith=t.WorkingWith;n.AnnualIncome=t.AnnualIncome;n.FamilyDetails=t.FamilyDetails;n.FatherStatus=t.FatherStatus;n.MotherStatus=t.MotherStatus;n.FatherOccupation=t.FatherOccupation;n.MotherOccupation=t.MotherOccupation;n.HomeDistrict=t.HomeDistrict;n.CountryLivingIn=t.CountryLivingIn;n.CityLivingIn=t.CityLivingIn;n.BrotherUnMarriedCount=parseInt(t.BrotherUnMarriedCount,10);n.BrotherMarriedCount=parseInt(t.BrotherMarriedCount,10);n.SisterUnMarriedCount=parseInt(t.SisterUnMarriedCount,10);n.SisterMarriedCount=parseInt(t.SisterMarriedCount,10);n.ReligiousValue=t.ReligiousValue;n.FamilyValue=t.FamilyValue;n.Diet=t.Diet;n.Smoke=t.Smoke;n.AboutMyself=t.AboutMe;n.ProfileCreatorName=t.ProfileCreatorName;n.MonthlyIncome=t.MonthlyIncome;n.IsIncomePrivate=t.IsIncomePrivate;n.NoOfChildren=t.NoOfChildren?t.NoOfChildren.toString():"0";e.saveUserProfile(n).success(function(n){if(n.IsSuccess)if(s())window.location.href="/Info/ProfileUpdated";else if(window.isAgency)window.location.href="/Agency/Index?createSuccess=y";else{var i=t.Gender.toLowerCase()==="male"?"female":"male";window.location.href="/verification/documents?fromReg=yes&partnerGender="+i}else n.Message?bootbox.alert("<h4 style='text-align:center;'>"+n.Message+"<\/h4>",function(){}):bootbox.alert("<h4>Something went wrong! Failed to save your profile<\/h4><br /> <div style='padding-top:7px;'>Please login your account few minutes later and try to save your profile again. <\/div>",function(){});setButtonState("btnCreateProfile",!1);a();v()}).error(function(){bootbox.alert("<h4>Error occured! Failed to save your profile<\/h4><br /> <div style='padding-top:7px;'>Please login your account few minutes later and try to save your profile again. <\/div>",function(){});setButtonState("btnCreateProfile",!1);a();v()})}}]);app.factory("partnerPreferenceService",["$http",function(n){return{savePartnerPreference:function(t){return n({url:"/Account/SavePartnerPreference",method:"POST",data:t})},getPartnerPreference:function(t){return n({url:"/Account/GetPartnerPreference",method:"GET","async":!1,params:{UserId:t}})}}}]);app.controller("PartnerPreferenceCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","partnerPreferenceService",function(n,t,i,r,u,f,e){function l(n){var r,i;if(t.ageFrom=n.AgeFrom,t.ageTo=n.AgeTo,t.heightFrom=n.HeightFrom,t.heightTo=n.HeightTo,r=[],n.ProfileCreatedBy)for(r=n.ProfileCreatedBy.split(","),i=0;i<r.length;i++)$("#ddlProfileCreatedBy option[value='"+r[i]+"']").attr("selected",1),$("#ddlProfileCreatedBy").multiselect("refresh");if(n.MaritalStatus)for(r=n.MaritalStatus.split(","),i=0;i<r.length;i++)$("#ddlMaritalStatus option[value='"+r[i]+"']").attr("selected",1),$("#ddlMaritalStatus").multiselect("refresh");if(n.BodyType)for(r=n.BodyType.split(","),i=0;i<r.length;i++)$("#ddlBodyType option[value='"+r[i]+"']").attr("selected",1),$("#ddlBodyType").multiselect("refresh");if(n.Complexion)for(r=n.Complexion.split(","),i=0;i<r.length;i++)$("#ddlComplexion option[value='"+r[i]+"']").attr("selected",1),$("#ddlComplexion").multiselect("refresh");if(n.CountryLivingIn)for(r=n.CountryLivingIn.split(","),i=0;i<r.length;i++)$("#ddlCountryLivingIn option[value='"+r[i]+"']").attr("selected",1),$("#ddlCountryLivingIn").multiselect("refresh");if(n.Education)for(r=n.Education.split(","),i=0;i<r.length;i++)$("#ddlEducation option[value='"+r[i]+"']").attr("selected",1),$("#ddlEducation").multiselect("refresh");if(n.Profession)for(r=n.Profession.split(","),i=0;i<r.length;i++)$("#ddlProfession option[value='"+r[i]+"']").attr("selected",1),$("#ddlProfession").multiselect("refresh");if(n.WorkingSector)for(r=n.WorkingSector.split(","),i=0;i<r.length;i++)$("#ddlWorkingSector option[value='"+r[i]+"']").attr("selected",1),$("#ddlWorkingSector").multiselect("refresh")}function h(){var n=getParam("UserId"),t=getParam("Type");return n!==""&&t==="update"?!0:!1}function a(){$(".create-profile-loading").show()}function c(){$(".create-profile-loading").hide()}var o,s;t.ageFrom="";t.ageTo="";t.heightFrom="";t.heightTo="";o=getParam("partnerGender");o&&($(".partner-gender").show(),o==="male"?$(".gender-male").show():o==="female"&&$(".gender-female").show());h()&&(s=getParam("UserId"),$("#btnSkip").hide(),$("#registration-steps").hide(),e.getPartnerPreference(s).success(function(n){l(n)}).error(function(){ShowError("Error to get userProfile info")}));t.Skip=function(){window.location.href="/photo/managephoto?fromReg=yes"};t.CreatePartnerPreference=function(){var y,p,w,b,k,d,g,n;if(t.submitted=!0,t.myForm.$invalid)return!1;var r="",i="",u="",f="",o="",s="",l="",v="",nt=$("#ddlProfileCreatedBy option:selected");if(nt.each(function(){var n=$(this).val();r+=$(this).val()+","}),y=$("#ddlMaritalStatus option:selected"),y.each(function(){var n=$(this).val();i+=$(this).val()+","}),p=$("#ddlBodyType option:selected"),p.each(function(){var n=$(this).val();u+=$(this).val()+","}),w=$("#ddlComplexion option:selected"),w.each(function(){var n=$(this).val();f+=$(this).val()+","}),b=$("#ddlCountryLivingIn option:selected"),b.each(function(){var n=$(this).val();o+=$(this).val()+","}),k=$("#ddlEducation option:selected"),k.each(function(){var n=$(this).val();s+=$(this).val()+","}),d=$("#ddlProfession option:selected"),d.each(function(){var n=$(this).val();l+=$(this).val()+","}),g=$("#ddlWorkingSector option:selected"),g.each(function(){var n=$(this).val();v+=$(this).val()+","}),!t.ageFrom){bootbox.alert('<h4>Please select your partner preferred "Age From"<\/h4>',function(){});return}if(!t.ageTo){bootbox.alert('<h4>Please select your partner preferred "Age To"<\/h4>',function(){});return}if(!t.heightFrom){bootbox.alert('<h4>Please select your partner preferred "Height From"<\/h4>',function(){});return}if(!t.heightTo){bootbox.alert('<h4>Please select your partner preferred "Height To"<\/h4>',function(){});return}if(!i){bootbox.alert("<h4>Please select your partner marital status!<\/h4>",function(){});return}setButtonState("btnCreatePartnerPreference",!0);a();n={};n.AgeFrom=t.ageFrom;n.AgeTo=t.ageTo;n.HeightFrom=t.heightFrom;n.HeightTo=t.heightTo;n.MaritalStatus=i;n.ProfileCreatedBy=r;n.CountryLivingIn=o;n.Education=s;n.Profession=l;n.WorkingSector=v;n.Complexion=f;n.BodyType=u;e.savePartnerPreference(n).success(function(n){n.isSuccess?window.location.href=h()?"/Info/Message?message=Your partner preference has been updated successfully":"/photo/managephoto?fromReg=yes":bootbox.alert("<h4>"+n.message+"<\/h4>",function(){});setButtonState("btnCreatePartnerPreference",!1);c()}).error(function(){bootbox.alert("<h4>Error occured while creating profile. Please contact with bdmarriage team!<\/h4>",function(){});setButtonState("btnCreatePartnerPreference",!1);c()})};$("#ddlMaritalStatus").multiselect({includeSelectAllOption:!0,nonSelectedText:"Please Select",buttonWidth:"250px",dropRight:!0});$("#ddlBodyType").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});$("#ddlComplexion").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});$("#ddlProfileCreatedBy").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});$("#ddlCountryLivingIn").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});$("#ddlEducation").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});$("#ddlProfession").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0});$("#ddlWorkingSector").multiselect({includeSelectAllOption:!0,nonSelectedText:"Any",buttonWidth:"250px",dropRight:!0})}]);app.factory("registerAccountService",["$http",function(n){return{verifyMobileEmailExists:function(t,i){return n({url:"/Account/VerifyEmailAndMobileExist?mobile="+t+"&email="+i,method:"POST",data:{}})}}}]);app.controller("RegisterAccountCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","registerAccountService",function(n,t,i,r,u,f,e){function s(){sessionStorage.getItem("mobile")&&(t.Mobile=sessionStorage.getItem("mobile"));sessionStorage.getItem("email")&&(t.Email=sessionStorage.getItem("email"));sessionStorage.getItem("password")&&(t.Password=sessionStorage.getItem("password"));sessionStorage.getItem("profileBy")&&(t.ProfileBy=sessionStorage.getItem("profileBy"))}function h(){$(".verifying").show()}function o(){$(".verifying").hide()}function c(){var n=isValidEmail(t.Email);return n?!0:(bootbox.alert("<h4>Please enter a valid email address!<\/h4>",function(){}),!1)}setAppTitle("Register Account");s();t.RegisterAccount=function(){if(t.submitted=!0,t.myForm.$invalid)return!1;c()&&(setButtonState("btnCreateProfile",!0),h(),e.verifyMobileEmailExists(t.Mobile,t.Email).success(function(n){n.IsSuccess?(sessionStorage.setItem("mobile",t.Mobile),t.Email&&sessionStorage.setItem("email",t.Email),sessionStorage.setItem("password",t.Password),sessionStorage.setItem("profileBy",t.ProfileBy),window.location.href="/register/basic"):bootbox.alert("<h5>"+n.Message+"<\/h5>",function(){});o()}).error(function(){o()}))}}]);app.factory("registerBasicService",["$http",function(){return{}}]);app.controller("RegisterBasicCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","registerBasicService",function(n,t){function f(){sessionStorage.getItem("profileBy")&&(t.ProfileBy=sessionStorage.getItem("profileBy"));sessionStorage.getItem("profileCreatorName")&&(t.ProfileCreatorName=sessionStorage.getItem("profileCreatorName"));sessionStorage.getItem("name")&&(t.Name=sessionStorage.getItem("name"));sessionStorage.getItem("gender")&&(t.Gender=sessionStorage.getItem("gender"));sessionStorage.getItem("religion")&&(t.Religion=sessionStorage.getItem("religion"));sessionStorage.getItem("maritalStatus")&&(t.MaritalStatus=sessionStorage.getItem("maritalStatus"));sessionStorage.getItem("nationality")&&(t.Nationality=sessionStorage.getItem("nationality"));sessionStorage.getItem("noOfChildren")&&(t.NoOfChildren=sessionStorage.getItem("noOfChildren"))}function e(){for(var n=[],i=(new Date).getFullYear()-18,r=0;r<=45;r++)n.push(i),i--;t.birthYearList=n}function r(){t.MaritalStatus&&t.MaritalStatus!=="UnMarried"?$("#NoOfChildrenContainer").show():$("#NoOfChildrenContainer").hide()}function u(){if(t.ProfileBy!="Self"){$(".profile-creator-name-section").show();var n=t.ProfileBy==="Parents"?"Father / Mother Name":t.ProfileBy+" Name";$(".profile-creator-name-caption").html(n+'<span class="mandatory-field">*<\/span>')}else $(".profile-creator-name-section").hide()}function i(n){return n==null||n===""}function o(){return i(t.Gender)?!1:i(t.Name)||i(t.MaritalStatus)||i(t.Religion)||i(t.ProfileBy)?!1:!0}setAppTitle("Register Account");t.Nationality="Bangladeshi";t.NoOfChildren="0";e();f();u();r();t.changeMaritalStatus=function(){r()};t.profileCreatedByChange=function(){u()};t.CreateProfile=function(){var u,f,i,e,n,r;if(t.submitted=!0,!o()){n=$(".ng-invalid-required",".form-horizontal").first();n&&n.length>0&&(r=n.offset().top-80,$(window).scrollTop(r));return}if(t.ProfileBy!="Self"){if(!t.ProfileCreatorName){bootbox.alert("<h4 class='alert-msg'>Please enter profile creator name!<\/h4>",function(){});return}}else t.ProfileCreatorName=t.Name;if(u=!1,t.BirthYear&&t.BirthMonth&&t.BirthDay?(f=t.BirthYear+"-"+t.BirthMonth+"-"+t.BirthDay+"T00:00:00",i=new Date(f),i=="Invalid Date"&&(u=!0),e="YYYY-MM-DD",i=moment(i).format(e)):u=!0,u){bootbox.alert("<h4 class='alert-msg'>Invalid Date of Birth!<\/h4>",function(){});$(".birth-date-container").css("border","1px solid red");n=$(".birth-date",".form-horizontal").first();r=n.offset().top-80;$(window).scrollTop(r);return}sessionStorage.setItem("profileBy",t.ProfileBy);sessionStorage.setItem("profileCreatorName",t.ProfileCreatorName);sessionStorage.setItem("gender",t.Gender);sessionStorage.setItem("maritalStatus",t.MaritalStatus);sessionStorage.setItem("name",t.Name);sessionStorage.setItem("dateOfBirth",i);sessionStorage.setItem("religion",t.Religion);sessionStorage.setItem("noOfChildren",t.NoOfChildren);t.Nationality&&sessionStorage.setItem("nationality",t.Nationality);window.location.href="/register/educationcareer"};t.Back=function(){window.location.href="/register/account"}}]);app.factory("educationCareerService",["$http",function(){return{}}]);app.controller("RegisterEducationCareerCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","educationCareerService",function(n,t){function r(){sessionStorage.getItem("education")&&(t.Education=sessionStorage.getItem("education"));sessionStorage.getItem("educationDetails")&&(t.EducationDetails=sessionStorage.getItem("educationDetails"));sessionStorage.getItem("profession")&&(t.Profession=sessionStorage.getItem("profession"));sessionStorage.getItem("professionDetails")&&(t.ProfessionDetails=sessionStorage.getItem("professionDetails"));sessionStorage.getItem("workingWith")&&(t.WorkingWith=sessionStorage.getItem("workingWith"));sessionStorage.getItem("monthlyIncome")&&(t.MonthlyIncome=sessionStorage.getItem("monthlyIncome"));sessionStorage.getItem("isIncomePrivate")&&(t.IsIncomePrivate=sessionStorage.getItem("isIncomePrivate").toLowerCase()==="true"?!0:!1)}function i(n){return n==null||n===""}function u(){return i(t.Education)?!1:i(t.WorkingWith)||i(t.Profession)?!1:!0}setAppTitle("Register Account");r();t.CreateProfile=function(){var n,i;if(t.submitted=!0,!u()){n=$(".ng-invalid-required",".form-horizontal").first();n&&n.length>0&&(i=n.offset().top-80,$(window).scrollTop(i));return}t.Education&&sessionStorage.setItem("education",t.Education);t.EducationDetails&&sessionStorage.setItem("educationDetails",t.EducationDetails);t.Profession&&sessionStorage.setItem("profession",t.Profession);t.ProfessionDetails&&sessionStorage.setItem("professionDetails",t.ProfessionDetails);t.WorkingWith&&sessionStorage.setItem("workingWith",t.WorkingWith);t.MonthlyIncome&&sessionStorage.setItem("monthlyIncome",t.MonthlyIncome);t.IsIncomePrivate&&sessionStorage.setItem("isIncomePrivate",t.IsIncomePrivate);window.location.href="/register/family"};t.Back=function(){window.location.href="/register/basic"}}]);app.factory("familyService",["$http",function(){return{}}]);app.controller("RegisterFamilyCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","familyService",function(n,t){function r(){sessionStorage.getItem("fatherStatus")&&(t.FatherStatus=sessionStorage.getItem("fatherStatus"));sessionStorage.getItem("motherStatus")&&(t.MotherStatus=sessionStorage.getItem("motherStatus"));sessionStorage.getItem("fatherOccupation")&&(t.FatherOccupation=sessionStorage.getItem("fatherOccupation"));sessionStorage.getItem("motherOccupation")&&(t.MotherOccupation=sessionStorage.getItem("motherOccupation"));sessionStorage.getItem("homeDistrict")&&(t.HomeDistrict=sessionStorage.getItem("homeDistrict"));sessionStorage.getItem("countryLivingIn")&&(t.CountryLivingIn=sessionStorage.getItem("countryLivingIn"));sessionStorage.getItem("cityLivingIn")&&(t.CityLivingIn=sessionStorage.getItem("cityLivingIn"));sessionStorage.getItem("familyDetails")&&(t.FamilyDetails=sessionStorage.getItem("familyDetails"));sessionStorage.getItem("brotherUnMarriedCount")&&(t.BrotherUnMarriedCount=sessionStorage.getItem("brotherUnMarriedCount"));sessionStorage.getItem("brotherMarriedCount")&&(t.BrotherMarriedCount=sessionStorage.getItem("brotherMarriedCount"));sessionStorage.getItem("sisterUnMarriedCount")&&(t.SisterUnMarriedCount=sessionStorage.getItem("sisterUnMarriedCount"));sessionStorage.getItem("sisterMarriedCount")&&(t.SisterMarriedCount=sessionStorage.getItem("sisterMarriedCount"))}function i(n){return n==null||n===""}function u(){return i(t.FatherStatus)?!1:i(t.MotherStatus)||i(t.HomeDistrict)?!1:!0}setAppTitle("Register Account");t.CountryLivingIn="Bangladesh";t.BrotherUnMarriedCount=0;t.BrotherMarriedCount=0;t.SisterUnMarriedCount=0;t.SisterMarriedCount=0;r();t.CreateProfile=function(){var n,i;if(t.submitted=!0,!u()){n=$(".ng-invalid-required",".form-horizontal").first();n&&n.length>0&&(i=n.offset().top-80,$(window).scrollTop(i));return}t.FatherStatus&&sessionStorage.setItem("fatherStatus",t.FatherStatus);t.MotherStatus&&sessionStorage.setItem("motherStatus",t.MotherStatus);t.FatherOccupation&&sessionStorage.setItem("fatherOccupation",t.FatherOccupation);t.MotherOccupation&&sessionStorage.setItem("motherOccupation",t.MotherOccupation);t.HomeDistrict&&sessionStorage.setItem("homeDistrict",t.HomeDistrict);t.CountryLivingIn&&sessionStorage.setItem("countryLivingIn",t.CountryLivingIn);t.CityLivingIn&&sessionStorage.setItem("cityLivingIn",t.CityLivingIn);t.FamilyDetails&&sessionStorage.setItem("familyDetails",t.FamilyDetails);sessionStorage.setItem("brotherUnMarriedCount",parseInt(t.BrotherUnMarriedCount,10));sessionStorage.setItem("brotherMarriedCount",parseInt(t.BrotherMarriedCount,10));sessionStorage.setItem("sisterUnMarriedCount",parseInt(t.SisterUnMarriedCount,10));sessionStorage.setItem("sisterMarriedCount",parseInt(t.SisterMarriedCount,10));window.location.href="/register/PsysicalAttr"};t.Back=function(){window.location.href="/register/educationcareer"}}]);app.factory("psysicalAttrService",["$http",function(){return{}}]);app.controller("RegisterPsysicalAttrCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","psysicalAttrService",function(n,t){function r(){sessionStorage.getItem("height")&&(t.Height=sessionStorage.getItem("height"));sessionStorage.getItem("weight")&&(t.Weight=sessionStorage.getItem("weight"));sessionStorage.getItem("bodyType")&&(t.BodyType=sessionStorage.getItem("bodyType"));sessionStorage.getItem("complexion")&&(t.Complexion=sessionStorage.getItem("complexion"));sessionStorage.getItem("bloodGroup")&&(t.BloodGroup=sessionStorage.getItem("bloodGroup"));sessionStorage.getItem("physicalAttributeDetails")&&(t.PhysicalAttributeDetails=sessionStorage.getItem("physicalAttributeDetails"))}function i(n){return n==null||n===""}function u(){return i(t.Height)?!1:i(t.Weight)||i(t.BodyType)||i(t.Complexion)?!1:!0}setAppTitle("Register Account");r();t.CreateProfile=function(){var n,i;if(t.submitted=!0,!u()){n=$(".ng-invalid-required",".form-horizontal").first();n&&n.length>0&&(i=n.offset().top-80,$(window).scrollTop(i));return}t.Height&&sessionStorage.setItem("height",t.Height);t.Weight&&sessionStorage.setItem("weight",t.Weight.replace("kg","").replace("Kg","").replace("KG",""));t.BodyType&&sessionStorage.setItem("bodyType",t.BodyType);t.Complexion&&sessionStorage.setItem("complexion",t.Complexion);t.BloodGroup&&sessionStorage.setItem("bloodGroup",t.BloodGroup);t.PhysicalAttributeDetails&&sessionStorage.setItem("physicalAttributeDetails",t.PhysicalAttributeDetails);window.location.href="/register/lifestyle"};t.Back=function(){window.location.href="/register/family"}}]);app.factory("lifeStyleService",["$http",function(){return{}}]);app.controller("RegisterLifeStyleCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","lifeStyleService",function(n,t){function r(){sessionStorage.getItem("religiousValue")&&(t.ReligiousValue=sessionStorage.getItem("religiousValue"));sessionStorage.getItem("familyValue")&&(t.FamilyValue=sessionStorage.getItem("familyValue"));sessionStorage.getItem("diet")&&(t.Diet=sessionStorage.getItem("diet"));sessionStorage.getItem("smoke")&&(t.Smoke=sessionStorage.getItem("smoke"))}function i(n){return n==null||n===""}function u(){return i(t.ReligiousValue)?!1:i(t.Smoke)?!1:!0}setAppTitle("Register Account");t.FamilyValue="Traditional";t.Diet="DoesNotMatter";r();t.CreateProfile=function(){var n,i;if(t.submitted=!0,!u()){n=$(".ng-invalid-required",".form-horizontal").first();n&&n.length>0&&(i=n.offset().top-80,$(window).scrollTop(i));return}t.ReligiousValue&&sessionStorage.setItem("religiousValue",t.ReligiousValue);t.FamilyValue&&sessionStorage.setItem("familyValue",t.FamilyValue);t.Diet&&sessionStorage.setItem("diet",t.Diet);t.Smoke&&sessionStorage.setItem("smoke",t.Smoke);window.location.href="/register/aboutme"};t.Back=function(){window.location.href="/register/PsysicalAttr"}}]);app.factory("aboutMeService",["$http",function(n){return{saveUserProfile:function(t){return n({url:"/Account/SaveUserProfile",method:"POST",contentType:"application/json",data:t})}}}]);app.controller("RegisterAboutMeCtrl",["$rootScope","$scope","$http","$filter","$location","Enum","aboutMeService",function(n,t,i,r,u,f,e){function h(){sessionStorage.getItem("aboutMyself")&&(t.AboutMyself=sessionStorage.getItem("aboutMyself"))}function c(){$(".create-profile-loading").show()}function o(){$(".create-profile-loading").hide()}function l(n){return n==null||n===""}function a(){return l(t.AboutMe)?!1:!0}setAppTitle("Register Account");var s=$("#aboutMe").val().length;$("#aboutme-length").html(s);h();$("#aboutMe").keyup(function(){var n=$("#aboutMe").val().length;$("#aboutme-length").html(n)});t.CreateProfile=function(){var i,r,n;if(t.submitted=!0,!a()){i=$(".ng-invalid-required",".form-horizontal").first();i&&i.length>0&&(r=i.offset().top-80,$(window).scrollTop(r));return}setButtonState("btnCreateProfile",!0);c();t.AboutMe&&sessionStorage.setItem("aboutMyself",t.AboutMe);n={};n.User={};n.User.Email=sessionStorage.getItem("email");n.User.Mobile=sessionStorage.getItem("mobile");n.User.Password=sessionStorage.getItem("password");n.ProfileBy=sessionStorage.getItem("profileBy");n.ProfileCreatorName=sessionStorage.getItem("profileCreatorName");n.Gender=sessionStorage.getItem("gender");n.MaritalStatus=sessionStorage.getItem("maritalStatus");n.Name=sessionStorage.getItem("name");n.DateOfBirth=sessionStorage.getItem("dateOfBirth");n.Religion=sessionStorage.getItem("religion");n.Nationality=sessionStorage.getItem("nationality");n.NoOfChildren=sessionStorage.getItem("noOfChildren");n.Education=sessionStorage.getItem("education");n.EducationDetails=sessionStorage.getItem("educationDetails");n.Profession=sessionStorage.getItem("profession");n.ProfessionDetails=sessionStorage.getItem("professionDetails");n.WorkingWith=sessionStorage.getItem("workingWith");n.MonthlyIncome=sessionStorage.getItem("monthlyIncome");n.IsIncomePrivate=sessionStorage.getItem("isIncomePrivate")==="true"?!0:!1;n.FatherStatus=sessionStorage.getItem("fatherStatus");n.MotherStatus=sessionStorage.getItem("motherStatus");n.FatherOccupation=sessionStorage.getItem("fatherOccupation");n.MotherOccupation=sessionStorage.getItem("motherOccupation");n.HomeDistrict=sessionStorage.getItem("homeDistrict");n.CountryLivingIn=sessionStorage.getItem("countryLivingIn");n.CityLivingIn=sessionStorage.getItem("cityLivingIn");n.BrotherUnMarriedCount=parseInt(sessionStorage.getItem("brotherUnMarriedCount"),10);n.BrotherMarriedCount=parseInt(sessionStorage.getItem("brotherMarriedCount"),10);n.SisterUnMarriedCount=parseInt(sessionStorage.getItem("sisterUnMarriedCount"),10);n.SisterMarriedCount=parseInt(sessionStorage.getItem("sisterMarriedCount"),10);n.FamilyDetails=sessionStorage.getItem("familyDetails");n.Height=sessionStorage.getItem("height");n.Weight=sessionStorage.getItem("weight");n.BodyType=sessionStorage.getItem("bodyType");n.Complexion=sessionStorage.getItem("complexion");n.BloodGroup=sessionStorage.getItem("bloodGroup");n.PhysicalAttributeDetails=sessionStorage.getItem("physicalAttributeDetails");n.ReligiousValue=sessionStorage.getItem("religiousValue");n.FamilyValue=sessionStorage.getItem("familyValue");n.Diet=sessionStorage.getItem("diet");n.Smoke=sessionStorage.getItem("smoke");n.AboutMyself=sessionStorage.getItem("aboutMyself");e.saveUserProfile(n).success(function(n){n.IsSuccess?window.location.href="/photo/managephoto?fromReg=yes":n.Message?bootbox.alert("<h4>"+n.Message+"<\/h4>",function(){}):bootbox.alert("<h4>Failed to save your information!<\/h4><br /> <div style='padding-top:7px;'>Please contact with bdmarriage support.<\/div>",function(){});setButtonState("btnCreateProfile",!1);o()}).error(function(){bootbox.alert("<h4>Error occured! Failed to save your information<\/h4><br /> <div style='padding-top:7px;'>Please contact with bdmarriage support.<\/div>",function(){});setButtonState("btnCreateProfile",!1);o()})};t.Back=function(){window.location.href="/register/lifestyle"};t.previewText=function(){var r="",i,n,u;t.HintEducation&&(r="I completed my "+t.HintEducation,t.HintInstitution&&(r+=" from "+t.HintInstitution+". "));i="";t.HintDesignation&&(i="Currently I am working as a "+t.HintDesignation,t.HintCompanyName&&(i+=" in "+t.HintCompanyName+". "));n="";t.HintBrother&&(parseInt(t.HintBrother,10)===1?n="I have "+t.HintBrother+" brother":parseInt(t.HintBrother,10)>1&&(n="I have "+t.HintBrother+" brothers"));t.HintSister?n+=n?parseInt(t.HintSister,10)===1?" and "+t.HintSister+" sister. ":parseInt(t.HintSister,10)>1?" and "+t.HintSister+" sisters. ":". ":parseInt(t.HintSister,10)===1?" I have "+t.HintSister+" sister. ":parseInt(t.HintSister,10)>1?" I have "+t.HintSister+" sisters. ":". ":n&&(n+=". ");u="";t.HintSpouseType&&(u="I am looking for a "+t.HintSpouseType+" spouse as my life partner.");t.AboutMe=r+i+n+u};t.myselfHelper=function(){var n=$("#help-myself-container");$(n).is(":visible")?$("#linkOpenMyselfHelper").html('<i class="icon-down-circled"><\/i> Help me to write this'):$("#linkOpenMyselfHelper").html('<i class="icon-up-circled"><\/i> Help me to write this');n.slideToggle()}}]);